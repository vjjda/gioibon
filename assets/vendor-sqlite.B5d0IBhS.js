var C=0,Yr=1,fe=5,tr=10,sr=12,or=14,Xr=21,Ze=25,xi=27,nr=100,Di=101,Li=3338,Oi=3594,ji=4106,Pi=2570,Ni=1802,Ui=1034,zi=3850,Bi=266,lt=522,Mi=1546,Hi=2058,ct=778,ut=1,lr=2,Me=4,Wi=8,Vi=64,ve=256,Qi=512,ye=0,qe=1,Ue=2,ze=4,$i=2048,Ki=16384,Gi=14,ft=21,_t=31,dt=32,Yi=33,Jr=1,Zr=2,et=3,rt=4,tt=5,Xi=2,Ji=512,Zi=class{name;mxPathname=64;_module;constructor(o,i){this.name=o,this._module=i}close(){}isReady(){return!0}hasAsyncMethod(o){return!1}xOpen(o,i,t,f,m){return or}xDelete(o,i,t){return C}xAccess(o,i,t,f){return C}xFullPathname(o,i,t,f){return C}xGetLastError(o,i,t){return C}xClose(o){return C}xRead(o,i,t,f,m){return C}xWrite(o,i,t,f,m){return C}xTruncate(o,i,t){return C}xSync(o,i){return C}xFileSize(o,i){return C}xLock(o,i){return C}xUnlock(o,i){return C}xCheckReservedLock(o,i){return C}xFileControl(o,i,t){return sr}xSectorSize(o){return Ji}xDeviceCharacteristics(o){return 0}},ea=Object.getPrototypeOf(async function(){}).constructor,ra=class extends Zi{constructor(o,i){super(o,i)}hasAsyncMethod(o){const i=`j${o.slice(1)}`;return this[i]instanceof ea}getFilename(o){throw new Error("unimplemented")}jOpen(o,i,t,f){return or}jDelete(o,i){return C}jAccess(o,i,t){return C}jFullPathname(o,i){const{read:t,written:f}=new TextEncoder().encodeInto(o,i);return t<o.length||f>=i.length?tr:(i[f]=0,C)}jGetLastError(o){return C}jClose(o){return C}jRead(o,i,t){return i.fill(0),lt}jWrite(o,i,t){return ct}jTruncate(o,i){return C}jSync(o,i){return C}jFileSize(o,i){return C}jLock(o,i){return C}jUnlock(o,i){return C}jCheckReservedLock(o,i){return i.setInt32(0,0,!0),C}jFileControl(o,i,t){return sr}jSectorSize(o){return super.xSectorSize(o)}jDeviceCharacteristics(o){return 0}xOpen(o,i,t,f,m){const g=this.#e(i,f),b=this.#t("Int32",m);return this.log?.("jOpen",g,t,"0x"+f.toString(16)),this.jOpen(g,t,f,b)}xDelete(o,i,t){const f=this._module.UTF8ToString(i);return this.log?.("jDelete",f,t),this.jDelete(f,t)}xAccess(o,i,t,f){const m=this._module.UTF8ToString(i),g=this.#t("Int32",f);return this.log?.("jAccess",m,t),this.jAccess(m,t,g)}xFullPathname(o,i,t,f){const m=this._module.UTF8ToString(i),g=this._module.HEAPU8.subarray(f,f+t);return this.log?.("jFullPathname",m,t),this.jFullPathname(m,g)}xGetLastError(o,i,t){const f=this._module.HEAPU8.subarray(t,t+i);return this.log?.("jGetLastError",i),this.jGetLastError(f)}xClose(o){return this.log?.("jClose",o),this.jClose(o)}xRead(o,i,t,f,m){const g=this.#r(i,t),b=er(f,m);return this.log?.("jRead",o,t,b),this.jRead(o,g,b)}xWrite(o,i,t,f,m){const g=this.#r(i,t),b=er(f,m);return this.log?.("jWrite",o,g,b),this.jWrite(o,g,b)}xTruncate(o,i,t){const f=er(i,t);return this.log?.("jTruncate",o,f),this.jTruncate(o,f)}xSync(o,i){return this.log?.("jSync",o,i),this.jSync(o,i)}xFileSize(o,i){const t=this.#t("BigInt64",i);return this.log?.("jFileSize",o),this.jFileSize(o,t)}xLock(o,i){return this.log?.("jLock",o,i),this.jLock(o,i)}xUnlock(o,i){return this.log?.("jUnlock",o,i),this.jUnlock(o,i)}xCheckReservedLock(o,i){const t=this.#t("Int32",i);return this.log?.("jCheckReservedLock",o),this.jCheckReservedLock(o,t)}xFileControl(o,i,t){const f=new DataView(this._module.HEAPU8.buffer,this._module.HEAPU8.byteOffset+t);return this.log?.("jFileControl",o,i,f),this.jFileControl(o,i,f)}xSectorSize(o){return this.log?.("jSectorSize",o),this.jSectorSize(o)}xDeviceCharacteristics(o){return this.log?.("jDeviceCharacteristics",o),this.jDeviceCharacteristics(o)}#t(o,i){return new na(this._module,i,o)}#r(o,i){return new ta(this._module,o,i)}#e(o,i){if(i&Vi){let t=o,f=1;const m=[];for(;f;){const g=this._module.HEAPU8[t++];if(g)m.push(g);else switch(this._module.HEAPU8[t]||(f=null),f){case 1:m.push(63),f=2;break;case 2:m.push(61),f=3;break;case 3:m.push(38),f=2;break}}return new TextDecoder().decode(new Uint8Array(m))}return o?this._module.UTF8ToString(o):null}};function er(o,i){return i*4294967296+o+(o<0?2**32:0)}var ta=class{#t;#r=new Uint8Array;get#e(){return this.#r.buffer.byteLength===0&&(this.#r=this.#t.HEAPU8.subarray(this.byteOffset,this.byteOffset+this.byteLength)),this.#r}constructor(o,i,t){this.#t=o,this.byteOffset=i,this.length=this.byteLength=t}get buffer(){return this.#e.buffer}at(o){return this.#e.at(o)}copyWithin(o,i,t){this.#e.copyWithin(o,i,t)}entries(){return this.#e.entries()}every(o){return this.#e.every(o)}fill(o,i,t){this.#e.fill(o,i,t)}filter(o){return this.#e.filter(o)}find(o){return this.#e.find(o)}findIndex(o){return this.#e.findIndex(o)}findLast(o){return this.#e.findLast(o)}findLastIndex(o){return this.#e.findLastIndex(o)}forEach(o){this.#e.forEach(o)}includes(o,i){return this.#e.includes(o,i)}indexOf(o,i){return this.#e.indexOf(o,i)}join(o){return this.#e.join(o)}keys(){return this.#e.keys()}lastIndexOf(o,i){return this.#e.lastIndexOf(o,i)}map(o){return this.#e.map(o)}reduce(o,i){return this.#e.reduce(o,i)}reduceRight(o,i){return this.#e.reduceRight(o,i)}reverse(){this.#e.reverse()}set(o,i){this.#e.set(o,i)}slice(o,i){return this.#e.slice(o,i)}some(o){return this.#e.some(o)}sort(o){this.#e.sort(o)}subarray(o,i){return this.#e.subarray(o,i)}toLocaleString(o,i){return this.#e.toLocaleString(o,i)}toReversed(){return this.#e.toReversed()}toSorted(o){return this.#e.toSorted(o)}toString(){return this.#e.toString()}values(){return this.#e.values()}with(o,i){return this.#e.with(o,i)}[Symbol.iterator](){return this.#e[Symbol.iterator]()}},na=class{#t;#r;#e=new DataView(new ArrayBuffer(0));get#n(){return this.#e.buffer.byteLength===0&&(this.#e=new DataView(this.#t.HEAPU8.buffer,this.#t.HEAPU8.byteOffset+this.byteOffset)),this.#e}constructor(o,i,t){this.#t=o,this.byteOffset=i,this.#r=t}get buffer(){return this.#n.buffer}get byteLength(){return this.#r==="Int32"?4:8}getInt32(o,i){if(this.#r!=="Int32")throw new Error("invalid type");if(!i)throw new Error("must be little endian");return this.#n.getInt32(o,i)}setInt32(o,i,t){if(this.#r!=="Int32")throw new Error("invalid type");if(!t)throw new Error("must be little endian");this.#n.setInt32(o,i,t)}getBigInt64(o,i){if(this.#r!=="BigInt64")throw new Error("invalid type");if(!i)throw new Error("must be little endian");return this.#n.getBigInt64(o,i)}setBigInt64(o,i,t){if(this.#r!=="BigInt64")throw new Error("invalid type");if(!t)throw new Error("must be little endian");this.#n.setBigInt64(o,i,t)}},nt=0x7fffffffffffffffn,it=-0x8000000000000000n,rr=Object.getPrototypeOf(async function(){}).constructor,Re=class extends Error{constructor(o,i){super(o),this.code=i}},xe=!0;function ia(o){const i={};o.retryOps=[];const t=o._getSqliteFree(),f=o._malloc(8),m=[f,f+4],g=new TextEncoder;function b(v){if(typeof v!="string")return 0;const p=g.encode(v),d=o._sqlite3_malloc(p.byteLength+1);return o.HEAPU8.set(p,d),o.HEAPU8[d+p.byteLength]=0,d}function k(v,p){return BigInt(p)<<32n|BigInt(v)&0xffffffffn}const F=(function(){const v=BigInt(Number.MAX_SAFE_INTEGER)>>32n,p=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(d,y){return y>v||y<p?k(d,y):y*4294967296+(d&2147483647)-(d&2147483648)}})(),I=new Set;function D(v){if(!I.has(v))throw new Re("not a database",Xr)}const U=new Map;function z(v){if(!U.has(v))throw new Re("not a statement",Xr)}i.bind_collection=function(v,p){z(v);const d=Array.isArray(p),y=i.bind_parameter_count(v);for(let E=1;E<=y;++E){const L=d?E-1:i.bind_parameter_name(v,E),R=p[L];R!==void 0&&i.bind(v,E,R)}return C},i.bind=function(v,p,d){switch(z(v),typeof d){case"number":return d===(d|0)?i.bind_int(v,p,d):i.bind_double(v,p,d);case"string":return i.bind_text(v,p,d);case"boolean":return i.bind_int(v,p,d?1:0);default:return d instanceof Uint8Array||Array.isArray(d)?i.bind_blob(v,p,d):d===null?i.bind_null(v,p):typeof d=="bigint"?i.bind_int64(v,p,d):d===void 0?xi:(console.warn("unknown binding converted to null",d),i.bind_null(v,p))}},i.bind_blob=(function(){const v="sqlite3_bind_blob",p=o.cwrap(v,...P("nnnnn:n"));return function(d,y,E){z(d);const L=E.byteLength??E.length,R=o._sqlite3_malloc(L);o.HEAPU8.subarray(R).set(E);const Q=p(d,y,R,L,t);return $(v,Q,U.get(d))}})(),i.bind_parameter_count=(function(){const p=o.cwrap("sqlite3_bind_parameter_count",...P("n:n"));return function(d){return z(d),p(d)}})(),i.bind_double=(function(){const v="sqlite3_bind_double",p=o.cwrap(v,...P("nnn:n"));return function(d,y,E){z(d);const L=p(d,y,E);return $(v,L,U.get(d))}})(),i.bind_int=(function(){const v="sqlite3_bind_int",p=o.cwrap(v,...P("nnn:n"));return function(d,y,E){if(z(d),E>2147483647||E<-2147483648)return Ze;const L=p(d,y,E);return $(v,L,U.get(d))}})(),i.bind_int64=(function(){const v="sqlite3_bind_int64",p=o.cwrap(v,...P("nnnn:n"));return function(d,y,E){if(z(d),E>nt||E<it)return Ze;const L=E&0xffffffffn,R=E>>32n,Q=p(d,y,Number(L),Number(R));return $(v,Q,U.get(d))}})(),i.bind_null=(function(){const v="sqlite3_bind_null",p=o.cwrap(v,...P("nn:n"));return function(d,y){z(d);const E=p(d,y);return $(v,E,U.get(d))}})(),i.bind_parameter_name=(function(){const p=o.cwrap("sqlite3_bind_parameter_name",...P("n:s"));return function(d,y){return z(d),p(d,y)}})(),i.bind_text=(function(){const v="sqlite3_bind_text",p=o.cwrap(v,...P("nnnnn:n"));return function(d,y,E){z(d);const L=b(E),R=p(d,y,L,-1,t);return $(v,R,U.get(d))}})(),i.changes=(function(){const p=o.cwrap("sqlite3_changes",...P("n:n"));return function(d){return D(d),p(d)}})(),i.clear_bindings=(function(){const v="sqlite3_clear_bindings",p=o.cwrap(v,...P("n:n"));return function(d){z(d);const y=p(d);return $(v,y,U.get(d))}})(),i.close=(function(){const v="sqlite3_close",p=o.cwrap(v,...P("n:n"),{async:xe});return async function(d){D(d);const y=await p(d);return I.delete(d),$(v,y,d)}})(),i.column=function(v,p){z(v);const d=i.column_type(v,p);switch(d){case rt:return i.column_blob(v,p);case Zr:return i.column_double(v,p);case Jr:const y=i.column_int(v,p),E=o.getTempRet0();return F(y,E);case tt:return null;case et:return i.column_text(v,p);default:throw new Re("unknown type",d)}},i.column_blob=(function(){const p=o.cwrap("sqlite3_column_blob",...P("nn:n"));return function(d,y){z(d);const E=i.column_bytes(d,y),L=p(d,y);return o.HEAPU8.subarray(L,L+E)}})(),i.column_bytes=(function(){const p=o.cwrap("sqlite3_column_bytes",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),i.column_count=(function(){const p=o.cwrap("sqlite3_column_count",...P("n:n"));return function(d){return z(d),p(d)}})(),i.column_double=(function(){const p=o.cwrap("sqlite3_column_double",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),i.column_int=(function(){const p=o.cwrap("sqlite3_column_int64",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),i.column_int64=(function(){const p=o.cwrap("sqlite3_column_int64",...P("nn:n"));return function(d,y){z(d);const E=p(d,y),L=o.getTempRet0();return k(E,L)}})(),i.column_name=(function(){const p=o.cwrap("sqlite3_column_name",...P("nn:s"));return function(d,y){return z(d),p(d,y)}})(),i.column_names=function(v){const p=[],d=i.column_count(v);for(let y=0;y<d;++y)p.push(i.column_name(v,y));return p},i.column_text=(function(){const p=o.cwrap("sqlite3_column_text",...P("nn:s"));return function(d,y){return z(d),p(d,y)}})(),i.column_type=(function(){const p=o.cwrap("sqlite3_column_type",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),i.create_function=function(v,p,d,y,E,L,R,Q){D(v);function Y(q){return q instanceof rr?(async(W,ne,re)=>q(W,o.HEAP32.subarray(re/4,re/4+ne))):((W,ne,re)=>q(W,o.HEAP32.subarray(re/4,re/4+ne)))}const J=o.create_function(v,p,d,y,E,L&&Y(L),R&&Y(R),Q);return $("sqlite3_create_function",J,v)},i.data_count=(function(){const p=o.cwrap("sqlite3_data_count",...P("n:n"));return function(d){return z(d),p(d)}})(),i.exec=async function(v,p,d){for await(const y of i.statements(v,p)){let E;for(;await i.step(y)===nr;)if(d){E=E??i.column_names(y);const L=i.row(y);await d(L,E)}}return C},i.finalize=(function(){const p=o.cwrap("sqlite3_finalize",...P("n:n"),{async:xe});return async function(d){const y=await p(d);return U.delete(d),y}})(),i.get_autocommit=(function(){const p=o.cwrap("sqlite3_get_autocommit",...P("n:n"));return function(d){return p(d)}})(),i.libversion=(function(){const p=o.cwrap("sqlite3_libversion",...P(":s"));return function(){return p()}})(),i.libversion_number=(function(){const p=o.cwrap("sqlite3_libversion_number",...P(":n"));return function(){return p()}})(),i.limit=(function(){const p=o.cwrap("sqlite3_limit",...P("nnn:n"));return function(d,y,E){return p(d,y,E)}})(),i.open_v2=(function(){const v="sqlite3_open_v2",p=o.cwrap(v,...P("snnn:n"),{async:xe});return async function(d,y,E){y=y||Me|lr,E=b(E);try{const L=await ie(()=>p(d,m[0],y,E)),R=o.getValue(m[0],"*");return I.add(R),o.ccall("RegisterExtensionFunctions","void",["number"],[R]),$(v,L),R}finally{o._sqlite3_free(E)}}})(),i.progress_handler=function(v,p,d,y){D(v),o.progress_handler(v,p,d,y)},i.reset=(function(){const v="sqlite3_reset",p=o.cwrap(v,...P("n:n"),{async:xe});return async function(d){z(d);const y=await p(d);return $(v,y,U.get(d))}})(),i.result=function(v,p){switch(typeof p){case"number":p===(p|0)?i.result_int(v,p):i.result_double(v,p);break;case"string":i.result_text(v,p);break;default:if(p instanceof Uint8Array||Array.isArray(p))i.result_blob(v,p);else if(p===null)i.result_null(v);else{if(typeof p=="bigint")return i.result_int64(v,p);console.warn("unknown result converted to null",p),i.result_null(v)}break}},i.result_blob=(function(){const p=o.cwrap("sqlite3_result_blob",...P("nnnn:n"));return function(d,y){const E=y.byteLength??y.length,L=o._sqlite3_malloc(E);o.HEAPU8.subarray(L).set(y),p(d,L,E,t)}})(),i.result_double=(function(){const p=o.cwrap("sqlite3_result_double",...P("nn:n"));return function(d,y){p(d,y)}})(),i.result_int=(function(){const p=o.cwrap("sqlite3_result_int",...P("nn:n"));return function(d,y){p(d,y)}})(),i.result_int64=(function(){const p=o.cwrap("sqlite3_result_int64",...P("nnn:n"));return function(d,y){if(y>nt||y<it)return Ze;const E=y&0xffffffffn,L=y>>32n;p(d,Number(E),Number(L))}})(),i.result_null=(function(){const p=o.cwrap("sqlite3_result_null",...P("n:n"));return function(d){p(d)}})(),i.result_text=(function(){const p=o.cwrap("sqlite3_result_text",...P("nnnn:n"));return function(d,y){const E=b(y);p(d,E,-1,t)}})(),i.row=function(v){const p=[],d=i.data_count(v);for(let y=0;y<d;++y){const E=i.column(v,y);p.push(E?.buffer===o.HEAPU8.buffer?E.slice():E)}return p},i.set_authorizer=function(v,p,d){D(v);function y(R,Q,Y,J,q,W){return[R,Q,o.UTF8ToString(Y),o.UTF8ToString(J),o.UTF8ToString(q),o.UTF8ToString(W)]}function E(R){return R instanceof rr?(async(Q,Y,J,q,W,ne)=>R(...y(Q,Y,J,q,W,ne))):((Q,Y,J,q,W,ne)=>R(...y(Q,Y,J,q,W,ne)))}const L=o.set_authorizer(v,E(p),d);return $("sqlite3_set_authorizer",L,v)},i.sql=(function(){const p=o.cwrap("sqlite3_sql",...P("n:s"));return function(d){return z(d),p(d)}})(),i.statements=function(v,p,d={}){const y=o.cwrap("sqlite3_prepare_v3","number",["number","number","number","number","number","number"],{async:!0});return(async function*(){const E=[];try{let R=function(){re&&!d.unscoped&&i.finalize(re),re=0};var L=R;const Q=g.encode(p),Y=Q.byteLength-Q.byteLength%4+12,J=o._sqlite3_malloc(Y),q=J+Q.byteLength+1;E.push(()=>o._sqlite3_free(J)),o.HEAPU8.set(Q,J),o.HEAPU8[q-1]=0;const W=J+Y-8,ne=J+Y-4;let re;E.push(R),o.setValue(ne,J,"*");do{R();const De=o.getValue(ne,"*"),Le=await ie(()=>y(v,De,q-ne,d.flags||0,W,ne));Le!==C&&$("sqlite3_prepare_v3",Le,v),re=o.getValue(W,"*"),re&&(U.set(re,v),yield re)}while(re)}finally{for(;E.length;)E.pop()()}})()},i.step=(function(){const v="sqlite3_step",p=o.cwrap(v,...P("n:n"),{async:xe});return async function(d){z(d);const y=await ie(()=>p(d));return $(v,y,U.get(d),[nr,Di])}})(),i.commit_hook=function(v,p){D(v),o.commit_hook(v,p)},i.update_hook=function(v,p){D(v);function d(E,L,R,Q,Y){return[E,o.UTF8ToString(L),o.UTF8ToString(R),k(Q,Y)]}function y(E){return E instanceof rr?(async(L,R,Q,Y,J)=>E(...d(L,R,Q,Y,J))):((L,R,Q,Y,J)=>E(...d(L,R,Q,Y,J)))}o.update_hook(v,y(p))},i.value=function(v){const p=i.value_type(v);switch(p){case rt:return i.value_blob(v);case Zr:return i.value_double(v);case Jr:const d=i.value_int(v),y=o.getTempRet0();return F(d,y);case tt:return null;case et:return i.value_text(v);default:throw new Re("unknown type",p)}},i.value_blob=(function(){const p=o.cwrap("sqlite3_value_blob",...P("n:n"));return function(d){const y=i.value_bytes(d),E=p(d);return o.HEAPU8.subarray(E,E+y)}})(),i.value_bytes=(function(){const p=o.cwrap("sqlite3_value_bytes",...P("n:n"));return function(d){return p(d)}})(),i.value_double=(function(){const p=o.cwrap("sqlite3_value_double",...P("n:n"));return function(d){return p(d)}})(),i.value_int=(function(){const p=o.cwrap("sqlite3_value_int64",...P("n:n"));return function(d){return p(d)}})(),i.value_int64=(function(){const p=o.cwrap("sqlite3_value_int64",...P("n:n"));return function(d){const y=p(d),E=o.getTempRet0();return k(y,E)}})(),i.value_text=(function(){const p=o.cwrap("sqlite3_value_text",...P("n:s"));return function(d){return p(d)}})(),i.value_type=(function(){const p=o.cwrap("sqlite3_value_type",...P("n:n"));return function(d){return p(d)}})(),i.vfs_register=function(v,p){const d=o.vfs_register(v,p);return $("sqlite3_vfs_register",d)};function $(v,p,d=null,y=[C]){if(y.includes(p))return p;const E=d?o.ccall("sqlite3_errmsg","string",["number"],[d]):v;throw new Re(E,p)}async function ie(v){let p;do o.retryOps.length&&(await Promise.all(o.retryOps),o.retryOps=[]),p=await v();while(p&&o.retryOps.length);return p}return i}function P(o){const i=[],t=o.match(/([ns@]*):([nsv@])/);switch(t[2]){case"n":i.push("number");break;case"s":i.push("string");break;case"v":i.push(null);break}const f=[];for(let m of t[1])switch(m){case"n":f.push("number");break;case"s":f.push("string");break}return i.push(f),i}async function le(o){if(await o!==C)throw new Error(`Error code: ${await o}`)}function ir(){return new DataView(new ArrayBuffer(4))}async function ht(o,i,t){let f;return o.releaser instanceof FileSystemDirectoryHandle?[f]=await o.getPathComponents(i,t):f=await navigator.storage.getDirectory(),await f.getFileHandle(i,{create:t})}function pt(o){return"releaser"in o}function aa(o,i,t){const f=[];let m,g;new Promise((I,D)=>{m=I,g=D}).finally(async()=>{for(;f.length;)await f.pop()()});const b=Math.floor(Math.random()*4294967296);let k=0,F=0;return new ReadableStream({async start(I){try{const D=ve|ut;await le(o.jOpen(i,b,D,ir())),f.push(()=>o.jClose(b)),await le(o.jLock(b,qe)),f.push(()=>o.jUnlock(b,ye));const U=new DataView(new ArrayBuffer(8));await le(o.jFileSize(b,U)),F=Number(U.getBigUint64(0,!0))}catch(D){I.error(D),g(D)}},async pull(I){if(F===0){I.close(),m();return}try{const D=Math.min(F,65536),U=new Uint8Array(D);await le(o.jRead(b,U,k)),I.enqueue(U),k+=D,F-=D,F===0&&(I.close(),m())}catch(D){I.error(D),g(D)}},cancel(I){g(new Error(I))}})}async function sa(o,i){const t=aa(o,i),f=[],m=t.getReader();let g=0;try{for(;;){const{done:F,value:I}=await m.read();if(F)break;f.push(I),g+=I.length}}finally{m.releaseLock()}const b=new Uint8Array(g);let k=0;for(const F of f)b.set(F,k),k+=F.length;return b}async function oa(o,i){return await ht(o,i).then(t=>t.getFile()).then(t=>t.arrayBuffer()).then(t=>new Uint8Array(t))}async function la(o,i){return pt(o)?await oa(o,i):await sa(o,i)}var at=new Uint8Array([83,81,76,105,116,101,32,102,111,114,109,97,116,32,51,0]);async function mt(o){const i=await ar(o,32);for(let t=0;t<at.length;t++)if(i[t]!==at[t])throw new Error("Not a SQLite database file");return i}async function ar(o,i){const t=new Uint8Array(i);let f=0;if(o.leftover){const m=Math.min(i,o.leftover.length);t.set(o.leftover.subarray(0,m),0),f+=m,m<o.leftover.length?o.leftover=o.leftover.subarray(m):o.leftover=null}for(;f<i;){const{done:m,value:g}=await o.read();if(m){if(f<i)throw new Error(`Unexpected EOF: Expected ${i}, got ${f}`);break}const b=Math.min(i-f,g.length);t.set(g.subarray(0,b),f),f+=b,b<g.length&&(o.leftover=g.subarray(b))}return t}async function*ca(o){const i=o.getReader();try{const t=await mt(i),f=new DataView(t.buffer),m=f.getUint16(16),g=m===1?65536:m,b=f.getUint32(28),k=await ar(i,g-32),F=new Uint8Array(g);F.set(t),F.set(k,32),yield F;for(let D=1;D<b;D++)yield await ar(i,g);const{done:I}=await i.read();if(!I)throw new Error("Unexpected data after last page")}finally{i.releaseLock()}}async function ua(o,i,t){const f=[];try{const g=ve|Me|lr;await le(o.jOpen(i,1234,g,ir())),f.push(()=>o.jClose(1234)),await le(o.jLock(1234,qe)),f.push(()=>o.jUnlock(1234,ye)),await le(o.jLock(1234,Ue)),f.push(()=>o.jUnlock(1234,qe)),await le(o.jLock(1234,ze));const b=ir();await o.jFileControl(1234,_t,b),await le(o.jTruncate(1234,0));let k=0;for await(const F of ca(t))await le(o.jWrite(1234,F,k)),k+=F.byteLength;await o.jFileControl(1234,dt,b),await o.jFileControl(1234,ft,b),await o.jSync(1234,Xi)}finally{for(;f.length;)await f.pop()()}}async function fa(o,i,t){const f=await ht(o,i,!0),[m,g]=t.tee(),b=m.getReader();try{await mt(b)}finally{b.releaseLock()}const k=await f.createWritable();await g.pipeTo(k)}async function vt(o,i,t){const f=t instanceof globalThis.File?t.stream():t;pt(o)?await fa(o,i,f):await ua(o,i,f)}function Ta(o,i){return{...i,beforeOpen:(t,f)=>vt(t,f,o)}}async function _a(o){await o.sqlite.close(o.pointer)}function da(o){return o.sqliteModule._sqlite3_changes(o.pointer)}function ha(o){return o.sqliteModule._sqlite3_last_insert_rowid(o.pointer)}async function yt(o,i,t,f){const{sqlite:m,pointer:g}=o;for await(const b of m.statements(g,t)){f&&m.bind_collection(b,f);const k=m.column_names(b);for(;await m.step(b)===nr;){const F=m.row(b);i(Object.fromEntries(k.map((I,D)=>[I,F[D]])))}}}async function pa(o,i,t){const f=[];return await yt(o,m=>f.push(m),i,t),f}function ma(o){return o?ut:lr|Me}async function Fa(o){const i=await va(o);return{...i,changes:()=>da(i),close:()=>_a(i),dump:()=>la(i.vfs,i.path),lastInsertRowId:()=>ha(i),run:(...t)=>pa(i,...t),stream:(...t)=>yt(i,...t),sync:t=>vt(i.vfs,i.path,t)}}async function va(o){const{path:i,sqliteModule:t,vfsFn:f,vfsOptions:m,readonly:g,beforeOpen:b}=await o,k=ia(t),F=await f(i,t,m);k.vfs_register(F,!0),await b?.(F,i);const I=await k.open_v2(i,ma(g));return{db:I,path:i,pointer:I,sqlite:k,sqliteModule:t,vfs:F}}var Ne={mode:"shared"},ya={ifAvailable:!0,mode:"shared"},st={ifAvailable:!0,mode:"exclusive"},wa=["exclusive","shared","shared+hint"],Be=o=>class extends o{#t={lockPolicy:"exclusive",lockTimeout:1/0};#r=new Map;constructor(i,t,f){if(super(i,t,f),Object.assign(this.#t,f),wa.indexOf(this.#t.lockPolicy)===-1)throw new Error(`WebLocksMixin: invalid lock mode: ${f.lockPolicy}`)}async jLock(i,t){try{const f=this.#e(i);if(t<=f.type)return C;switch(this.#t.lockPolicy){case"exclusive":return await this.#n(f,t);case"shared":case"shared+hint":return await this.#o(f,t)}}catch(f){return console.error("WebLocksMixin: lock error",f),zi}}async jUnlock(i,t){try{const f=this.#e(i);if(!(t<f.type))return C;switch(this.#t.lockPolicy){case"exclusive":return await this.#a(f,t);case"shared":case"shared+hint":return await this.#l(f,t)}}catch(f){return console.error("WebLocksMixin: unlock error",f),Hi}}async jCheckReservedLock(i,t){try{const f=this.#e(i);switch(this.#t.lockPolicy){case"exclusive":return this.#s(f,t);case"shared":case"shared+hint":return await this.#c(f,t)}}catch(f){return console.error("WebLocksMixin: check reserved lock error",f),Oi}return t.setInt32(0,0,!0),C}jFileControl(i,t,f){if(t===Be.WRITE_HINT_OP_CODE&&this.#t.lockPolicy==="shared+hint"){const m=this.#e(i);m.writeHint=!0}return sr}#e(i){let t=this.#r.get(i);return t||(t={baseName:this.getFilename(i),type:ye,writeHint:!1},this.#r.set(i,t)),t}async#n(i,t){if(!i.access){if(!await this.#i(i,"access"))return fe;console.assert(!!i.access)}return i.type=t,C}#a(i,t){return t===ye&&(i.access?.(),console.assert(!i.access)),i.type=t,C}#s(i,t){return t.setInt32(0,0,!0),C}async#o(i,t){switch(i.type){case ye:switch(t){case qe:if(i.writeHint&&!await this.#i(i,"hint"))return fe;if(!await this.#i(i,"gate",Ne))return i.hint?.(),fe;await this.#i(i,"access",Ne),i.gate(),console.assert(!i.gate),console.assert(!!i.access),console.assert(!i.reserved);break;default:throw new Error("unsupported lock transition")}break;case qe:switch(t){case Ue:if(this.#t.lockPolicy==="shared+hint"&&!i.hint&&!await this.#i(i,"hint",st))return fe;if(!await this.#i(i,"reserved",st))return i.hint?.(),fe;i.access(),console.assert(!i.gate),console.assert(!i.access),console.assert(!!i.reserved);break;case ze:if(!await this.#i(i,"gate"))return fe;if(i.access(),!await this.#i(i,"access"))return i.gate(),fe;console.assert(!!i.gate),console.assert(!!i.access),console.assert(!i.reserved);break;default:throw new Error("unsupported lock transition")}break;case Ue:switch(t){case ze:if(!await this.#i(i,"gate"))return fe;if(!await this.#i(i,"access"))return i.gate(),fe;console.assert(!!i.gate),console.assert(!!i.access),console.assert(!!i.reserved);break;default:throw new Error("unsupported lock transition")}break}return i.type=t,C}async#l(i,t){if(t===ye)i.access?.(),i.gate?.(),i.reserved?.(),i.hint?.(),i.writeHint=!1,console.assert(!i.access),console.assert(!i.gate),console.assert(!i.reserved),console.assert(!i.hint);else switch(i.type){case ze:i.access(),await this.#i(i,"access",Ne),i.gate(),i.reserved?.(),i.hint?.(),console.assert(!!i.access),console.assert(!i.gate),console.assert(!i.reserved);break;case Ue:await this.#i(i,"access",Ne),i.reserved(),i.hint?.(),console.assert(!!i.access),console.assert(!i.gate),console.assert(!i.reserved);break}return i.type=t,C}async#c(i,t){return await this.#i(i,"reserved",ya)?(i.reserved(),t.setInt32(0,0,!0)):t.setInt32(0,1,!0),C}#i(i,t,f={}){return console.assert(!i[t]),new Promise(m=>{if(!f.ifAvailable&&this.#t.lockTimeout<1/0){const b=new AbortController;f=Object.assign({},f,{signal:b.signal}),setTimeout(()=>{b.abort(),m?.(!1)},this.#t.lockTimeout)}const g=`lock##${i.baseName}##${t}`;navigator.locks.request(g,f,b=>{if(b)return new Promise(k=>{i[t]=()=>{k(),i[t]=null},m(!0),m=null});i[t]=null,m(!1),m=null}).catch(b=>{if(b.name!=="AbortError")throw b})})}};Be.WRITE_HINT_OP_CODE=-9999;var ga=(async function(o={}){var i,t=o,f,m,g=new Promise((e,r)=>{f=e,m=r}),b=typeof window=="object",k=typeof WorkerGlobalScope<"u";typeof process=="object"&&process.versions?.node&&process.type!="renderer";var F="./this.program",I=(e,r)=>{throw r},D=import.meta.url,U="";function z(e){return t.locateFile?t.locateFile(e,U):U+e}var $,ie;if(b||k){try{U=new URL(".",D).href}catch{}k&&(ie=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),$=async e=>{var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)}}var v=console.log.bind(console),p=console.error.bind(console),d,y,E=!1,L,R,Q,Y,J,q,W,ne,re;function De(){var e=y.buffer;R=new Int8Array(e),Y=new Int16Array(e),t.HEAPU8=Q=new Uint8Array(e),J=new Uint16Array(e),t.HEAP32=q=new Int32Array(e),W=new Uint32Array(e),ne=new Float32Array(e),re=new Float64Array(e)}function Le(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Rt(t.preRun.shift());fr(dr)}function bt(){!t.noFSInit&&!s.initialized&&s.init(),c.qa(),s.ignorePermissions=!1}function Et(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Ct(t.postRun.shift());fr(_r)}var de=0,Se=null;function cr(e){de++,t.monitorRunDependencies?.(de)}function He(e){if(de--,t.monitorRunDependencies?.(de),de==0&&Se){var r=Se;Se=null,r()}}function ce(e){t.onAbort?.(e),e="Aborted("+e+")",p(e),E=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw m(r),r}var We;function kt(){return t.locateFile?z("wa-sqlite-async.wasm"):new URL("/gioibon/libs/wa-sqlite/wa-sqlite-async.wasm",import.meta.url).href}function qt(e){if(e==We&&d)return new Uint8Array(d);if(ie)return ie(e);throw"both async and sync fetching of the wasm failed"}async function St(e){if(!d)try{var r=await $(e);return new Uint8Array(r)}catch{}return qt(e)}async function At(e,r){try{var n=await St(e),a=await WebAssembly.instantiate(n,r);return a}catch(l){p(`failed to asynchronously prepare wasm: ${l}`),ce(l)}}async function Tt(e,r,n){if(!e&&typeof WebAssembly.instantiateStreaming=="function")try{var a=fetch(r,{credentials:"same-origin"}),l=await WebAssembly.instantiateStreaming(a,n);return l}catch(u){p(`wasm streaming compile failed: ${u}`),p("falling back to ArrayBuffer instantiation")}return At(r,n)}function Ft(){return{a:mi}}async function It(){function e(u,_){return c=u.exports,c=A.instrumentWasmExports(c),y=c.pa,De(),be=c.jf,He(),c}cr();function r(u){return e(u.instance)}var n=Ft();if(t.instantiateWasm)return new Promise((u,_)=>{t.instantiateWasm(n,(h,w)=>{u(e(h))})});We??=kt();try{var a=await Tt(d,We,n),l=r(a);return l}catch(u){return m(u),Promise.reject(u)}}var x,X;class ur{name="ExitStatus";constructor(r){this.message=`Program terminated with exit(${r})`,this.status=r}}var fr=e=>{for(;e.length>0;)e.shift()(t)},_r=[],Ct=e=>_r.push(e),dr=[],Rt=e=>dr.push(e);function hr(e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":return R[e];case"i8":return R[e];case"i16":return Y[e>>1];case"i32":return q[e>>2];case"i64":ce("to do getValue(i64) use WASM_BIGINT");case"float":return ne[e>>2];case"double":return re[e>>3];case"*":return W[e>>2];default:ce(`invalid type for getValue: ${r}`)}}var Ve=!0;function we(e,r,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":R[e]=r;break;case"i8":R[e]=r;break;case"i16":Y[e>>1]=r;break;case"i32":q[e>>2]=r;break;case"i64":ce("to do setValue(i64) use WASM_BIGINT");case"float":ne[e>>2]=r;break;case"double":re[e>>3]=r;break;case"*":W[e>>2]=r;break;default:ce(`invalid type for setValue: ${n}`)}}var xt=e=>ki(e),Dt=()=>Si(),pr=new TextDecoder,he=(e,r)=>{if(!e)return"";for(var n=e+r,a=e;!(a>=n)&&Q[a];)++a;return pr.decode(Q.subarray(e,a))},Lt=(e,r,n,a)=>ce(`Assertion failed: ${he(e)}, at: `+[r?he(r):"unknown filename",n,a?he(a):"unknown function"]),K={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var n=0,a=e.length-1;a>=0;a--){var l=e[a];l==="."?e.splice(a,1):l===".."?(e.splice(a,1),n++):n&&(e.splice(a,1),n--)}if(r)for(;n;n--)e.unshift("..");return e},normalize:e=>{var r=K.isAbs(e),n=e.slice(-1)==="/";return e=K.normalizeArray(e.split("/").filter(a=>!!a),!r).join("/"),!e&&!r&&(e="."),e&&n&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=K.splitPath(e),n=r[0],a=r[1];return!n&&!a?".":(a&&(a=a.slice(0,-1)),n+a)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>K.normalize(e.join("/")),join2:(e,r)=>K.normalize(e+"/"+r)},Ot=()=>e=>crypto.getRandomValues(e),mr=e=>{(mr=Ot())(e)},ge={resolve:(...e)=>{for(var r="",n=!1,a=e.length-1;a>=-1&&!n;a--){var l=a>=0?e[a]:s.cwd();if(typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";r=l+"/"+r,n=K.isAbs(l)}return r=K.normalizeArray(r.split("/").filter(u=>!!u),!n).join("/"),(n?"/":"")+r||"."},relative:(e,r)=>{e=ge.resolve(e).slice(1),r=ge.resolve(r).slice(1);function n(S){for(var O=0;O<S.length&&S[O]==="";O++);for(var H=S.length-1;H>=0&&S[H]==="";H--);return O>H?[]:S.slice(O,H-O+1)}for(var a=n(e.split("/")),l=n(r.split("/")),u=Math.min(a.length,l.length),_=u,h=0;h<u;h++)if(a[h]!==l[h]){_=h;break}for(var w=[],h=_;h<a.length;h++)w.push("..");return w=w.concat(l.slice(_)),w.join("/")}},Ae=(e,r=0,n=NaN)=>{for(var a=r+n,l=r;e[l]&&!(l>=a);)++l;return pr.decode(e.buffer?e.subarray(r,l):new Uint8Array(e.slice(r,l)))},Qe=[],pe=e=>{for(var r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a<=127?r++:a<=2047?r+=2:a>=55296&&a<=57343?(r+=4,++n):r+=3}return r},$e=(e,r,n,a)=>{if(!(a>0))return 0;for(var l=n,u=n+a-1,_=0;_<e.length;++_){var h=e.charCodeAt(_);if(h>=55296&&h<=57343){var w=e.charCodeAt(++_);h=65536+((h&1023)<<10)|w&1023}if(h<=127){if(n>=u)break;r[n++]=h}else if(h<=2047){if(n+1>=u)break;r[n++]=192|h>>6,r[n++]=128|h&63}else if(h<=65535){if(n+2>=u)break;r[n++]=224|h>>12,r[n++]=128|h>>6&63,r[n++]=128|h&63}else{if(n+3>=u)break;r[n++]=240|h>>18,r[n++]=128|h>>12&63,r[n++]=128|h>>6&63,r[n++]=128|h&63}}return r[n]=0,n-l},Ke=(e,r,n)=>{var a=n>0?n:pe(e)+1,l=new Array(a),u=$e(e,l,0,l.length);return r&&(l.length=u),l},jt=()=>{if(!Qe.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;Qe=Ke(e,!0)}return Qe.shift()},me={ttys:[],init(){},shutdown(){},register(e,r){me.ttys[e]={input:[],output:[],ops:r},s.registerDevice(e,me.stream_ops)},stream_ops:{open(e){var r=me.ttys[e.node.rdev];if(!r)throw new s.ErrnoError(43);e.tty=r,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,r,n,a,l){if(!e.tty||!e.tty.ops.get_char)throw new s.ErrnoError(60);for(var u=0,_=0;_<a;_++){var h;try{h=e.tty.ops.get_char(e.tty)}catch{throw new s.ErrnoError(29)}if(h===void 0&&u===0)throw new s.ErrnoError(6);if(h==null)break;u++,r[n+_]=h}return u&&(e.node.atime=Date.now()),u},write(e,r,n,a,l){if(!e.tty||!e.tty.ops.put_char)throw new s.ErrnoError(60);try{for(var u=0;u<a;u++)e.tty.ops.put_char(e.tty,r[n+u])}catch{throw new s.ErrnoError(29)}return a&&(e.node.mtime=e.node.ctime=Date.now()),u}},default_tty_ops:{get_char(e){return jt()},put_char(e,r){r===null||r===10?(v(Ae(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output?.length>0&&(v(Ae(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,r,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,r){r===null||r===10?(p(Ae(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output?.length>0&&(p(Ae(e.output)),e.output=[])}}},Pt=(e,r)=>Q.fill(0,e,e+r),vr=(e,r)=>Math.ceil(e/r)*r,yr=e=>{e=vr(e,65536);var r=gi(65536,e);return r&&Pt(r,e),r},j={ops_table:null,mount(e){return j.createNode(null,"/",16895,0)},createNode(e,r,n,a){if(s.isBlkdev(n)||s.isFIFO(n))throw new s.ErrnoError(63);j.ops_table||={dir:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr,lookup:j.node_ops.lookup,mknod:j.node_ops.mknod,rename:j.node_ops.rename,unlink:j.node_ops.unlink,rmdir:j.node_ops.rmdir,readdir:j.node_ops.readdir,symlink:j.node_ops.symlink},stream:{llseek:j.stream_ops.llseek}},file:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr},stream:{llseek:j.stream_ops.llseek,read:j.stream_ops.read,write:j.stream_ops.write,mmap:j.stream_ops.mmap,msync:j.stream_ops.msync}},link:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr,readlink:j.node_ops.readlink},stream:{}},chrdev:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr},stream:s.chrdev_stream_ops}};var l=s.createNode(e,r,n,a);return s.isDir(l.mode)?(l.node_ops=j.ops_table.dir.node,l.stream_ops=j.ops_table.dir.stream,l.contents={}):s.isFile(l.mode)?(l.node_ops=j.ops_table.file.node,l.stream_ops=j.ops_table.file.stream,l.usedBytes=0,l.contents=null):s.isLink(l.mode)?(l.node_ops=j.ops_table.link.node,l.stream_ops=j.ops_table.link.stream):s.isChrdev(l.mode)&&(l.node_ops=j.ops_table.chrdev.node,l.stream_ops=j.ops_table.chrdev.stream),l.atime=l.mtime=l.ctime=Date.now(),e&&(e.contents[r]=l,e.atime=e.mtime=e.ctime=l.atime),l},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,r){var n=e.contents?e.contents.length:0;if(!(n>=r)){var a=1024*1024;r=Math.max(r,n*(n<a?2:1.125)>>>0),n!=0&&(r=Math.max(r,256));var l=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(l.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(r),n&&e.contents.set(n.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=s.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,s.isDir(e.mode)?r.size=4096:s.isFile(e.mode)?r.size=e.usedBytes:s.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.atime),r.mtime=new Date(e.mtime),r.ctime=new Date(e.ctime),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){for(const n of["mode","atime","mtime","ctime"])r[n]!=null&&(e[n]=r[n]);r.size!==void 0&&j.resizeFileStorage(e,r.size)},lookup(e,r){throw j.doesNotExistError},mknod(e,r,n,a){return j.createNode(e,r,n,a)},rename(e,r,n){var a;try{a=s.lookupNode(r,n)}catch{}if(a){if(s.isDir(e.mode))for(var l in a.contents)throw new s.ErrnoError(55);s.hashRemoveNode(a)}delete e.parent.contents[e.name],r.contents[n]=e,e.name=n,r.ctime=r.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,r){delete e.contents[r],e.ctime=e.mtime=Date.now()},rmdir(e,r){var n=s.lookupNode(e,r);for(var a in n.contents)throw new s.ErrnoError(55);delete e.contents[r],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,r,n){var a=j.createNode(e,r,41471,0);return a.link=n,a},readlink(e){if(!s.isLink(e.mode))throw new s.ErrnoError(28);return e.link}},stream_ops:{read(e,r,n,a,l){var u=e.node.contents;if(l>=e.node.usedBytes)return 0;var _=Math.min(e.node.usedBytes-l,a);if(_>8&&u.subarray)r.set(u.subarray(l,l+_),n);else for(var h=0;h<_;h++)r[n+h]=u[l+h];return _},write(e,r,n,a,l,u){if(r.buffer===R.buffer&&(u=!1),!a)return 0;var _=e.node;if(_.mtime=_.ctime=Date.now(),r.subarray&&(!_.contents||_.contents.subarray)){if(u)return _.contents=r.subarray(n,n+a),_.usedBytes=a,a;if(_.usedBytes===0&&l===0)return _.contents=r.slice(n,n+a),_.usedBytes=a,a;if(l+a<=_.usedBytes)return _.contents.set(r.subarray(n,n+a),l),a}if(j.expandFileStorage(_,l+a),_.contents.subarray&&r.subarray)_.contents.set(r.subarray(n,n+a),l);else for(var h=0;h<a;h++)_.contents[l+h]=r[n+h];return _.usedBytes=Math.max(_.usedBytes,l+a),a},llseek(e,r,n){var a=r;if(n===1?a+=e.position:n===2&&s.isFile(e.node.mode)&&(a+=e.node.usedBytes),a<0)throw new s.ErrnoError(28);return a},mmap(e,r,n,a,l){if(!s.isFile(e.node.mode))throw new s.ErrnoError(43);var u,_,h=e.node.contents;if(!(l&2)&&h&&h.buffer===R.buffer)_=!1,u=h.byteOffset;else{if(_=!0,u=yr(r),!u)throw new s.ErrnoError(48);h&&((n>0||n+r<h.length)&&(h.subarray?h=h.subarray(n,n+r):h=Array.prototype.slice.call(h,n,n+r)),R.set(h,u))}return{ptr:u,allocated:_}},msync(e,r,n,a,l){return j.stream_ops.write(e,r,0,a,n,!1),0}}},wr=async e=>{var r=await $(e);return new Uint8Array(r)};wr.isAsync=!0;var Nt=(...e)=>s.createDataFile(...e),gr=[],Ut=(e,r,n,a)=>{typeof Browser<"u"&&Browser.init();var l=!1;return gr.forEach(u=>{l||u.canHandle(r)&&(u.handle(e,r,n,a),l=!0)}),l},zt=(e,r,n,a,l,u,_,h,w,S)=>{var O=r?ge.resolve(K.join2(e,r)):e;function H(B){function T(N){S?.(),h||Nt(e,r,N,a,l,w),u?.(),He()}Ut(B,O,T,()=>{_?.(),He()})||T(B)}cr(),typeof n=="string"?wr(n).then(H,_):H(n)},Bt=e=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=r[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},Ge=(e,r)=>{var n=0;return e&&(n|=365),r&&(n|=146),n},s={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,r,n,a){e||(e=this),this.parent=e,this.mount=e.mount,this.id=s.nextInode++,this.name=r,this.mode=n,this.rdev=a,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return s.isDir(this.mode)}get isDevice(){return s.isChrdev(this.mode)}},lookupPath(e,r={}){if(!e)throw new s.ErrnoError(44);r.follow_mount??=!0,K.isAbs(e)||(e=s.cwd()+"/"+e);e:for(var n=0;n<40;n++){for(var a=e.split("/").filter(S=>!!S),l=s.root,u="/",_=0;_<a.length;_++){var h=_===a.length-1;if(h&&r.parent)break;if(a[_]!=="."){if(a[_]===".."){if(u=K.dirname(u),s.isRoot(l)){e=u+"/"+a.slice(_+1).join("/");continue e}else l=l.parent;continue}u=K.join2(u,a[_]);try{l=s.lookupNode(l,a[_])}catch(S){if(S?.errno===44&&h&&r.noent_okay)return{path:u};throw S}if(s.isMountpoint(l)&&(!h||r.follow_mount)&&(l=l.mounted.root),s.isLink(l.mode)&&(!h||r.follow)){if(!l.node_ops.readlink)throw new s.ErrnoError(52);var w=l.node_ops.readlink(l);K.isAbs(w)||(w=K.dirname(u)+"/"+w),e=w+"/"+a.slice(_+1).join("/");continue e}}}return{path:u,node:l}}throw new s.ErrnoError(32)},getPath(e){for(var r;;){if(s.isRoot(e)){var n=e.mount.mountpoint;return r?n[n.length-1]!=="/"?`${n}/${r}`:n+r:n}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName(e,r){for(var n=0,a=0;a<r.length;a++)n=(n<<5)-n+r.charCodeAt(a)|0;return(e+n>>>0)%s.nameTable.length},hashAddNode(e){var r=s.hashName(e.parent.id,e.name);e.name_next=s.nameTable[r],s.nameTable[r]=e},hashRemoveNode(e){var r=s.hashName(e.parent.id,e.name);if(s.nameTable[r]===e)s.nameTable[r]=e.name_next;else for(var n=s.nameTable[r];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,r){var n=s.mayLookup(e);if(n)throw new s.ErrnoError(n);for(var a=s.hashName(e.id,r),l=s.nameTable[a];l;l=l.name_next){var u=l.name;if(l.parent.id===e.id&&u===r)return l}return s.lookup(e,r)},createNode(e,r,n,a){var l=new s.FSNode(e,r,n,a);return s.hashAddNode(l),l},destroyNode(e){s.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions(e,r){return s.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!s.isDir(e.mode))return 54;var r=s.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate(e,r){if(!s.isDir(e.mode))return 54;try{var n=s.lookupNode(e,r);return 20}catch{}return s.nodePermissions(e,"wx")},mayDelete(e,r,n){var a;try{a=s.lookupNode(e,r)}catch(u){return u.errno}var l=s.nodePermissions(e,"wx");if(l)return l;if(n){if(!s.isDir(a.mode))return 54;if(s.isRoot(a)||s.getPath(a)===s.cwd())return 10}else if(s.isDir(a.mode))return 31;return 0},mayOpen(e,r){return e?s.isLink(e.mode)?32:s.isDir(e.mode)&&(s.flagsToPermissionString(r)!=="r"||r&576)?31:s.nodePermissions(e,s.flagsToPermissionString(r)):44},checkOpExists(e,r){if(!e)throw new s.ErrnoError(r);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=s.MAX_OPEN_FDS;e++)if(!s.streams[e])return e;throw new s.ErrnoError(33)},getStreamChecked(e){var r=s.getStream(e);if(!r)throw new s.ErrnoError(8);return r},getStream:e=>s.streams[e],createStream(e,r=-1){return e=Object.assign(new s.FSStream,e),r==-1&&(r=s.nextfd()),e.fd=r,s.streams[r]=e,e},closeStream(e){s.streams[e]=null},dupStream(e,r=-1){var n=s.createStream(e,r);return n.stream_ops?.dup?.(n),n},doSetAttr(e,r,n){var a=e?.stream_ops.setattr,l=a?e:r;a??=r.node_ops.setattr,s.checkOpExists(a,63),a(l,n)},chrdev_stream_ops:{open(e){var r=s.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new s.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice(e,r){s.devices[e]={stream_ops:r}},getDevice:e=>s.devices[e],getMounts(e){for(var r=[],n=[e];n.length;){var a=n.pop();r.push(a),n.push(...a.mounts)}return r},syncfs(e,r){typeof e=="function"&&(r=e,e=!1),s.syncFSRequests++,s.syncFSRequests>1&&p(`warning: ${s.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=s.getMounts(s.root.mount),a=0;function l(_){return s.syncFSRequests--,r(_)}function u(_){if(_)return u.errored?void 0:(u.errored=!0,l(_));++a>=n.length&&l(null)}n.forEach(_=>{if(!_.type.syncfs)return u(null);_.type.syncfs(_,e,u)})},mount(e,r,n){var a=n==="/",l=!n,u;if(a&&s.root)throw new s.ErrnoError(10);if(!a&&!l){var _=s.lookupPath(n,{follow_mount:!1});if(n=_.path,u=_.node,s.isMountpoint(u))throw new s.ErrnoError(10);if(!s.isDir(u.mode))throw new s.ErrnoError(54)}var h={type:e,opts:r,mountpoint:n,mounts:[]},w=e.mount(h);return w.mount=h,h.root=w,a?s.root=w:u&&(u.mounted=h,u.mount&&u.mount.mounts.push(h)),w},unmount(e){var r=s.lookupPath(e,{follow_mount:!1});if(!s.isMountpoint(r.node))throw new s.ErrnoError(28);var n=r.node,a=n.mounted,l=s.getMounts(a);Object.keys(s.nameTable).forEach(_=>{for(var h=s.nameTable[_];h;){var w=h.name_next;l.includes(h.mount)&&s.destroyNode(h),h=w}}),n.mounted=null;var u=n.mount.mounts.indexOf(a);n.mount.mounts.splice(u,1)},lookup(e,r){return e.node_ops.lookup(e,r)},mknod(e,r,n){var a=s.lookupPath(e,{parent:!0}),l=a.node,u=K.basename(e);if(!u)throw new s.ErrnoError(28);if(u==="."||u==="..")throw new s.ErrnoError(20);var _=s.mayCreate(l,u);if(_)throw new s.ErrnoError(_);if(!l.node_ops.mknod)throw new s.ErrnoError(63);return l.node_ops.mknod(l,u,r,n)},statfs(e){return s.statfsNode(s.lookupPath(e,{follow:!0}).node)},statfsStream(e){return s.statfsNode(e.node)},statfsNode(e){var r={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:s.nextInode,ffree:s.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(r,e.node_ops.statfs(e.mount.opts.root)),r},create(e,r=438){return r&=4095,r|=32768,s.mknod(e,r,0)},mkdir(e,r=511){return r&=1023,r|=16384,s.mknod(e,r,0)},mkdirTree(e,r){var n=e.split("/"),a="";for(var l of n)if(l){(a||K.isAbs(e))&&(a+="/"),a+=l;try{s.mkdir(a,r)}catch(u){if(u.errno!=20)throw u}}},mkdev(e,r,n){return typeof n>"u"&&(n=r,r=438),r|=8192,s.mknod(e,r,n)},symlink(e,r){if(!ge.resolve(e))throw new s.ErrnoError(44);var n=s.lookupPath(r,{parent:!0}),a=n.node;if(!a)throw new s.ErrnoError(44);var l=K.basename(r),u=s.mayCreate(a,l);if(u)throw new s.ErrnoError(u);if(!a.node_ops.symlink)throw new s.ErrnoError(63);return a.node_ops.symlink(a,l,e)},rename(e,r){var n=K.dirname(e),a=K.dirname(r),l=K.basename(e),u=K.basename(r),_,h,w;if(_=s.lookupPath(e,{parent:!0}),h=_.node,_=s.lookupPath(r,{parent:!0}),w=_.node,!h||!w)throw new s.ErrnoError(44);if(h.mount!==w.mount)throw new s.ErrnoError(75);var S=s.lookupNode(h,l),O=ge.relative(e,a);if(O.charAt(0)!==".")throw new s.ErrnoError(28);if(O=ge.relative(r,n),O.charAt(0)!==".")throw new s.ErrnoError(55);var H;try{H=s.lookupNode(w,u)}catch{}if(S!==H){var B=s.isDir(S.mode),T=s.mayDelete(h,l,B);if(T)throw new s.ErrnoError(T);if(T=H?s.mayDelete(w,u,B):s.mayCreate(w,u),T)throw new s.ErrnoError(T);if(!h.node_ops.rename)throw new s.ErrnoError(63);if(s.isMountpoint(S)||H&&s.isMountpoint(H))throw new s.ErrnoError(10);if(w!==h&&(T=s.nodePermissions(h,"w"),T))throw new s.ErrnoError(T);s.hashRemoveNode(S);try{h.node_ops.rename(S,w,u),S.parent=w}catch(N){throw N}finally{s.hashAddNode(S)}}},rmdir(e){var r=s.lookupPath(e,{parent:!0}),n=r.node,a=K.basename(e),l=s.lookupNode(n,a),u=s.mayDelete(n,a,!0);if(u)throw new s.ErrnoError(u);if(!n.node_ops.rmdir)throw new s.ErrnoError(63);if(s.isMountpoint(l))throw new s.ErrnoError(10);n.node_ops.rmdir(n,a),s.destroyNode(l)},readdir(e){var r=s.lookupPath(e,{follow:!0}),n=r.node,a=s.checkOpExists(n.node_ops.readdir,54);return a(n)},unlink(e){var r=s.lookupPath(e,{parent:!0}),n=r.node;if(!n)throw new s.ErrnoError(44);var a=K.basename(e),l=s.lookupNode(n,a),u=s.mayDelete(n,a,!1);if(u)throw new s.ErrnoError(u);if(!n.node_ops.unlink)throw new s.ErrnoError(63);if(s.isMountpoint(l))throw new s.ErrnoError(10);n.node_ops.unlink(n,a),s.destroyNode(l)},readlink(e){var r=s.lookupPath(e),n=r.node;if(!n)throw new s.ErrnoError(44);if(!n.node_ops.readlink)throw new s.ErrnoError(28);return n.node_ops.readlink(n)},stat(e,r){var n=s.lookupPath(e,{follow:!r}),a=n.node,l=s.checkOpExists(a.node_ops.getattr,63);return l(a)},fstat(e){var r=s.getStreamChecked(e),n=r.node,a=r.stream_ops.getattr,l=a?r:n;return a??=n.node_ops.getattr,s.checkOpExists(a,63),a(l)},lstat(e){return s.stat(e,!0)},doChmod(e,r,n,a){s.doSetAttr(e,r,{mode:n&4095|r.mode&-4096,ctime:Date.now(),dontFollow:a})},chmod(e,r,n){var a;if(typeof e=="string"){var l=s.lookupPath(e,{follow:!n});a=l.node}else a=e;s.doChmod(null,a,r,n)},lchmod(e,r){s.chmod(e,r,!0)},fchmod(e,r){var n=s.getStreamChecked(e);s.doChmod(n,n.node,r,!1)},doChown(e,r,n){s.doSetAttr(e,r,{timestamp:Date.now(),dontFollow:n})},chown(e,r,n,a){var l;if(typeof e=="string"){var u=s.lookupPath(e,{follow:!a});l=u.node}else l=e;s.doChown(null,l,a)},lchown(e,r,n){s.chown(e,r,n,!0)},fchown(e,r,n){var a=s.getStreamChecked(e);s.doChown(a,a.node,!1)},doTruncate(e,r,n){if(s.isDir(r.mode))throw new s.ErrnoError(31);if(!s.isFile(r.mode))throw new s.ErrnoError(28);var a=s.nodePermissions(r,"w");if(a)throw new s.ErrnoError(a);s.doSetAttr(e,r,{size:n,timestamp:Date.now()})},truncate(e,r){if(r<0)throw new s.ErrnoError(28);var n;if(typeof e=="string"){var a=s.lookupPath(e,{follow:!0});n=a.node}else n=e;s.doTruncate(null,n,r)},ftruncate(e,r){var n=s.getStreamChecked(e);if(r<0||(n.flags&2097155)===0)throw new s.ErrnoError(28);s.doTruncate(n,n.node,r)},utime(e,r,n){var a=s.lookupPath(e,{follow:!0}),l=a.node,u=s.checkOpExists(l.node_ops.setattr,63);u(l,{atime:r,mtime:n})},open(e,r,n=438){if(e==="")throw new s.ErrnoError(44);r=typeof r=="string"?Bt(r):r,r&64?n=n&4095|32768:n=0;var a,l;if(typeof e=="object")a=e;else{l=e.endsWith("/");var u=s.lookupPath(e,{follow:!(r&131072),noent_okay:!0});a=u.node,e=u.path}var _=!1;if(r&64)if(a){if(r&128)throw new s.ErrnoError(20)}else{if(l)throw new s.ErrnoError(31);a=s.mknod(e,n|511,0),_=!0}if(!a)throw new s.ErrnoError(44);if(s.isChrdev(a.mode)&&(r&=-513),r&65536&&!s.isDir(a.mode))throw new s.ErrnoError(54);if(!_){var h=s.mayOpen(a,r);if(h)throw new s.ErrnoError(h)}r&512&&!_&&s.truncate(a,0),r&=-131713;var w=s.createStream({node:a,path:s.getPath(a),flags:r,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1});return w.stream_ops.open&&w.stream_ops.open(w),_&&s.chmod(a,n&511),t.logReadFiles&&!(r&1)&&(e in s.readFiles||(s.readFiles[e]=1)),w},close(e){if(s.isClosed(e))throw new s.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{s.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,r,n){if(s.isClosed(e))throw new s.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new s.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new s.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,n),e.ungotten=[],e.position},read(e,r,n,a,l){if(a<0||l<0)throw new s.ErrnoError(28);if(s.isClosed(e))throw new s.ErrnoError(8);if((e.flags&2097155)===1)throw new s.ErrnoError(8);if(s.isDir(e.node.mode))throw new s.ErrnoError(31);if(!e.stream_ops.read)throw new s.ErrnoError(28);var u=typeof l<"u";if(!u)l=e.position;else if(!e.seekable)throw new s.ErrnoError(70);var _=e.stream_ops.read(e,r,n,a,l);return u||(e.position+=_),_},write(e,r,n,a,l,u){if(a<0||l<0)throw new s.ErrnoError(28);if(s.isClosed(e))throw new s.ErrnoError(8);if((e.flags&2097155)===0)throw new s.ErrnoError(8);if(s.isDir(e.node.mode))throw new s.ErrnoError(31);if(!e.stream_ops.write)throw new s.ErrnoError(28);e.seekable&&e.flags&1024&&s.llseek(e,0,2);var _=typeof l<"u";if(!_)l=e.position;else if(!e.seekable)throw new s.ErrnoError(70);var h=e.stream_ops.write(e,r,n,a,l,u);return _||(e.position+=h),h},mmap(e,r,n,a,l){if((a&2)!==0&&(l&2)===0&&(e.flags&2097155)!==2)throw new s.ErrnoError(2);if((e.flags&2097155)===1)throw new s.ErrnoError(2);if(!e.stream_ops.mmap)throw new s.ErrnoError(43);if(!r)throw new s.ErrnoError(28);return e.stream_ops.mmap(e,r,n,a,l)},msync(e,r,n,a,l){return e.stream_ops.msync?e.stream_ops.msync(e,r,n,a,l):0},ioctl(e,r,n){if(!e.stream_ops.ioctl)throw new s.ErrnoError(59);return e.stream_ops.ioctl(e,r,n)},readFile(e,r={}){if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var n,a=s.open(e,r.flags),l=s.stat(e),u=l.size,_=new Uint8Array(u);return s.read(a,_,0,u,0),r.encoding==="utf8"?n=Ae(_):r.encoding==="binary"&&(n=_),s.close(a),n},writeFile(e,r,n={}){n.flags=n.flags||577;var a=s.open(e,n.flags,n.mode);if(typeof r=="string"){var l=new Uint8Array(pe(r)+1),u=$e(r,l,0,l.length);s.write(a,l,0,u,void 0,n.canOwn)}else if(ArrayBuffer.isView(r))s.write(a,r,0,r.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");s.close(a)},cwd:()=>s.currentPath,chdir(e){var r=s.lookupPath(e,{follow:!0});if(r.node===null)throw new s.ErrnoError(44);if(!s.isDir(r.node.mode))throw new s.ErrnoError(54);var n=s.nodePermissions(r.node,"x");if(n)throw new s.ErrnoError(n);s.currentPath=r.path},createDefaultDirectories(){s.mkdir("/tmp"),s.mkdir("/home"),s.mkdir("/home/web_user")},createDefaultDevices(){s.mkdir("/dev"),s.registerDevice(s.makedev(1,3),{read:()=>0,write:(a,l,u,_,h)=>_,llseek:()=>0}),s.mkdev("/dev/null",s.makedev(1,3)),me.register(s.makedev(5,0),me.default_tty_ops),me.register(s.makedev(6,0),me.default_tty1_ops),s.mkdev("/dev/tty",s.makedev(5,0)),s.mkdev("/dev/tty1",s.makedev(6,0));var e=new Uint8Array(1024),r=0,n=()=>(r===0&&(mr(e),r=e.byteLength),e[--r]);s.createDevice("/dev","random",n),s.createDevice("/dev","urandom",n),s.mkdir("/dev/shm"),s.mkdir("/dev/shm/tmp")},createSpecialDirectories(){s.mkdir("/proc");var e=s.mkdir("/proc/self");s.mkdir("/proc/self/fd"),s.mount({mount(){var r=s.createNode(e,"fd",16895,73);return r.stream_ops={llseek:j.stream_ops.llseek},r.node_ops={lookup(n,a){var l=+a,u=s.getStreamChecked(l),_={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>u.path},id:l+1};return _.parent=_,_},readdir(){return Array.from(s.streams.entries()).filter(([n,a])=>a).map(([n,a])=>n.toString())}},r}},{},"/proc/self/fd")},createStandardStreams(e,r,n){e?s.createDevice("/dev","stdin",e):s.symlink("/dev/tty","/dev/stdin"),r?s.createDevice("/dev","stdout",null,r):s.symlink("/dev/tty","/dev/stdout"),n?s.createDevice("/dev","stderr",null,n):s.symlink("/dev/tty1","/dev/stderr"),s.open("/dev/stdin",0),s.open("/dev/stdout",1),s.open("/dev/stderr",1)},staticInit(){s.nameTable=new Array(4096),s.mount(j,{},"/"),s.createDefaultDirectories(),s.createDefaultDevices(),s.createSpecialDirectories(),s.filesystems={MEMFS:j}},init(e,r,n){s.initialized=!0,e??=t.stdin,r??=t.stdout,n??=t.stderr,s.createStandardStreams(e,r,n)},quit(){s.initialized=!1;for(var e of s.streams)e&&s.close(e)},findObject(e,r){var n=s.analyzePath(e,r);return n.exists?n.object:null},analyzePath(e,r){try{var n=s.lookupPath(e,{follow:!r});e=n.path}catch{}var a={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=s.lookupPath(e,{parent:!0});a.parentExists=!0,a.parentPath=n.path,a.parentObject=n.node,a.name=K.basename(e),n=s.lookupPath(e,{follow:!r}),a.exists=!0,a.path=n.path,a.object=n.node,a.name=n.node.name,a.isRoot=n.path==="/"}catch(l){a.error=l.errno}return a},createPath(e,r,n,a){e=typeof e=="string"?e:s.getPath(e);for(var l=r.split("/").reverse();l.length;){var u=l.pop();if(u){var _=K.join2(e,u);try{s.mkdir(_)}catch(h){if(h.errno!=20)throw h}e=_}}return _},createFile(e,r,n,a,l){var u=K.join2(typeof e=="string"?e:s.getPath(e),r),_=Ge(a,l);return s.create(u,_)},createDataFile(e,r,n,a,l,u){var _=r;e&&(e=typeof e=="string"?e:s.getPath(e),_=r?K.join2(e,r):e);var h=Ge(a,l),w=s.create(_,h);if(n){if(typeof n=="string"){for(var S=new Array(n.length),O=0,H=n.length;O<H;++O)S[O]=n.charCodeAt(O);n=S}s.chmod(w,h|146);var B=s.open(w,577);s.write(B,n,0,n.length,0,u),s.close(B),s.chmod(w,h)}},createDevice(e,r,n,a){var l=K.join2(typeof e=="string"?e:s.getPath(e),r),u=Ge(!!n,!!a);s.createDevice.major??=64;var _=s.makedev(s.createDevice.major++,0);return s.registerDevice(_,{open(h){h.seekable=!1},close(h){a?.buffer?.length&&a(10)},read(h,w,S,O,H){for(var B=0,T=0;T<O;T++){var N;try{N=n()}catch{throw new s.ErrnoError(29)}if(N===void 0&&B===0)throw new s.ErrnoError(6);if(N==null)break;B++,w[S+T]=N}return B&&(h.node.atime=Date.now()),B},write(h,w,S,O,H){for(var B=0;B<O;B++)try{a(w[S+B])}catch{throw new s.ErrnoError(29)}return O&&(h.node.mtime=h.node.ctime=Date.now()),B}}),s.mkdev(l,u,_)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=ie(e.url),e.usedBytes=e.contents.length}catch{throw new s.ErrnoError(29)}},createLazyFile(e,r,n,a,l){class u{lengthKnown=!1;chunks=[];get(T){if(!(T>this.length-1||T<0)){var N=T%this.chunkSize,Z=T/this.chunkSize|0;return this.getter(Z)[N]}}setDataGetter(T){this.getter=T}cacheLength(){var T=new XMLHttpRequest;if(T.open("HEAD",n,!1),T.send(null),!(T.status>=200&&T.status<300||T.status===304))throw new Error("Couldn't load "+n+". Status: "+T.status);var N=Number(T.getResponseHeader("Content-length")),Z,G=(Z=T.getResponseHeader("Accept-Ranges"))&&Z==="bytes",ee=(Z=T.getResponseHeader("Content-Encoding"))&&Z==="gzip",ae=1024*1024;G||(ae=N);var se=(oe,ke)=>{if(oe>ke)throw new Error("invalid range ("+oe+", "+ke+") or no bytes requested!");if(ke>N-1)throw new Error("only "+N+" bytes available! programmer error!");var te=new XMLHttpRequest;if(te.open("GET",n,!1),N!==ae&&te.setRequestHeader("Range","bytes="+oe+"-"+ke),te.responseType="arraybuffer",te.overrideMimeType&&te.overrideMimeType("text/plain; charset=x-user-defined"),te.send(null),!(te.status>=200&&te.status<300||te.status===304))throw new Error("Couldn't load "+n+". Status: "+te.status);return te.response!==void 0?new Uint8Array(te.response||[]):Ke(te.responseText||"",!0)},Ce=this;Ce.setDataGetter(oe=>{var ke=oe*ae,te=(oe+1)*ae-1;if(te=Math.min(te,N-1),typeof Ce.chunks[oe]>"u"&&(Ce.chunks[oe]=se(ke,te)),typeof Ce.chunks[oe]>"u")throw new Error("doXHR failed!");return Ce.chunks[oe]}),(ee||!N)&&(ae=N=1,N=this.getter(0).length,ae=N,v("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=N,this._chunkSize=ae,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!k)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var _=new u,h={isDevice:!1,contents:_}}else var h={isDevice:!1,url:n};var w=s.createFile(e,r,h,a,l);h.contents?w.contents=h.contents:h.url&&(w.contents=null,w.url=h.url),Object.defineProperties(w,{usedBytes:{get:function(){return this.contents.length}}});var S={},O=Object.keys(w.stream_ops);O.forEach(B=>{var T=w.stream_ops[B];S[B]=(...N)=>(s.forceLoadFile(w),T(...N))});function H(B,T,N,Z,G){var ee=B.node.contents;if(G>=ee.length)return 0;var ae=Math.min(ee.length-G,Z);if(ee.slice)for(var se=0;se<ae;se++)T[N+se]=ee[G+se];else for(var se=0;se<ae;se++)T[N+se]=ee.get(G+se);return ae}return S.read=(B,T,N,Z,G)=>(s.forceLoadFile(w),H(B,T,N,Z,G)),S.mmap=(B,T,N,Z,G)=>{s.forceLoadFile(w);var ee=yr(T);if(!ee)throw new s.ErrnoError(48);return H(B,R,ee,T,N),{ptr:ee,allocated:!0}},w.stream_ops=S,w}},M={DEFAULT_POLLMASK:5,calculateAt(e,r,n){if(K.isAbs(r))return r;var a;if(e===-100)a=s.cwd();else{var l=M.getStreamFromFD(e);a=l.path}if(r.length==0){if(!n)throw new s.ErrnoError(44);return a}return a+"/"+r},writeStat(e,r){q[e>>2]=r.dev,q[e+4>>2]=r.mode,W[e+8>>2]=r.nlink,q[e+12>>2]=r.uid,q[e+16>>2]=r.gid,q[e+20>>2]=r.rdev,X=[r.size>>>0,(x=r.size,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[e+24>>2]=X[0],q[e+28>>2]=X[1],q[e+32>>2]=4096,q[e+36>>2]=r.blocks;var n=r.atime.getTime(),a=r.mtime.getTime(),l=r.ctime.getTime();return X=[Math.floor(n/1e3)>>>0,(x=Math.floor(n/1e3),+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[e+40>>2]=X[0],q[e+44>>2]=X[1],W[e+48>>2]=n%1e3*1e3*1e3,X=[Math.floor(a/1e3)>>>0,(x=Math.floor(a/1e3),+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[e+56>>2]=X[0],q[e+60>>2]=X[1],W[e+64>>2]=a%1e3*1e3*1e3,X=[Math.floor(l/1e3)>>>0,(x=Math.floor(l/1e3),+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[e+72>>2]=X[0],q[e+76>>2]=X[1],W[e+80>>2]=l%1e3*1e3*1e3,X=[r.ino>>>0,(x=r.ino,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[e+88>>2]=X[0],q[e+92>>2]=X[1],0},writeStatFs(e,r){q[e+4>>2]=r.bsize,q[e+40>>2]=r.bsize,q[e+8>>2]=r.blocks,q[e+12>>2]=r.bfree,q[e+16>>2]=r.bavail,q[e+20>>2]=r.files,q[e+24>>2]=r.ffree,q[e+28>>2]=r.fsid,q[e+44>>2]=r.flags,q[e+36>>2]=r.namelen},doMsync(e,r,n,a,l){if(!s.isFile(r.node.mode))throw new s.ErrnoError(43);if(a&2)return 0;var u=Q.slice(e,e+n);s.msync(r,u,l,n,a)},getStreamFromFD(e){var r=s.getStreamChecked(e);return r},varargs:void 0,getStr(e){var r=he(e);return r}};function Mt(e,r){try{return e=M.getStr(e),s.chmod(e,r),0}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Ht(e,r,n,a){try{if(r=M.getStr(r),r=M.calculateAt(e,r),n&-8)return-28;var l=s.lookupPath(r,{follow:!0}),u=l.node;if(!u)return-44;var _="";return n&4&&(_+="r"),n&2&&(_+="w"),n&1&&(_+="x"),_&&s.nodePermissions(u,_)?-2:0}catch(h){if(typeof s>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function Wt(e,r){try{return s.fchmod(e,r),0}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Vt(e,r,n){try{return s.fchown(e,r,n),0}catch(a){if(typeof s>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var Oe=()=>{var e=q[+M.varargs>>2];return M.varargs+=4,e},Qt=Oe;function $t(e,r,n){M.varargs=n;try{var a=M.getStreamFromFD(e);switch(r){case 0:{var l=Oe();if(l<0)return-28;for(;s.streams[l];)l++;var u;return u=s.dupStream(a,l),u.fd}case 1:case 2:return 0;case 3:return a.flags;case 4:{var l=Oe();return a.flags|=l,0}case 12:{var l=Qt(),_=0;return Y[l+_>>1]=2,0}case 13:case 14:return 0}return-28}catch(h){if(typeof s>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function Kt(e,r){try{return M.writeStat(r,s.fstat(e))}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Te=(e,r)=>r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN;function Gt(e,r,n){var a=Te(r,n);try{return isNaN(a)?-61:(s.ftruncate(e,a),0)}catch(l){if(typeof s>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}var ue=(e,r,n)=>$e(e,Q,r,n);function Yt(e,r){try{if(r===0)return-28;var n=s.cwd(),a=pe(n)+1;return r<a?-68:(ue(n,e,r),a)}catch(l){if(typeof s>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function Xt(e,r){try{return e=M.getStr(e),M.writeStat(r,s.lstat(e))}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Jt(e,r,n){try{return r=M.getStr(r),r=M.calculateAt(e,r),s.mkdir(r,n,0),0}catch(a){if(typeof s>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function Zt(e,r,n,a){try{r=M.getStr(r);var l=a&256,u=a&4096;return a=a&-6401,r=M.calculateAt(e,r,u),M.writeStat(n,l?s.lstat(r):s.stat(r))}catch(_){if(typeof s>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function en(e,r,n,a){M.varargs=a;try{r=M.getStr(r),r=M.calculateAt(e,r);var l=a?Oe():0;return s.open(r,n,l).fd}catch(u){if(typeof s>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function rn(e,r,n,a){try{if(r=M.getStr(r),r=M.calculateAt(e,r),a<=0)return-28;var l=s.readlink(r),u=Math.min(a,pe(l)),_=R[n+u];return ue(l,n,a+1),R[n+u]=_,u}catch(h){if(typeof s>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function tn(e){try{return e=M.getStr(e),s.rmdir(e),0}catch(r){if(typeof s>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function nn(e,r){try{return e=M.getStr(e),M.writeStat(r,s.stat(e))}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function an(e,r,n){try{if(r=M.getStr(r),r=M.calculateAt(e,r),!n)s.unlink(r);else if(n===512)s.rmdir(r);else return-28;return 0}catch(a){if(typeof s>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var br=e=>W[e>>2]+q[e+4>>2]*4294967296;function sn(e,r,n,a){try{r=M.getStr(r),r=M.calculateAt(e,r,!0);var l=Date.now(),u,_;if(!n)u=l,_=l;else{var h=br(n),w=q[n+8>>2];w==1073741823?u=l:w==1073741822?u=null:u=h*1e3+w/(1e3*1e3),n+=16,h=br(n),w=q[n+8>>2],w==1073741823?_=l:w==1073741822?_=null:_=h*1e3+w/(1e3*1e3)}return(_??u)!==null&&s.utime(r,u,_),0}catch(S){if(typeof s>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var on=()=>ce(""),je=0,ln=()=>{Ve=!1,je=0},cn=e=>e%4===0&&(e%100!==0||e%400===0),un=[0,31,60,91,121,152,182,213,244,274,305,335],fn=[0,31,59,90,120,151,181,212,243,273,304,334],_n=e=>{var r=cn(e.getFullYear()),n=r?un:fn,a=n[e.getMonth()]+e.getDate()-1;return a};function dn(e,r,n){var a=Te(e,r),l=new Date(a*1e3);q[n>>2]=l.getSeconds(),q[n+4>>2]=l.getMinutes(),q[n+8>>2]=l.getHours(),q[n+12>>2]=l.getDate(),q[n+16>>2]=l.getMonth(),q[n+20>>2]=l.getFullYear()-1900,q[n+24>>2]=l.getDay();var u=_n(l)|0;q[n+28>>2]=u,q[n+36>>2]=-(l.getTimezoneOffset()*60);var _=new Date(l.getFullYear(),0,1),h=new Date(l.getFullYear(),6,1).getTimezoneOffset(),w=_.getTimezoneOffset(),S=(h!=w&&l.getTimezoneOffset()==Math.min(w,h))|0;q[n+32>>2]=S}function hn(e,r,n,a,l,u,_,h){var w=Te(l,u);try{var S=M.getStreamFromFD(a),O=s.mmap(S,e,w,r,n),H=O.ptr;return q[_>>2]=O.allocated,W[h>>2]=H,0}catch(B){if(typeof s>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function pn(e,r,n,a,l,u,_){var h=Te(u,_);try{var w=M.getStreamFromFD(l);n&2&&M.doMsync(e,w,r,a,h)}catch(S){if(typeof s>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var Fe={},Ye=e=>{if(e instanceof ur||e=="unwind")return L;I(1,e)},Er=()=>Ve||je>0,kr=e=>{L=e,Er()||(t.onExit?.(e),E=!0),I(e,new ur(e))},qr=(e,r)=>{L=e,kr(e)},mn=qr,vn=()=>{if(!Er())try{mn(L)}catch(e){Ye(e)}},Sr=e=>{if(!E)try{e(),vn()}catch(r){Ye(r)}},Ar=()=>performance.now(),yn=(e,r)=>{if(Fe[e]&&(clearTimeout(Fe[e].id),delete Fe[e]),!r)return 0;var n=setTimeout(()=>{delete Fe[e],Sr(()=>bi(e,Ar()))},r);return Fe[e]={id:n,timeout_ms:r},0},wn=(e,r,n,a)=>{var l=new Date().getFullYear(),u=new Date(l,0,1),_=new Date(l,6,1),h=u.getTimezoneOffset(),w=_.getTimezoneOffset(),S=Math.max(h,w);W[e>>2]=S*60,q[r>>2]=+(h!=w);var O=T=>{var N=T>=0?"-":"+",Z=Math.abs(T),G=String(Math.floor(Z/60)).padStart(2,"0"),ee=String(Z%60).padStart(2,"0");return`UTC${N}${G}${ee}`},H=O(h),B=O(w);w<h?(ue(H,n,17),ue(B,a,17)):(ue(H,a,17),ue(B,n,17))},gn=()=>Date.now(),bn=()=>2147483648,En=e=>{var r=y.buffer,n=(e-r.byteLength+65535)/65536|0;try{return y.grow(n),De(),1}catch{}},kn=e=>{var r=Q.length;e>>>=0;var n=bn();if(e>n)return!1;for(var a=1;a<=4;a*=2){var l=r*(1+.2/a);l=Math.min(l,e+100663296);var u=Math.min(n,vr(Math.max(e,l),65536)),_=En(u);if(_)return!0}return!1},Xe={},qn=()=>F||"./this.program",Ie=()=>{if(!Ie.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:qn()};for(var n in Xe)Xe[n]===void 0?delete r[n]:r[n]=Xe[n];var a=[];for(var n in r)a.push(`${n}=${r[n]}`);Ie.strings=a}return Ie.strings},Sn=(e,r)=>{var n=0,a=0;for(var l of Ie()){var u=r+n;W[e+a>>2]=u,n+=ue(l,u,1/0)+1,a+=4}return 0},An=(e,r)=>{var n=Ie();W[e>>2]=n.length;var a=0;for(var l of n)a+=pe(l)+1;return W[r>>2]=a,0};function Tn(e){try{var r=M.getStreamFromFD(e);return s.close(r),0}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function Fn(e,r){try{var n=0,a=0,l=0,u=M.getStreamFromFD(e),_=u.tty?2:s.isDir(u.mode)?3:s.isLink(u.mode)?7:4;return R[r]=_,Y[r+2>>1]=l,X=[n>>>0,(x=n,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[r+8>>2]=X[0],q[r+12>>2]=X[1],X=[a>>>0,(x=a,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[r+16>>2]=X[0],q[r+20>>2]=X[1],0}catch(h){if(typeof s>"u"||h.name!=="ErrnoError")throw h;return h.errno}}var In=(e,r,n,a)=>{for(var l=0,u=0;u<n;u++){var _=W[r>>2],h=W[r+4>>2];r+=8;var w=s.read(e,R,_,h,a);if(w<0)return-1;if(l+=w,w<h)break}return l};function Cn(e,r,n,a){try{var l=M.getStreamFromFD(e),u=In(l,r,n);return W[a>>2]=u,0}catch(_){if(typeof s>"u"||_.name!=="ErrnoError")throw _;return _.errno}}function Rn(e,r,n,a,l){var u=Te(r,n);try{if(isNaN(u))return 61;var _=M.getStreamFromFD(e);return s.llseek(_,u,a),X=[_.position>>>0,(x=_.position,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],q[l>>2]=X[0],q[l+4>>2]=X[1],_.getdents&&u===0&&a===0&&(_.getdents=null),0}catch(h){if(typeof s>"u"||h.name!=="ErrnoError")throw h;return h.errno}}var Tr=function(e){try{var r=M.getStreamFromFD(e);return A.handleSleep(n=>{var a=r.node.mount;if(!a.type.syncfs){n(0);return}a.type.syncfs(a,!1,l=>{n(l?29:0)})})}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return n.errno}};Tr.isAsync=!0;var xn=(e,r,n,a)=>{for(var l=0,u=0;u<n;u++){var _=W[r>>2],h=W[r+4>>2];r+=8;var w=s.write(e,R,_,h,a);if(w<0)return-1;if(l+=w,w<h)break}return l};function Dn(e,r,n,a){try{var l=M.getStreamFromFD(e),u=xn(l,r,n);return W[a>>2]=u,0}catch(_){if(typeof s>"u"||_.name!=="ErrnoError")throw _;return _.errno}}var V=function(){const e=typeof A=="object"?A.handleAsync.bind(A):null;t.handleAsync=e;const r=new Map;t.setCallback=(n,a)=>r.set(n,a),t.getCallback=n=>r.get(n),t.deleteCallback=n=>r.delete(n),V=function(n,a,...l){const u=r.get(a);let _=null;const h=typeof u=="function"?u:u[_=he(l.shift())];if(n){if(e)return e(()=>h.apply(u,l));throw new Error("Synchronous WebAssembly cannot call async function")}const w=h.apply(u,l);if(typeof w?.then=="function")throw console.error("unexpected Promise",h),new Error(`${_} unexpectedly returned a Promise`);return w}};function Ln(...e){return V(!1,...e)}function Fr(...e){return V(!0,...e)}Fr.isAsync=!0;function On(...e){return V(!1,...e)}function Ir(...e){return V(!0,...e)}Ir.isAsync=!0;function jn(...e){return V(!1,...e)}function Cr(...e){return V(!0,...e)}Cr.isAsync=!0;function Pn(...e){return V(!1,...e)}function Rr(...e){return V(!0,...e)}Rr.isAsync=!0;function Nn(...e){return V(!1,...e)}function xr(...e){return V(!0,...e)}xr.isAsync=!0;function Un(...e){return V(!1,...e)}function Dr(...e){return V(!0,...e)}Dr.isAsync=!0;function zn(...e){return V(!1,...e)}function Lr(...e){return V(!0,...e)}Lr.isAsync=!0;function Bn(...e){return V(!1,...e)}function Or(...e){return V(!0,...e)}Or.isAsync=!0;function Mn(...e){return V(!1,...e)}function jr(...e){return V(!0,...e)}jr.isAsync=!0;function Hn(...e){return V(!1,...e)}function Pr(...e){return V(!0,...e)}Pr.isAsync=!0;function Wn(...e){return V(!1,...e)}function Nr(...e){return V(!0,...e)}Nr.isAsync=!0;function Vn(...e){return V(!1,...e)}function Ur(...e){return V(!0,...e)}Ur.isAsync=!0;function Qn(...e){return V(!1,...e)}function zr(...e){return V(!0,...e)}zr.isAsync=!0;function $n(...e){return V(!1,...e)}function Br(...e){return V(!0,...e)}Br.isAsync=!0;function Kn(...e){return V(!1,...e)}function Mr(...e){return V(!0,...e)}Mr.isAsync=!0;function Gn(...e){return V(!1,...e)}function Hr(...e){return V(!0,...e)}Hr.isAsync=!0;var Pe=e=>{try{return e()}catch(r){ce(r)}},Yn=e=>{for(var r={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},n={parameters:[],results:e[0]=="v"?[]:[r[e[0]]]},a=1;a<e.length;++a)n.parameters.push(r[e[a]]);return n},Xn=()=>{je+=1},Jn=()=>{je-=1},A={instrumentWasmImports(e){var r=/^(ipp|ipp_async|ippp|ippp_async|vppp|vppp_async|ipppj|ipppj_async|ipppi|ipppi_async|ipppp|ipppp_async|ipppip|ipppip_async|vpppip|vpppip_async|ippppi|ippppi_async|ippppij|ippppij_async|ipppiii|ipppiii_async|ippppip|ippppip_async|ippipppp|ippipppp_async|ipppppip|ipppppip_async|ipppiiip|ipppiiip_async|vppippii|vppippii_async|invoke_.*|__asyncjs__.*)$/;for(let[n,a]of Object.entries(e))typeof a=="function"&&(a.isAsync||r.test(n))},instrumentWasmExports(e){var r={};for(let[n,a]of Object.entries(e))typeof a=="function"?r[n]=(...l)=>{A.exportCallStack.push(n);try{return a(...l)}finally{E||(A.exportCallStack.pop(),A.maybeStopUnwind())}}:r[n]=a;return r},State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:16384,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId(e){var r=A.callStackNameToId[e];return r===void 0&&(r=A.callStackId++,A.callStackNameToId[e]=r,A.callStackIdToName[r]=e),r},maybeStopUnwind(){A.currData&&A.state===A.State.Unwinding&&A.exportCallStack.length===0&&(A.state=A.State.Normal,Pe(Ti),typeof Fibers<"u"&&Fibers.trampoline())},whenDone(){return new Promise((e,r)=>{A.asyncPromiseHandlers={resolve:e,reject:r}})},allocateData(){var e=vi(12+A.StackSize);return A.setDataHeader(e,e+12,A.StackSize),A.setDataRewindFunc(e),e},setDataHeader(e,r,n){W[e>>2]=r,W[e+4>>2]=r+n},setDataRewindFunc(e){var r=A.exportCallStack[0],n=A.getCallStackId(r);q[e+8>>2]=n},getDataRewindFuncName(e){var r=q[e+8>>2],n=A.callStackIdToName[r];return n},getDataRewindFunc(e){var r=c[e];return r},doRewind(e){var r=A.getDataRewindFuncName(e),n=A.getDataRewindFunc(r);return n()},handleSleep(e){if(!E){if(A.state===A.State.Normal){var r=!1,n=!1;e((a=0)=>{if(!E&&(A.handleSleepReturnValue=a,r=!0,!!n)){A.state=A.State.Rewinding,Pe(()=>Fi(A.currData)),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.resume();var l,u=!1;try{l=A.doRewind(A.currData)}catch(w){l=w,u=!0}var _=!1;if(!A.currData){var h=A.asyncPromiseHandlers;h&&(A.asyncPromiseHandlers=null,(u?h.reject:h.resolve)(l),_=!0)}if(u&&!_)throw l}}),n=!0,r||(A.state=A.State.Unwinding,A.currData=A.allocateData(),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.pause(),Pe(()=>Ai(A.currData)))}else A.state===A.State.Rewinding?(A.state=A.State.Normal,Pe(Ii),yi(A.currData),A.currData=null,A.sleepCallbacks.forEach(Sr)):ce(`invalid state: ${A.state}`);return A.handleSleepReturnValue}},handleAsync:e=>A.handleSleep(r=>{e().then(r)})},Wr=(e,r)=>{e<128?r.push(e):r.push(e%128|128,e>>7)},Zn=(e,r)=>{var n=e.slice(0,1),a=e.slice(1),l={i:127,p:127,j:126,f:125,d:124,e:111};r.push(96),Wr(a.length,r);for(var u of a)r.push(l[u]);n=="v"?r.push(0):r.push(1,l[n])},ei=(e,r)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(Yn(r),e);var n=[1];Zn(r,n);var a=[0,97,115,109,1,0,0,0,1];Wr(n.length,a),a.push(...n),a.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var l=new WebAssembly.Module(new Uint8Array(a)),u=new WebAssembly.Instance(l,{e:{f:e}}),_=u.exports.f;return _},be,ri=e=>be.get(e),ti=(e,r)=>{if(Ee)for(var n=e;n<e+r;n++){var a=ri(n);a&&Ee.set(a,n)}},Ee,ni=e=>(Ee||(Ee=new WeakMap,ti(0,be.length)),Ee.get(e)||0),Vr=[],ii=()=>{if(Vr.length)return Vr.pop();try{be.grow(1)}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e}return be.length-1},Qr=(e,r)=>be.set(e,r),ai=(e,r)=>{var n=ni(e);if(n)return n;var a=ii();try{Qr(a,e)}catch(u){if(!(u instanceof TypeError))throw u;var l=ei(e,r);Qr(a,l)}return Ee.set(e,a),a},$r=e=>{var r=t["_"+e];return r},Kr=(e,r)=>{R.set(e,r)},Gr=e=>qi(e),si=e=>{var r=pe(e)+1,n=Gr(r);return ue(e,n,r),n},_e=(e,r,n,a,l)=>{var u={string:G=>{var ee=0;return G!=null&&G!==0&&(ee=si(G)),ee},array:G=>{var ee=Gr(G.length);return Kr(G,ee),ee}};function _(G){return r==="string"?he(G):r==="boolean"?!!G:G}var h=$r(e),w=[],S=0;if(a)for(var O=0;O<a.length;O++){var H=u[n[O]];H?(S===0&&(S=Dt()),w[O]=H(a[O])):w[O]=a[O]}var B=A.currData,T=h(...w);function N(G){return Jn(),S!==0&&xt(S),_(G)}var Z=l?.async;return Xn(),A.currData!=B?A.whenDone().then(N):(T=N(T),Z?Promise.resolve(T):T)},oi=(e,r,n,a)=>{var l=!n||n.every(_=>_==="number"||_==="boolean"),u=r!=="string";return u&&l&&!a?$r(e):(..._)=>_e(e,r,n,_,a)},li=e=>Ei(),ci=(e,r,n)=>{if(n??=2147483647,n<2)return 0;n-=2;for(var a=r,l=n<e.length*2?n/2:e.length,u=0;u<l;++u){var _=e.charCodeAt(u);Y[r>>1]=_,r+=2}return Y[r>>1]=0,r-a},ui=(e,r,n)=>{if(n??=2147483647,n<4)return 0;for(var a=r,l=a+n-4,u=0;u<e.length;++u){var _=e.charCodeAt(u);if(_>=55296&&_<=57343){var h=e.charCodeAt(++u);_=65536+((_&1023)<<10)|h&1023}if(q[r>>2]=_,r+=4,r+4>l)break}return q[r>>2]=0,r-a},fi=e=>{for(var r="";;){var n=Q[e++];if(!n)return r;r+=String.fromCharCode(n)}},_i=new TextDecoder("utf-16le"),di=(e,r)=>{for(var n=e>>1,a=n+r/2,l=n;!(l>=a)&&J[l];)++l;return _i.decode(J.subarray(n,l))},hi=(e,r)=>{for(var n=0,a="";!(n>=r/4);){var l=q[e+n*4>>2];if(l==0)break;if(++n,l>=65536){var u=l-65536;a+=String.fromCharCode(55296|u>>10,56320|u&1023)}else a+=String.fromCharCode(l)}return a},pi=e=>{for(var r=[],n=0;n<e.length;n++){var a=e[n];a>255&&(a&=255),r.push(String.fromCharCode(a))}return r.join("")};s.createPreloadedFile=zt,s.staticInit(),j.doesNotExistError=new s.ErrnoError(44),j.doesNotExistError.stack="<generic error, no stack>",V(),t.noExitRuntime&&(Ve=t.noExitRuntime),t.preloadPlugins&&(gr=t.preloadPlugins),t.print&&(v=t.print),t.printErr&&(p=t.printErr),t.wasmBinary&&(d=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&(F=t.thisProgram),t.getTempRet0=li,t.ccall=_e,t.cwrap=oi,t.addFunction=ai,t.setValue=we,t.getValue=hr,t.UTF8ToString=he,t.stringToUTF8=ue,t.lengthBytesUTF8=pe,t.intArrayFromString=Ke,t.intArrayToString=pi,t.AsciiToString=fi,t.UTF16ToString=di,t.stringToUTF16=ci,t.UTF32ToString=hi,t.stringToUTF32=ui,t.writeArrayToMemory=Kr;var mi={a:Lt,aa:Mt,da:Ht,ba:Wt,$:Vt,b:$t,_:Kt,y:Gt,U:Yt,Y:Xt,R:Jt,X:Zt,P:en,N:rn,M:tn,Z:nn,K:an,J:sn,F:on,E:ln,w:dn,u:hn,v:pn,G:yn,Q:wn,n:gn,g:Ar,H:kn,S:Sn,T:An,o:Tn,I:Fn,O:Cn,x:Rn,V:Tr,L:Dn,s:Ln,t:Fr,ka:On,oa:Ir,j:jn,k:Cr,c:Pn,d:Rr,ga:Nn,ha:xr,ia:Un,ja:Dr,h:zn,i:Lr,z:Bn,A:Or,e:Mn,f:jr,ea:Hn,fa:Pr,B:Wn,C:Nr,p:Vn,q:Ur,la:Qn,ma:zr,D:kr,na:$n,r:Br,l:Kn,m:Mr,W:Gn,ca:Hr},c=await It();c.qa,t._sqlite3_status64=c.ra,t._sqlite3_status=c.sa,t._sqlite3_msize=c.ta,t._sqlite3_db_status=c.ua,t._sqlite3_vfs_find=c.va,t._sqlite3_vfs_register=c.wa,t._sqlite3_vfs_unregister=c.xa,t._sqlite3_release_memory=c.ya,t._sqlite3_soft_heap_limit64=c.za,t._sqlite3_memory_used=c.Aa,t._sqlite3_hard_heap_limit64=c.Ba,t._sqlite3_memory_highwater=c.Ca,t._sqlite3_malloc=c.Da,t._sqlite3_malloc64=c.Ea,t._sqlite3_free=c.Fa,t._sqlite3_realloc=c.Ga,t._sqlite3_realloc64=c.Ha,t._sqlite3_str_vappendf=c.Ia,t._sqlite3_str_append=c.Ja,t._sqlite3_str_appendchar=c.Ka,t._sqlite3_str_appendall=c.La,t._sqlite3_str_appendf=c.Ma,t._sqlite3_str_finish=c.Na,t._sqlite3_str_errcode=c.Oa,t._sqlite3_str_length=c.Pa,t._sqlite3_str_value=c.Qa,t._sqlite3_str_reset=c.Ra,t._sqlite3_str_new=c.Sa,t._sqlite3_vmprintf=c.Ta,t._sqlite3_mprintf=c.Ua,t._sqlite3_vsnprintf=c.Va,t._sqlite3_snprintf=c.Wa,t._sqlite3_log=c.Xa,t._sqlite3_randomness=c.Ya,t._sqlite3_stricmp=c.Za,t._sqlite3_strnicmp=c._a,t._sqlite3_os_init=c.$a,t._sqlite3_os_end=c.ab,t._sqlite3_serialize=c.bb,t._sqlite3_prepare_v2=c.cb,t._sqlite3_step=c.db,t._sqlite3_column_int64=c.eb,t._sqlite3_reset=c.fb,t._sqlite3_exec=c.gb,t._sqlite3_column_int=c.hb,t._sqlite3_finalize=c.ib,t._sqlite3_deserialize=c.jb,t._sqlite3_database_file_object=c.kb,t._sqlite3_backup_init=c.lb,t._sqlite3_backup_step=c.mb,t._sqlite3_backup_finish=c.nb,t._sqlite3_backup_remaining=c.ob,t._sqlite3_backup_pagecount=c.pb,t._sqlite3_clear_bindings=c.qb,t._sqlite3_value_blob=c.rb,t._sqlite3_value_text=c.sb,t._sqlite3_value_bytes=c.tb,t._sqlite3_value_bytes16=c.ub,t._sqlite3_value_double=c.vb,t._sqlite3_value_int=c.wb,t._sqlite3_value_int64=c.xb,t._sqlite3_value_subtype=c.yb,t._sqlite3_value_pointer=c.zb,t._sqlite3_value_text16=c.Ab,t._sqlite3_value_text16be=c.Bb,t._sqlite3_value_text16le=c.Cb,t._sqlite3_value_type=c.Db,t._sqlite3_value_encoding=c.Eb,t._sqlite3_value_nochange=c.Fb,t._sqlite3_value_frombind=c.Gb,t._sqlite3_value_dup=c.Hb,t._sqlite3_value_free=c.Ib,t._sqlite3_result_blob=c.Jb,t._sqlite3_result_blob64=c.Kb,t._sqlite3_result_double=c.Lb,t._sqlite3_result_error=c.Mb,t._sqlite3_result_error16=c.Nb,t._sqlite3_result_int=c.Ob,t._sqlite3_result_int64=c.Pb,t._sqlite3_result_null=c.Qb,t._sqlite3_result_pointer=c.Rb,t._sqlite3_result_subtype=c.Sb,t._sqlite3_result_text=c.Tb,t._sqlite3_result_text64=c.Ub,t._sqlite3_result_text16=c.Vb,t._sqlite3_result_text16be=c.Wb,t._sqlite3_result_text16le=c.Xb,t._sqlite3_result_value=c.Yb,t._sqlite3_result_error_toobig=c.Zb,t._sqlite3_result_zeroblob=c._b,t._sqlite3_result_zeroblob64=c.$b,t._sqlite3_result_error_code=c.ac,t._sqlite3_result_error_nomem=c.bc,t._sqlite3_user_data=c.cc,t._sqlite3_context_db_handle=c.dc,t._sqlite3_vtab_nochange=c.ec,t._sqlite3_vtab_in_first=c.fc,t._sqlite3_vtab_in_next=c.gc,t._sqlite3_aggregate_context=c.hc,t._sqlite3_get_auxdata=c.ic,t._sqlite3_set_auxdata=c.jc,t._sqlite3_column_count=c.kc,t._sqlite3_data_count=c.lc,t._sqlite3_column_blob=c.mc,t._sqlite3_column_bytes=c.nc,t._sqlite3_column_bytes16=c.oc,t._sqlite3_column_double=c.pc,t._sqlite3_column_text=c.qc,t._sqlite3_column_value=c.rc,t._sqlite3_column_text16=c.sc,t._sqlite3_column_type=c.tc,t._sqlite3_column_name=c.uc,t._sqlite3_column_name16=c.vc,t._sqlite3_bind_blob=c.wc,t._sqlite3_bind_blob64=c.xc,t._sqlite3_bind_double=c.yc,t._sqlite3_bind_int=c.zc,t._sqlite3_bind_int64=c.Ac,t._sqlite3_bind_null=c.Bc,t._sqlite3_bind_pointer=c.Cc,t._sqlite3_bind_text=c.Dc,t._sqlite3_bind_text64=c.Ec,t._sqlite3_bind_text16=c.Fc,t._sqlite3_bind_value=c.Gc,t._sqlite3_bind_zeroblob=c.Hc,t._sqlite3_bind_zeroblob64=c.Ic,t._sqlite3_bind_parameter_count=c.Jc,t._sqlite3_bind_parameter_name=c.Kc,t._sqlite3_bind_parameter_index=c.Lc,t._sqlite3_db_handle=c.Mc,t._sqlite3_stmt_readonly=c.Nc,t._sqlite3_stmt_isexplain=c.Oc,t._sqlite3_stmt_explain=c.Pc,t._sqlite3_stmt_busy=c.Qc,t._sqlite3_next_stmt=c.Rc,t._sqlite3_stmt_status=c.Sc,t._sqlite3_sql=c.Tc,t._sqlite3_expanded_sql=c.Uc,t._sqlite3_value_numeric_type=c.Vc,t._sqlite3_blob_open=c.Wc,t._sqlite3_blob_close=c.Xc,t._sqlite3_blob_read=c.Yc,t._sqlite3_blob_write=c.Zc,t._sqlite3_blob_bytes=c._c,t._sqlite3_blob_reopen=c.$c,t._sqlite3_set_authorizer=c.ad,t._sqlite3_strglob=c.bd,t._sqlite3_strlike=c.cd,t._sqlite3_errmsg=c.dd,t._sqlite3_auto_extension=c.ed,t._sqlite3_cancel_auto_extension=c.fd,t._sqlite3_reset_auto_extension=c.gd,t._sqlite3_prepare=c.hd,t._sqlite3_prepare_v3=c.id,t._sqlite3_prepare16=c.jd,t._sqlite3_prepare16_v2=c.kd,t._sqlite3_prepare16_v3=c.ld,t._sqlite3_get_table=c.md,t._sqlite3_free_table=c.nd,t._sqlite3_create_module=c.od,t._sqlite3_create_module_v2=c.pd,t._sqlite3_drop_modules=c.qd,t._sqlite3_declare_vtab=c.rd,t._sqlite3_vtab_on_conflict=c.sd,t._sqlite3_vtab_config=c.td,t._sqlite3_vtab_collation=c.ud,t._sqlite3_vtab_in=c.vd,t._sqlite3_vtab_rhs_value=c.wd,t._sqlite3_vtab_distinct=c.xd,t._sqlite3_keyword_name=c.yd,t._sqlite3_keyword_count=c.zd,t._sqlite3_keyword_check=c.Ad,t._sqlite3_complete=c.Bd,t._sqlite3_complete16=c.Cd,t._sqlite3_libversion=c.Dd,t._sqlite3_libversion_number=c.Ed,t._sqlite3_threadsafe=c.Fd,t._sqlite3_initialize=c.Gd,t._sqlite3_shutdown=c.Hd,t._sqlite3_config=c.Id,t._sqlite3_db_mutex=c.Jd,t._sqlite3_db_release_memory=c.Kd,t._sqlite3_db_cacheflush=c.Ld,t._sqlite3_db_config=c.Md,t._sqlite3_last_insert_rowid=c.Nd,t._sqlite3_set_last_insert_rowid=c.Od,t._sqlite3_changes64=c.Pd,t._sqlite3_changes=c.Qd,t._sqlite3_total_changes64=c.Rd,t._sqlite3_total_changes=c.Sd,t._sqlite3_txn_state=c.Td,t._sqlite3_close=c.Ud,t._sqlite3_close_v2=c.Vd,t._sqlite3_busy_handler=c.Wd,t._sqlite3_progress_handler=c.Xd,t._sqlite3_busy_timeout=c.Yd,t._sqlite3_interrupt=c.Zd,t._sqlite3_is_interrupted=c._d,t._sqlite3_create_function=c.$d,t._sqlite3_create_function_v2=c.ae,t._sqlite3_create_window_function=c.be,t._sqlite3_create_function16=c.ce,t._sqlite3_overload_function=c.de,t._sqlite3_trace_v2=c.ee,t._sqlite3_commit_hook=c.fe,t._sqlite3_update_hook=c.ge,t._sqlite3_rollback_hook=c.he,t._sqlite3_autovacuum_pages=c.ie,t._sqlite3_wal_autocheckpoint=c.je,t._sqlite3_wal_hook=c.ke,t._sqlite3_wal_checkpoint_v2=c.le,t._sqlite3_wal_checkpoint=c.me,t._sqlite3_error_offset=c.ne,t._sqlite3_errmsg16=c.oe,t._sqlite3_errcode=c.pe,t._sqlite3_extended_errcode=c.qe,t._sqlite3_system_errno=c.re,t._sqlite3_errstr=c.se,t._sqlite3_limit=c.te,t._sqlite3_open=c.ue,t._sqlite3_open_v2=c.ve,t._sqlite3_open16=c.we,t._sqlite3_create_collation=c.xe,t._sqlite3_create_collation_v2=c.ye,t._sqlite3_create_collation16=c.ze,t._sqlite3_collation_needed=c.Ae,t._sqlite3_collation_needed16=c.Be,t._sqlite3_get_clientdata=c.Ce,t._sqlite3_set_clientdata=c.De,t._sqlite3_get_autocommit=c.Ee,t._sqlite3_table_column_metadata=c.Fe,t._sqlite3_sleep=c.Ge,t._sqlite3_extended_result_codes=c.He,t._sqlite3_file_control=c.Ie,t._sqlite3_test_control=c.Je,t._sqlite3_create_filename=c.Ke,t._sqlite3_free_filename=c.Le,t._sqlite3_uri_parameter=c.Me,t._sqlite3_uri_key=c.Ne,t._sqlite3_uri_boolean=c.Oe,t._sqlite3_uri_int64=c.Pe,t._sqlite3_filename_database=c.Qe,t._sqlite3_filename_journal=c.Re,t._sqlite3_filename_wal=c.Se,t._sqlite3_db_name=c.Te,t._sqlite3_db_filename=c.Ue,t._sqlite3_db_readonly=c.Ve,t._sqlite3_compileoption_used=c.We,t._sqlite3_compileoption_get=c.Xe,t._sqlite3_sourceid=c.Ye;var vi=t._malloc=c.Ze,yi=t._free=c._e;t._RegisterExtensionFunctions=c.$e,t._getSqliteFree=c.af;var wi=t._main=c.bf;t._libauthorizer_set_authorizer=c.cf,t._libfunction_create_function=c.df,t._libhook_commit_hook=c.ef,t._libhook_update_hook=c.ff,t._libprogress_progress_handler=c.gf,t._libvfs_vfs_register=c.hf;var gi=c.kf,bi=c.lf,Ei=c.mf,ki=c.nf,qi=c.of,Si=c.pf;t.dynCall_vi=c.dynCall_vi,t.dynCall_iiiii=c.dynCall_iiiii,t.dynCall_viii=c.dynCall_viii,t.dynCall_iii=c.dynCall_iii,t.dynCall_iiii=c.dynCall_iiii,t.dynCall_iiiiiii=c.dynCall_iiiiiii,t.dynCall_ii=c.dynCall_ii,t.dynCall_vii=c.dynCall_vii,t.dynCall_iiiiii=c.dynCall_iiiiii,t.dynCall_viiii=c.dynCall_viiii,t.dynCall_iiiiiiiii=c.dynCall_iiiiiiiii,t.dynCall_vijii=c.dynCall_vijii,t.dynCall_viiiii=c.dynCall_viiiii,t.dynCall_iiiij=c.dynCall_iiiij,t.dynCall_viji=c.dynCall_viji,t.dynCall_viiiij=c.dynCall_viiiij,t.dynCall_iij=c.dynCall_iij,t.dynCall_v=c.dynCall_v,t.dynCall_iijii=c.dynCall_iijii,t.dynCall_iiji=c.dynCall_iiji,t.dynCall_i=c.dynCall_i,t.dynCall_iiiiiij=c.dynCall_iiiiiij,t.dynCall_ji=c.dynCall_ji,t.dynCall_iiiiiiii=c.dynCall_iiiiiiii;var Ai=c.qf,Ti=c.rf,Fi=c.sf,Ii=c.tf;t._sqlite3_version=5472;function Ci(){var e=wi,r=0,n=0;try{var a=e(r,n);return qr(a,!0),a}catch(l){return Ye(l)}}function Je(){if(de>0){Se=Je;return}if(Le(),de>0){Se=Je;return}function e(){if(t.calledRun=!0,!E){bt(),f(t),t.onRuntimeInitialized?.();var r=t.noInitialRun||!1;r||Ci(),Et()}}t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),e()},1)):e()}function Ri(){if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()()}return Ri(),Je(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let r=0;t.set_authorizer=function(n,a,l){r&&(t.deleteCallback(r),t._sqlite3_free(r),r=0),r=t._sqlite3_malloc(4),we(r,a instanceof e?1:0,"i32");const u=_e("libauthorizer_set_authorizer","number",["number","number","number"],[n,a?1:0,r]);return!u&&a&&t.setCallback(r,(_,h,w,S,O,H)=>a(l,h,w,S,O,H)),u}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor,r=["xFunc","xStep","xFinal"],n=new Map;t.create_function=function(a,l,u,_,h,w,S,O){const H=t._sqlite3_malloc(4),B={xFunc:w,xStep:S,xFinal:O};we(H,r.reduce((N,Z,G)=>B[Z]instanceof e?N|1<<G:N,0),"i32");const T=_e("libfunction_create_function","number",["number","string","number","number","number","number","number","number"],[a,l,u,_,H,w?1:0,S?1:0,O?1:0]);if(!T){if(n.has(l)){const N=n.get(l);t.deleteCallback(N)}n.set(l,H),t.setCallback(H,{xFunc:w,xStep:S,xFinal:O})}return T}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let r=0;t.update_hook=function(n,a){r&&(t.deleteCallback(r),t._sqlite3_free(r),r=0),r=t._sqlite3_malloc(4),we(r,a instanceof e?1:0,"i32"),_e("libhook_update_hook","void",["number","number","number"],[n,a?1:0,r]),a&&t.setCallback(r,(l,u,_,h,w,S)=>a(u,_,h,w,S))}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let r=0;t.commit_hook=function(n,a){r&&(t.deleteCallback(r),t._sqlite3_free(r),r=0),r=t._sqlite3_malloc(4),we(r,a instanceof e?1:0,"i32"),_e("libhook_commit_hook","void",["number","number","number"],[n,a?1:0,r]),a&&t.setCallback(r,l=>a())}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let r=0;t.progress_handler=function(n,a,l,u){r&&(t.deleteCallback(r),t._sqlite3_free(r),r=0),r=t._sqlite3_malloc(4),we(r,l instanceof e?1:0,"i32"),_e("libprogress_progress_handler","number",["number","number","number","number"],[n,a,l?1:0,r]),l&&t.setCallback(r,_=>l(u))}})(),(function(){const e=["xOpen","xDelete","xAccess","xFullPathname","xRandomness","xSleep","xCurrentTime","xGetLastError","xCurrentTimeInt64","xClose","xRead","xWrite","xTruncate","xSync","xFileSize","xLock","xUnlock","xCheckReservedLock","xFileControl","xSectorSize","xDeviceCharacteristics","xShmMap","xShmLock","xShmBarrier","xShmUnmap"],r=new Map;t.vfs_register=function(n,a){let l=0,u=0;e.forEach((h,w)=>{n[h]&&(l|=1<<w,n.hasAsyncMethod(h)&&(u|=1<<w))});const _=t._sqlite3_malloc(4);try{const h=_e("libvfs_vfs_register","number",["string","number","number","number","number","number"],[n.name,n.mxPathname,l,u,a?1:0,_]);if(!h){if(r.has(n.name)){const S=r.get(n.name);t.deleteCallback(S)}const w=hr(_,"*");r.set(n.name,w),t.setCallback(w,n)}return h}finally{t._sqlite3_free(_)}}})(),i=g,i}),ba=ga,Ea=new Set(["TransactionInactiveError","InvalidStateError"]),ka=class{path;flags;metadata;fileSize=0;needsMetadataSync=!1;rollback=null;changedPages=new Set;synchronous="full";txOptions={durability:"strict"};constructor(o,i,t){this.path=o,this.flags=i,this.metadata=t}},qa=class wt extends Be(ra){mapIdToFile=new Map;lastError=null;log=null;#t;#r;static async create(i,t,f){const m=new wt(i,t,f);return await m.isReady(),m}constructor(i,t,f={}){super(i,t,f),this.#t=this.#e(f.idbName??i)}async#e(i){this.#r=await Sa.create(i)}close(){this.#r.close()}async isReady(){await super.isReady(),await this.#t}getFilename(i){const t=this.mapIdToFile.get(i).path;return`IDB(${this.name}):${t}`}async jOpen(i,t,f,m){try{const b=new URL(i||Math.random().toString(36).slice(2),"file://").pathname;let k=await this.#r.q(({metadata:I})=>I.get(b));if(!k&&f&Me&&(k={name:b,fileSize:0,version:0},await this.#r.q(({metadata:I})=>I.put(k),"rw")),!k)throw new Error(`File ${b} not found`);const F=new ka(b,f,k);return this.mapIdToFile.set(t,F),m.setInt32(0,f,!0),C}catch(g){return this.lastError=g,or}}async jDelete(i,t){try{const m=new URL(i,"file://").pathname;return this.#r.q(({metadata:g,blocks:b})=>{const k=IDBKeyRange.bound([m,-1/0],[m,1/0]);b.delete(k),g.delete(m)},"rw"),t&&await this.#r.sync(!1),C}catch(f){return this.lastError=f,Pi}}async jAccess(i,t,f){try{const g=new URL(i,"file://").pathname,b=await this.#r.q(({metadata:k})=>k.get(g));return f.setInt32(0,b?1:0,!0),C}catch(m){return this.lastError=m,Li}}async jClose(i){try{const t=this.mapIdToFile.get(i);return this.mapIdToFile.delete(i),t.flags&Wi&&await this.#r.q(({metadata:f,blocks:m})=>{f.delete(t.path),m.delete(IDBKeyRange.bound([t.path,0],[t.path,1/0]))},"rw"),t.needsMetadataSync&&this.#r.q(({metadata:f})=>f.put(t.metadata),"rw"),await this.#r.sync(t.synchronous==="full"),C}catch(t){return this.lastError=t,ji}}async jRead(i,t,f){try{const m=this.mapIdToFile.get(i);let g=0;for(;g<t.byteLength;){const b=f+g,k=await this.#r.q(({blocks:U})=>{const z=IDBKeyRange.bound([m.path,-b],[m.path,1/0]);return U.get(z)});if(!k||k.data.byteLength-k.offset<=b)return t.fill(0,g),lt;const F=t.subarray(g),I=b+k.offset,D=Math.min(Math.max(k.data.byteLength-I,0),F.byteLength);F.set(k.data.subarray(I,I+D)),g+=D}return C}catch(m){return this.lastError=m,Bi}}jWrite(i,t,f){try{const m=this.mapIdToFile.get(i);if(m.flags&ve&&!m.rollback){const F=Object.assign({pendingVersion:m.metadata.version-1},m.metadata);this.#r.q(({metadata:I})=>I.put(F),"rw",m.txOptions),m.rollback=Object.assign({},m.metadata),m.metadata.version--}m.flags&ve&&m.changedPages.add(f);const g=t.slice(),b=m.metadata.version;if(!(f<m.metadata.fileSize)||m.flags&ve||m.flags&Qi){const F={path:m.path,offset:-f,version:b,data:t.slice()};this.#r.q(({blocks:I})=>{I.put(F),m.changedPages.add(f)},"rw",m.txOptions)}else this.#r.q(async({blocks:F})=>{const I=IDBKeyRange.bound([m.path,-f],[m.path,1/0]),D=await F.get(I);D.data.subarray(f+D.offset).set(g),F.put(D)},"rw",m.txOptions);return m.metadata.fileSize<f+t.length&&(m.metadata.fileSize=f+t.length,m.needsMetadataSync=!0),C}catch(m){return this.lastError=m,ct}}jTruncate(i,t){try{const f=this.mapIdToFile.get(i);return t<f.metadata.fileSize&&(this.#r.q(({blocks:m})=>{const g=IDBKeyRange.bound([f.path,-1/0],[f.path,-t,1/0]);m.delete(g)},"rw",f.txOptions),f.metadata.fileSize=t,f.needsMetadataSync=!0),C}catch(f){return this.lastError=f,Mi}}async jSync(i,t){try{const f=this.mapIdToFile.get(i);return f.needsMetadataSync&&(this.#r.q(({metadata:m})=>m.put(f.metadata),"rw",f.txOptions),f.needsMetadataSync=!1),f.flags&ve?f.synchronous==="full"&&await this.#r.sync(!0):await this.#r.sync(f.synchronous==="full"),C}catch(f){return this.lastError=f,Ui}}jFileSize(i,t){try{const f=this.mapIdToFile.get(i);return t.setBigInt64(0,BigInt(f.metadata.fileSize),!0),C}catch(f){return this.lastError=f,Ni}}async jLock(i,t){const f=this.mapIdToFile.get(i),m=await super.jLock(i,t);return t===qe&&(f.metadata=await this.#r.q(async({metadata:g,blocks:b})=>{const k=await g.get(f.path);return k.pendingVersion&&(console.warn(`removing failed transaction ${k.pendingVersion}`),await new Promise((F,I)=>{const D=IDBKeyRange.bound([k.name,-1/0],[k.name,1/0]),U=b.openCursor(D);U.onsuccess=()=>{const z=U.result;z?(z.value.version<k.version&&z.delete(),z.continue()):F()},U.onerror=()=>I(U.error)}),delete k.pendingVersion,g.put(k)),k},"rw",f.txOptions)),m}async jUnlock(i,t){if(t===ye){const f=this.mapIdToFile.get(i);await this.#r.sync(f.synchronous==="full")}return super.jUnlock(i,t)}jFileControl(i,t,f){try{const m=this.mapIdToFile.get(i);switch(t){case Gi:const g=ot(f,4),b=ot(f,8);this.log?.("xFileControl",m.path,"PRAGMA",g,b);const k=I=>{const D=new TextEncoder().encode(I),U=this._module._sqlite3_malloc(D.byteLength);return this._module.HEAPU8.subarray(U,U+D.byteLength).set(D),f.setUint32(0,U,!0),Yr};switch(g.toLowerCase()){case"page_size":if(m.flags&ve&&b&&m.metadata.fileSize)return Yr;break;case"synchronous":if(b)switch(b.toLowerCase()){case"0":case"off":m.synchronous="off",m.txOptions={durability:"relaxed"};break;case"1":case"normal":m.synchronous="normal",m.txOptions={durability:"relaxed"};break;case"2":case"3":case"full":case"extra":m.synchronous="full",m.txOptions={durability:"strict"};break}break;case"write_hint":return super.jFileControl(i,Be.WRITE_HINT_OP_CODE,null)}break;case ft:if(this.log?.("xFileControl",m.path,"SYNC"),m.rollback){const I=Object.assign({},m.metadata),D=m.rollback.fileSize;this.#r.q(({metadata:U,blocks:z})=>{U.put(I);for(const $ of m.changedPages)if($<D){const ie=IDBKeyRange.bound([m.path,-$,I.version],[m.path,-$,1/0],!0);z.delete(ie)}m.changedPages.clear()},"rw",m.txOptions),m.needsMetadataSync=!1,m.rollback=null}break;case _t:return this.log?.("xFileControl",m.path,"BEGIN_ATOMIC_WRITE"),C;case dt:return this.log?.("xFileControl",m.path,"COMMIT_ATOMIC_WRITE"),C;case Yi:this.log?.("xFileControl",m.path,"ROLLBACK_ATOMIC_WRITE"),m.metadata=m.rollback;const F=Object.assign({},m.metadata);return this.#r.q(({metadata:I,blocks:D})=>{I.put(F);for(const U of m.changedPages)D.delete([m.path,-U,F.version-1]);m.changedPages.clear()},"rw",m.txOptions),m.needsMetadataSync=!1,m.rollback=null,C}}catch(m){return this.lastError=m,tr}return super.jFileControl(i,t,f)}jDeviceCharacteristics(i){return 0|Ki|$i}jGetLastError(i){if(this.lastError){console.error(this.lastError);const t=i.subarray(0,i.byteLength-1),{written:f}=new TextEncoder().encodeInto(this.lastError.message,t);i[f]=0}return C}};function ot(o,i){const t=o.getUint32(i,!0);if(t){const f=new Uint8Array(o.buffer,t);return new TextDecoder().decode(f.subarray(0,f.indexOf(0)))}return null}var Sa=class gt{#t;#r=null;#e=Promise.resolve();#n=null;#a=new WeakSet;log=null;static async create(i){const t=await new Promise((f,m)=>{const g=indexedDB.open(i,6);g.onupgradeneeded=async b=>{const k=g.result;switch(b.oldVersion&&console.log(`Upgrading IndexedDB from version ${b.oldVersion}`),b.oldVersion){case 0:k.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"]);case 5:const F=g.transaction;F.objectStore("blocks").deleteIndex("version");const D=k.createObjectStore("metadata",{keyPath:"name"});await new Promise((U,z)=>{let $={};const ie=F.objectStore("blocks").openCursor();ie.onsuccess=()=>{const v=ie.result;if(v){const p=v.value;typeof p.offset!="number"||p.path===$.path&&p.offset===$.offset?v.delete():p.offset===0&&(D.put({name:p.path,fileSize:p.fileSize,version:p.version}),delete p.fileSize,v.update(p)),$=p,v.continue()}else U()},ie.onerror=()=>z(ie.error)});break}},g.onsuccess=()=>f(g.result),g.onerror=()=>m(g.error)});return new gt(t)}constructor(i){this.#t=i}close(){this.#t.close()}q(i,t="ro",f={}){const m=t==="ro"?"readonly":"readwrite",g=Object.assign({durability:"default"},f);return this.#r=(this.#r||Promise.resolve()).then(()=>this.#s(i,m,g)),this.#r}async#s(i,t,f){let m;this.#n&&this.#a.has(this.#n.transaction)&&this.#n.transaction.mode>=t&&this.#n.transaction.durability===f.durability&&(m=this.#n.transaction,this.#n.readyState==="pending"&&await new Promise(g=>{this.#n.addEventListener("success",g,{once:!0}),this.#n.addEventListener("error",g,{once:!0})}));for(let g=0;g<2;++g){m||(await this.#e,m=this.#t.transaction(this.#t.objectStoreNames,t,f),this.log?.("IDBTransaction open",t),this.#a.add(m),this.#e=new Promise((b,k)=>{m.addEventListener("complete",()=>{this.log?.("IDBTransaction complete"),this.#a.delete(m),b()}),m.addEventListener("abort",()=>{this.#a.delete(m),k(new Error("transaction aborted"))})}));try{const b=[...m.objectStoreNames].map(k=>[k,this.proxyStoreOrIndex(m.objectStore(k))]);return await i(Object.fromEntries(b))}catch(b){if(!g&&Ea.has(b.name)){this.log?.(`${b.name}, retrying`),m=null;continue}throw b}}}proxyStoreOrIndex(i){return new Proxy(i,{get:(t,f,m)=>{const g=Reflect.get(t,f,m);return typeof g=="function"?(...b)=>{const k=Reflect.apply(g,t,b);return k instanceof IDBRequest&&!f.endsWith("Cursor")?(this.#n=k,k.addEventListener("error",()=>{console.error(k.error),k.transaction.abort()},{once:!0}),Aa(k)):k}:g}})}async sync(i){this.#r&&(await this.#r,i&&await this.#e,this.reset())}reset(){this.#r=null,this.#e=Promise.resolve(),this.#n=null}};function Aa(o){return new Promise((i,t)=>{o.onsuccess=()=>i(o.result),o.onerror=()=>t(o.error)})}async function Ia(o,i={}){const{url:t,lockPolicy:f="shared+hint",lockTimeout:m=1/0,...g}=i,b=await ba(t?{locateFile:()=>t}:void 0),k=o.endsWith(".db")?o:`${o}.db`,F={idbName:k,lockPolicy:f,lockTimeout:m};return{path:k,sqliteModule:b,vfsFn:qa.create,vfsOptions:F,...g}}export{Fa as i,Ia as u,Ta as w};
