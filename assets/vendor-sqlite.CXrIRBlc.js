var C=0,Yt=1,fe=5,rt=10,st=12,ot=14,Xt=21,Ze=25,xi=27,nt=100,Di=101,Li=3338,Oi=3594,ji=4106,Pi=2570,Ni=1802,Ui=1034,zi=3850,Bi=266,lr=522,Mi=1546,Hi=2058,cr=778,ur=1,lt=2,Me=4,Wi=8,Vi=64,ve=256,Qi=512,ye=0,Se=1,Ue=2,ze=4,$i=2048,Ki=16384,Gi=14,fr=21,_r=31,dr=32,Yi=33,Jt=1,Zt=2,er=3,tr=4,rr=5,Xi=2,Ji=512,Zi=class{name;mxPathname=64;_module;constructor(o,s){this.name=o,this._module=s}close(){}isReady(){return!0}hasAsyncMethod(o){return!1}xOpen(o,s,r,f,m){return ot}xDelete(o,s,r){return C}xAccess(o,s,r,f){return C}xFullPathname(o,s,r,f){return C}xGetLastError(o,s,r){return C}xClose(o){return C}xRead(o,s,r,f,m){return C}xWrite(o,s,r,f,m){return C}xTruncate(o,s,r){return C}xSync(o,s){return C}xFileSize(o,s){return C}xLock(o,s){return C}xUnlock(o,s){return C}xCheckReservedLock(o,s){return C}xFileControl(o,s,r){return st}xSectorSize(o){return Ji}xDeviceCharacteristics(o){return 0}},ea=Object.getPrototypeOf(async function(){}).constructor,ta=class extends Zi{constructor(o,s){super(o,s)}hasAsyncMethod(o){const s=`j${o.slice(1)}`;return this[s]instanceof ea}getFilename(o){throw new Error("unimplemented")}jOpen(o,s,r,f){return ot}jDelete(o,s){return C}jAccess(o,s,r){return C}jFullPathname(o,s){const{read:r,written:f}=new TextEncoder().encodeInto(o,s);return r<o.length||f>=s.length?rt:(s[f]=0,C)}jGetLastError(o){return C}jClose(o){return C}jRead(o,s,r){return s.fill(0),lr}jWrite(o,s,r){return cr}jTruncate(o,s){return C}jSync(o,s){return C}jFileSize(o,s){return C}jLock(o,s){return C}jUnlock(o,s){return C}jCheckReservedLock(o,s){return s.setInt32(0,0,!0),C}jFileControl(o,s,r){return st}jSectorSize(o){return super.xSectorSize(o)}jDeviceCharacteristics(o){return 0}xOpen(o,s,r,f,m){const g=this.#e(s,f),b=this.#r("Int32",m);return this.log?.("jOpen",g,r,"0x"+f.toString(16)),this.jOpen(g,r,f,b)}xDelete(o,s,r){const f=this._module.UTF8ToString(s);return this.log?.("jDelete",f,r),this.jDelete(f,r)}xAccess(o,s,r,f){const m=this._module.UTF8ToString(s),g=this.#r("Int32",f);return this.log?.("jAccess",m,r),this.jAccess(m,r,g)}xFullPathname(o,s,r,f){const m=this._module.UTF8ToString(s),g=this._module.HEAPU8.subarray(f,f+r);return this.log?.("jFullPathname",m,r),this.jFullPathname(m,g)}xGetLastError(o,s,r){const f=this._module.HEAPU8.subarray(r,r+s);return this.log?.("jGetLastError",s),this.jGetLastError(f)}xClose(o){return this.log?.("jClose",o),this.jClose(o)}xRead(o,s,r,f,m){const g=this.#t(s,r),b=et(f,m);return this.log?.("jRead",o,r,b),this.jRead(o,g,b)}xWrite(o,s,r,f,m){const g=this.#t(s,r),b=et(f,m);return this.log?.("jWrite",o,g,b),this.jWrite(o,g,b)}xTruncate(o,s,r){const f=et(s,r);return this.log?.("jTruncate",o,f),this.jTruncate(o,f)}xSync(o,s){return this.log?.("jSync",o,s),this.jSync(o,s)}xFileSize(o,s){const r=this.#r("BigInt64",s);return this.log?.("jFileSize",o),this.jFileSize(o,r)}xLock(o,s){return this.log?.("jLock",o,s),this.jLock(o,s)}xUnlock(o,s){return this.log?.("jUnlock",o,s),this.jUnlock(o,s)}xCheckReservedLock(o,s){const r=this.#r("Int32",s);return this.log?.("jCheckReservedLock",o),this.jCheckReservedLock(o,r)}xFileControl(o,s,r){const f=new DataView(this._module.HEAPU8.buffer,this._module.HEAPU8.byteOffset+r);return this.log?.("jFileControl",o,s,f),this.jFileControl(o,s,f)}xSectorSize(o){return this.log?.("jSectorSize",o),this.jSectorSize(o)}xDeviceCharacteristics(o){return this.log?.("jDeviceCharacteristics",o),this.jDeviceCharacteristics(o)}#r(o,s){return new na(this._module,s,o)}#t(o,s){return new ra(this._module,o,s)}#e(o,s){if(s&Vi){let r=o,f=1;const m=[];for(;f;){const g=this._module.HEAPU8[r++];if(g)m.push(g);else switch(this._module.HEAPU8[r]||(f=null),f){case 1:m.push(63),f=2;break;case 2:m.push(61),f=3;break;case 3:m.push(38),f=2;break}}return new TextDecoder().decode(new Uint8Array(m))}return o?this._module.UTF8ToString(o):null}};function et(o,s){return s*4294967296+o+(o<0?2**32:0)}var ra=class{#r;#t=new Uint8Array;get#e(){return this.#t.buffer.byteLength===0&&(this.#t=this.#r.HEAPU8.subarray(this.byteOffset,this.byteOffset+this.byteLength)),this.#t}constructor(o,s,r){this.#r=o,this.byteOffset=s,this.length=this.byteLength=r}get buffer(){return this.#e.buffer}at(o){return this.#e.at(o)}copyWithin(o,s,r){this.#e.copyWithin(o,s,r)}entries(){return this.#e.entries()}every(o){return this.#e.every(o)}fill(o,s,r){this.#e.fill(o,s,r)}filter(o){return this.#e.filter(o)}find(o){return this.#e.find(o)}findIndex(o){return this.#e.findIndex(o)}findLast(o){return this.#e.findLast(o)}findLastIndex(o){return this.#e.findLastIndex(o)}forEach(o){this.#e.forEach(o)}includes(o,s){return this.#e.includes(o,s)}indexOf(o,s){return this.#e.indexOf(o,s)}join(o){return this.#e.join(o)}keys(){return this.#e.keys()}lastIndexOf(o,s){return this.#e.lastIndexOf(o,s)}map(o){return this.#e.map(o)}reduce(o,s){return this.#e.reduce(o,s)}reduceRight(o,s){return this.#e.reduceRight(o,s)}reverse(){this.#e.reverse()}set(o,s){this.#e.set(o,s)}slice(o,s){return this.#e.slice(o,s)}some(o){return this.#e.some(o)}sort(o){this.#e.sort(o)}subarray(o,s){return this.#e.subarray(o,s)}toLocaleString(o,s){return this.#e.toLocaleString(o,s)}toReversed(){return this.#e.toReversed()}toSorted(o){return this.#e.toSorted(o)}toString(){return this.#e.toString()}values(){return this.#e.values()}with(o,s){return this.#e.with(o,s)}[Symbol.iterator](){return this.#e[Symbol.iterator]()}},na=class{#r;#t;#e=new DataView(new ArrayBuffer(0));get#n(){return this.#e.buffer.byteLength===0&&(this.#e=new DataView(this.#r.HEAPU8.buffer,this.#r.HEAPU8.byteOffset+this.byteOffset)),this.#e}constructor(o,s,r){this.#r=o,this.byteOffset=s,this.#t=r}get buffer(){return this.#n.buffer}get byteLength(){return this.#t==="Int32"?4:8}getInt32(o,s){if(this.#t!=="Int32")throw new Error("invalid type");if(!s)throw new Error("must be little endian");return this.#n.getInt32(o,s)}setInt32(o,s,r){if(this.#t!=="Int32")throw new Error("invalid type");if(!r)throw new Error("must be little endian");this.#n.setInt32(o,s,r)}getBigInt64(o,s){if(this.#t!=="BigInt64")throw new Error("invalid type");if(!s)throw new Error("must be little endian");return this.#n.getBigInt64(o,s)}setBigInt64(o,s,r){if(this.#t!=="BigInt64")throw new Error("invalid type");if(!r)throw new Error("must be little endian");this.#n.setBigInt64(o,s,r)}},nr=0x7fffffffffffffffn,ir=-0x8000000000000000n,tt=Object.getPrototypeOf(async function(){}).constructor,Re=class extends Error{constructor(o,s){super(o),this.code=s}},xe=!0;function ia(o){const s={};o.retryOps=[];const r=o._getSqliteFree(),f=o._malloc(8),m=[f,f+4],g=new TextEncoder;function b(v){if(typeof v!="string")return 0;const p=g.encode(v),d=o._sqlite3_malloc(p.byteLength+1);return o.HEAPU8.set(p,d),o.HEAPU8[d+p.byteLength]=0,d}function k(v,p){return BigInt(p)<<32n|BigInt(v)&0xffffffffn}const F=(function(){const v=BigInt(Number.MAX_SAFE_INTEGER)>>32n,p=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(d,y){return y>v||y<p?k(d,y):y*4294967296+(d&2147483647)-(d&2147483648)}})(),I=new Set;function D(v){if(!I.has(v))throw new Re("not a database",Xt)}const U=new Map;function z(v){if(!U.has(v))throw new Re("not a statement",Xt)}s.bind_collection=function(v,p){z(v);const d=Array.isArray(p),y=s.bind_parameter_count(v);for(let E=1;E<=y;++E){const L=d?E-1:s.bind_parameter_name(v,E),R=p[L];R!==void 0&&s.bind(v,E,R)}return C},s.bind=function(v,p,d){switch(z(v),typeof d){case"number":return d===(d|0)?s.bind_int(v,p,d):s.bind_double(v,p,d);case"string":return s.bind_text(v,p,d);case"boolean":return s.bind_int(v,p,d?1:0);default:return d instanceof Uint8Array||Array.isArray(d)?s.bind_blob(v,p,d):d===null?s.bind_null(v,p):typeof d=="bigint"?s.bind_int64(v,p,d):d===void 0?xi:s.bind_null(v,p)}},s.bind_blob=(function(){const v="sqlite3_bind_blob",p=o.cwrap(v,...P("nnnnn:n"));return function(d,y,E){z(d);const L=E.byteLength??E.length,R=o._sqlite3_malloc(L);o.HEAPU8.subarray(R).set(E);const Q=p(d,y,R,L,r);return $(v,Q,U.get(d))}})(),s.bind_parameter_count=(function(){const p=o.cwrap("sqlite3_bind_parameter_count",...P("n:n"));return function(d){return z(d),p(d)}})(),s.bind_double=(function(){const v="sqlite3_bind_double",p=o.cwrap(v,...P("nnn:n"));return function(d,y,E){z(d);const L=p(d,y,E);return $(v,L,U.get(d))}})(),s.bind_int=(function(){const v="sqlite3_bind_int",p=o.cwrap(v,...P("nnn:n"));return function(d,y,E){if(z(d),E>2147483647||E<-2147483648)return Ze;const L=p(d,y,E);return $(v,L,U.get(d))}})(),s.bind_int64=(function(){const v="sqlite3_bind_int64",p=o.cwrap(v,...P("nnnn:n"));return function(d,y,E){if(z(d),E>nr||E<ir)return Ze;const L=E&0xffffffffn,R=E>>32n,Q=p(d,y,Number(L),Number(R));return $(v,Q,U.get(d))}})(),s.bind_null=(function(){const v="sqlite3_bind_null",p=o.cwrap(v,...P("nn:n"));return function(d,y){z(d);const E=p(d,y);return $(v,E,U.get(d))}})(),s.bind_parameter_name=(function(){const p=o.cwrap("sqlite3_bind_parameter_name",...P("n:s"));return function(d,y){return z(d),p(d,y)}})(),s.bind_text=(function(){const v="sqlite3_bind_text",p=o.cwrap(v,...P("nnnnn:n"));return function(d,y,E){z(d);const L=b(E),R=p(d,y,L,-1,r);return $(v,R,U.get(d))}})(),s.changes=(function(){const p=o.cwrap("sqlite3_changes",...P("n:n"));return function(d){return D(d),p(d)}})(),s.clear_bindings=(function(){const v="sqlite3_clear_bindings",p=o.cwrap(v,...P("n:n"));return function(d){z(d);const y=p(d);return $(v,y,U.get(d))}})(),s.close=(function(){const v="sqlite3_close",p=o.cwrap(v,...P("n:n"),{async:xe});return async function(d){D(d);const y=await p(d);return I.delete(d),$(v,y,d)}})(),s.column=function(v,p){z(v);const d=s.column_type(v,p);switch(d){case tr:return s.column_blob(v,p);case Zt:return s.column_double(v,p);case Jt:const y=s.column_int(v,p),E=o.getTempRet0();return F(y,E);case rr:return null;case er:return s.column_text(v,p);default:throw new Re("unknown type",d)}},s.column_blob=(function(){const p=o.cwrap("sqlite3_column_blob",...P("nn:n"));return function(d,y){z(d);const E=s.column_bytes(d,y),L=p(d,y);return o.HEAPU8.subarray(L,L+E)}})(),s.column_bytes=(function(){const p=o.cwrap("sqlite3_column_bytes",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),s.column_count=(function(){const p=o.cwrap("sqlite3_column_count",...P("n:n"));return function(d){return z(d),p(d)}})(),s.column_double=(function(){const p=o.cwrap("sqlite3_column_double",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),s.column_int=(function(){const p=o.cwrap("sqlite3_column_int64",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),s.column_int64=(function(){const p=o.cwrap("sqlite3_column_int64",...P("nn:n"));return function(d,y){z(d);const E=p(d,y),L=o.getTempRet0();return k(E,L)}})(),s.column_name=(function(){const p=o.cwrap("sqlite3_column_name",...P("nn:s"));return function(d,y){return z(d),p(d,y)}})(),s.column_names=function(v){const p=[],d=s.column_count(v);for(let y=0;y<d;++y)p.push(s.column_name(v,y));return p},s.column_text=(function(){const p=o.cwrap("sqlite3_column_text",...P("nn:s"));return function(d,y){return z(d),p(d,y)}})(),s.column_type=(function(){const p=o.cwrap("sqlite3_column_type",...P("nn:n"));return function(d,y){return z(d),p(d,y)}})(),s.create_function=function(v,p,d,y,E,L,R,Q){D(v);function Y(S){return S instanceof tt?(async(W,ne,te)=>S(W,o.HEAP32.subarray(te/4,te/4+ne))):((W,ne,te)=>S(W,o.HEAP32.subarray(te/4,te/4+ne)))}const J=o.create_function(v,p,d,y,E,L&&Y(L),R&&Y(R),Q);return $("sqlite3_create_function",J,v)},s.data_count=(function(){const p=o.cwrap("sqlite3_data_count",...P("n:n"));return function(d){return z(d),p(d)}})(),s.exec=async function(v,p,d){for await(const y of s.statements(v,p)){let E;for(;await s.step(y)===nt;)if(d){E=E??s.column_names(y);const L=s.row(y);await d(L,E)}}return C},s.finalize=(function(){const p=o.cwrap("sqlite3_finalize",...P("n:n"),{async:xe});return async function(d){const y=await p(d);return U.delete(d),y}})(),s.get_autocommit=(function(){const p=o.cwrap("sqlite3_get_autocommit",...P("n:n"));return function(d){return p(d)}})(),s.libversion=(function(){const p=o.cwrap("sqlite3_libversion",...P(":s"));return function(){return p()}})(),s.libversion_number=(function(){const p=o.cwrap("sqlite3_libversion_number",...P(":n"));return function(){return p()}})(),s.limit=(function(){const p=o.cwrap("sqlite3_limit",...P("nnn:n"));return function(d,y,E){return p(d,y,E)}})(),s.open_v2=(function(){const v="sqlite3_open_v2",p=o.cwrap(v,...P("snnn:n"),{async:xe});return async function(d,y,E){y=y||Me|lt,E=b(E);try{const L=await ie(()=>p(d,m[0],y,E)),R=o.getValue(m[0],"*");return I.add(R),o.ccall("RegisterExtensionFunctions","void",["number"],[R]),$(v,L),R}finally{o._sqlite3_free(E)}}})(),s.progress_handler=function(v,p,d,y){D(v),o.progress_handler(v,p,d,y)},s.reset=(function(){const v="sqlite3_reset",p=o.cwrap(v,...P("n:n"),{async:xe});return async function(d){z(d);const y=await p(d);return $(v,y,U.get(d))}})(),s.result=function(v,p){switch(typeof p){case"number":p===(p|0)?s.result_int(v,p):s.result_double(v,p);break;case"string":s.result_text(v,p);break;default:if(p instanceof Uint8Array||Array.isArray(p))s.result_blob(v,p);else if(p===null)s.result_null(v);else{if(typeof p=="bigint")return s.result_int64(v,p);s.result_null(v)}break}},s.result_blob=(function(){const p=o.cwrap("sqlite3_result_blob",...P("nnnn:n"));return function(d,y){const E=y.byteLength??y.length,L=o._sqlite3_malloc(E);o.HEAPU8.subarray(L).set(y),p(d,L,E,r)}})(),s.result_double=(function(){const p=o.cwrap("sqlite3_result_double",...P("nn:n"));return function(d,y){p(d,y)}})(),s.result_int=(function(){const p=o.cwrap("sqlite3_result_int",...P("nn:n"));return function(d,y){p(d,y)}})(),s.result_int64=(function(){const p=o.cwrap("sqlite3_result_int64",...P("nnn:n"));return function(d,y){if(y>nr||y<ir)return Ze;const E=y&0xffffffffn,L=y>>32n;p(d,Number(E),Number(L))}})(),s.result_null=(function(){const p=o.cwrap("sqlite3_result_null",...P("n:n"));return function(d){p(d)}})(),s.result_text=(function(){const p=o.cwrap("sqlite3_result_text",...P("nnnn:n"));return function(d,y){const E=b(y);p(d,E,-1,r)}})(),s.row=function(v){const p=[],d=s.data_count(v);for(let y=0;y<d;++y){const E=s.column(v,y);p.push(E?.buffer===o.HEAPU8.buffer?E.slice():E)}return p},s.set_authorizer=function(v,p,d){D(v);function y(R,Q,Y,J,S,W){return[R,Q,o.UTF8ToString(Y),o.UTF8ToString(J),o.UTF8ToString(S),o.UTF8ToString(W)]}function E(R){return R instanceof tt?(async(Q,Y,J,S,W,ne)=>R(...y(Q,Y,J,S,W,ne))):((Q,Y,J,S,W,ne)=>R(...y(Q,Y,J,S,W,ne)))}const L=o.set_authorizer(v,E(p),d);return $("sqlite3_set_authorizer",L,v)},s.sql=(function(){const p=o.cwrap("sqlite3_sql",...P("n:s"));return function(d){return z(d),p(d)}})(),s.statements=function(v,p,d={}){const y=o.cwrap("sqlite3_prepare_v3","number",["number","number","number","number","number","number"],{async:!0});return(async function*(){const E=[];try{let R=function(){te&&!d.unscoped&&s.finalize(te),te=0};var L=R;const Q=g.encode(p),Y=Q.byteLength-Q.byteLength%4+12,J=o._sqlite3_malloc(Y),S=J+Q.byteLength+1;E.push(()=>o._sqlite3_free(J)),o.HEAPU8.set(Q,J),o.HEAPU8[S-1]=0;const W=J+Y-8,ne=J+Y-4;let te;E.push(R),o.setValue(ne,J,"*");do{R();const De=o.getValue(ne,"*"),Le=await ie(()=>y(v,De,S-ne,d.flags||0,W,ne));Le!==C&&$("sqlite3_prepare_v3",Le,v),te=o.getValue(W,"*"),te&&(U.set(te,v),yield te)}while(te)}finally{for(;E.length;)E.pop()()}})()},s.step=(function(){const v="sqlite3_step",p=o.cwrap(v,...P("n:n"),{async:xe});return async function(d){z(d);const y=await ie(()=>p(d));return $(v,y,U.get(d),[nt,Di])}})(),s.commit_hook=function(v,p){D(v),o.commit_hook(v,p)},s.update_hook=function(v,p){D(v);function d(E,L,R,Q,Y){return[E,o.UTF8ToString(L),o.UTF8ToString(R),k(Q,Y)]}function y(E){return E instanceof tt?(async(L,R,Q,Y,J)=>E(...d(L,R,Q,Y,J))):((L,R,Q,Y,J)=>E(...d(L,R,Q,Y,J)))}o.update_hook(v,y(p))},s.value=function(v){const p=s.value_type(v);switch(p){case tr:return s.value_blob(v);case Zt:return s.value_double(v);case Jt:const d=s.value_int(v),y=o.getTempRet0();return F(d,y);case rr:return null;case er:return s.value_text(v);default:throw new Re("unknown type",p)}},s.value_blob=(function(){const p=o.cwrap("sqlite3_value_blob",...P("n:n"));return function(d){const y=s.value_bytes(d),E=p(d);return o.HEAPU8.subarray(E,E+y)}})(),s.value_bytes=(function(){const p=o.cwrap("sqlite3_value_bytes",...P("n:n"));return function(d){return p(d)}})(),s.value_double=(function(){const p=o.cwrap("sqlite3_value_double",...P("n:n"));return function(d){return p(d)}})(),s.value_int=(function(){const p=o.cwrap("sqlite3_value_int64",...P("n:n"));return function(d){return p(d)}})(),s.value_int64=(function(){const p=o.cwrap("sqlite3_value_int64",...P("n:n"));return function(d){const y=p(d),E=o.getTempRet0();return k(y,E)}})(),s.value_text=(function(){const p=o.cwrap("sqlite3_value_text",...P("n:s"));return function(d){return p(d)}})(),s.value_type=(function(){const p=o.cwrap("sqlite3_value_type",...P("n:n"));return function(d){return p(d)}})(),s.vfs_register=function(v,p){const d=o.vfs_register(v,p);return $("sqlite3_vfs_register",d)};function $(v,p,d=null,y=[C]){if(y.includes(p))return p;const E=d?o.ccall("sqlite3_errmsg","string",["number"],[d]):v;throw new Re(E,p)}async function ie(v){let p;do o.retryOps.length&&(await Promise.all(o.retryOps),o.retryOps=[]),p=await v();while(p&&o.retryOps.length);return p}return s}function P(o){const s=[],r=o.match(/([ns@]*):([nsv@])/);switch(r[2]){case"n":s.push("number");break;case"s":s.push("string");break;case"v":s.push(null);break}const f=[];for(let m of r[1])switch(m){case"n":f.push("number");break;case"s":f.push("string");break}return s.push(f),s}async function le(o){if(await o!==C)throw new Error(`Error code: ${await o}`)}function it(){return new DataView(new ArrayBuffer(4))}async function hr(o,s,r){let f;return o.releaser instanceof FileSystemDirectoryHandle?[f]=await o.getPathComponents(s,r):f=await navigator.storage.getDirectory(),await f.getFileHandle(s,{create:r})}function pr(o){return"releaser"in o}function aa(o,s,r){const f=[];let m,g;new Promise((I,D)=>{m=I,g=D}).finally(async()=>{for(;f.length;)await f.pop()()});const b=Math.floor(Math.random()*4294967296);let k=0,F=0;return new ReadableStream({async start(I){try{const D=ve|ur;await le(o.jOpen(s,b,D,it())),f.push(()=>o.jClose(b)),await le(o.jLock(b,Se)),f.push(()=>o.jUnlock(b,ye));const U=new DataView(new ArrayBuffer(8));await le(o.jFileSize(b,U)),F=Number(U.getBigUint64(0,!0))}catch(D){I.error(D),g(D)}},async pull(I){if(F===0){I.close(),m();return}try{const D=Math.min(F,65536),U=new Uint8Array(D);await le(o.jRead(b,U,k)),I.enqueue(U),k+=D,F-=D,F===0&&(I.close(),m())}catch(D){I.error(D),g(D)}},cancel(I){g(new Error(I))}})}async function sa(o,s){const r=aa(o,s),f=[],m=r.getReader();let g=0;try{for(;;){const{done:F,value:I}=await m.read();if(F)break;f.push(I),g+=I.length}}finally{m.releaseLock()}const b=new Uint8Array(g);let k=0;for(const F of f)b.set(F,k),k+=F.length;return b}async function oa(o,s){return await hr(o,s).then(r=>r.getFile()).then(r=>r.arrayBuffer()).then(r=>new Uint8Array(r))}async function la(o,s){return pr(o)?await oa(o,s):await sa(o,s)}var ar=new Uint8Array([83,81,76,105,116,101,32,102,111,114,109,97,116,32,51,0]);async function mr(o){const s=await at(o,32);for(let r=0;r<ar.length;r++)if(s[r]!==ar[r])throw new Error("Not a SQLite database file");return s}async function at(o,s){const r=new Uint8Array(s);let f=0;if(o.leftover){const m=Math.min(s,o.leftover.length);r.set(o.leftover.subarray(0,m),0),f+=m,m<o.leftover.length?o.leftover=o.leftover.subarray(m):o.leftover=null}for(;f<s;){const{done:m,value:g}=await o.read();if(m){if(f<s)throw new Error(`Unexpected EOF: Expected ${s}, got ${f}`);break}const b=Math.min(s-f,g.length);r.set(g.subarray(0,b),f),f+=b,b<g.length&&(o.leftover=g.subarray(b))}return r}async function*ca(o){const s=o.getReader();try{const r=await mr(s),f=new DataView(r.buffer),m=f.getUint16(16),g=m===1?65536:m,b=f.getUint32(28),k=await at(s,g-32),F=new Uint8Array(g);F.set(r),F.set(k,32),yield F;for(let D=1;D<b;D++)yield await at(s,g);const{done:I}=await s.read();if(!I)throw new Error("Unexpected data after last page")}finally{s.releaseLock()}}async function ua(o,s,r){const f=[];try{const g=ve|Me|lt;await le(o.jOpen(s,1234,g,it())),f.push(()=>o.jClose(1234)),await le(o.jLock(1234,Se)),f.push(()=>o.jUnlock(1234,ye)),await le(o.jLock(1234,Ue)),f.push(()=>o.jUnlock(1234,Se)),await le(o.jLock(1234,ze));const b=it();await o.jFileControl(1234,_r,b),await le(o.jTruncate(1234,0));let k=0;for await(const F of ca(r))await le(o.jWrite(1234,F,k)),k+=F.byteLength;await o.jFileControl(1234,dr,b),await o.jFileControl(1234,fr,b),await o.jSync(1234,Xi)}finally{for(;f.length;)await f.pop()()}}async function fa(o,s,r){const f=await hr(o,s,!0),[m,g]=r.tee(),b=m.getReader();try{await mr(b)}finally{b.releaseLock()}const k=await f.createWritable();await g.pipeTo(k)}async function vr(o,s,r){const f=r instanceof globalThis.File?r.stream():r;pr(o)?await fa(o,s,f):await ua(o,s,f)}function Ta(o,s){return{...s,beforeOpen:(r,f)=>vr(r,f,o)}}async function _a(o){await o.sqlite.close(o.pointer)}function da(o){return o.sqliteModule._sqlite3_changes(o.pointer)}function ha(o){return o.sqliteModule._sqlite3_last_insert_rowid(o.pointer)}async function yr(o,s,r,f){const{sqlite:m,pointer:g}=o;for await(const b of m.statements(g,r)){f&&m.bind_collection(b,f);const k=m.column_names(b);for(;await m.step(b)===nt;){const F=m.row(b);s(Object.fromEntries(k.map((I,D)=>[I,F[D]])))}}}async function pa(o,s,r){const f=[];return await yr(o,m=>f.push(m),s,r),f}function ma(o){return o?ur:lt|Me}async function Fa(o){const s=await va(o);return{...s,changes:()=>da(s),close:()=>_a(s),dump:()=>la(s.vfs,s.path),lastInsertRowId:()=>ha(s),run:(...r)=>pa(s,...r),stream:(...r)=>yr(s,...r),sync:r=>vr(s.vfs,s.path,r)}}async function va(o){const{path:s,sqliteModule:r,vfsFn:f,vfsOptions:m,readonly:g,beforeOpen:b}=await o,k=ia(r),F=await f(s,r,m);k.vfs_register(F,!0),await b?.(F,s);const I=await k.open_v2(s,ma(g));return{db:I,path:s,pointer:I,sqlite:k,sqliteModule:r,vfs:F}}var Ne={mode:"shared"},ya={ifAvailable:!0,mode:"shared"},sr={ifAvailable:!0,mode:"exclusive"},wa=["exclusive","shared","shared+hint"],Be=o=>class extends o{#r={lockPolicy:"exclusive",lockTimeout:1/0};#t=new Map;constructor(s,r,f){if(super(s,r,f),Object.assign(this.#r,f),wa.indexOf(this.#r.lockPolicy)===-1)throw new Error(`WebLocksMixin: invalid lock mode: ${f.lockPolicy}`)}async jLock(s,r){try{const f=this.#e(s);if(r<=f.type)return C;switch(this.#r.lockPolicy){case"exclusive":return await this.#n(f,r);case"shared":case"shared+hint":return await this.#o(f,r)}}catch{return zi}}async jUnlock(s,r){try{const f=this.#e(s);if(!(r<f.type))return C;switch(this.#r.lockPolicy){case"exclusive":return await this.#a(f,r);case"shared":case"shared+hint":return await this.#l(f,r)}}catch{return Hi}}async jCheckReservedLock(s,r){try{const f=this.#e(s);switch(this.#r.lockPolicy){case"exclusive":return this.#s(f,r);case"shared":case"shared+hint":return await this.#c(f,r)}}catch{return Oi}return r.setInt32(0,0,!0),C}jFileControl(s,r,f){if(r===Be.WRITE_HINT_OP_CODE&&this.#r.lockPolicy==="shared+hint"){const m=this.#e(s);m.writeHint=!0}return st}#e(s){let r=this.#t.get(s);return r||(r={baseName:this.getFilename(s),type:ye,writeHint:!1},this.#t.set(s,r)),r}async#n(s,r){return!s.access&&!await this.#i(s,"access")?fe:(s.type=r,C)}#a(s,r){return r===ye&&s.access?.(),s.type=r,C}#s(s,r){return r.setInt32(0,0,!0),C}async#o(s,r){switch(s.type){case ye:switch(r){case Se:if(s.writeHint&&!await this.#i(s,"hint"))return fe;if(!await this.#i(s,"gate",Ne))return s.hint?.(),fe;await this.#i(s,"access",Ne),s.gate();break;default:throw new Error("unsupported lock transition")}break;case Se:switch(r){case Ue:if(this.#r.lockPolicy==="shared+hint"&&!s.hint&&!await this.#i(s,"hint",sr))return fe;if(!await this.#i(s,"reserved",sr))return s.hint?.(),fe;s.access();break;case ze:if(!await this.#i(s,"gate"))return fe;if(s.access(),!await this.#i(s,"access"))return s.gate(),fe;break;default:throw new Error("unsupported lock transition")}break;case Ue:switch(r){case ze:if(!await this.#i(s,"gate"))return fe;if(!await this.#i(s,"access"))return s.gate(),fe;break;default:throw new Error("unsupported lock transition")}break}return s.type=r,C}async#l(s,r){if(r===ye)s.access?.(),s.gate?.(),s.reserved?.(),s.hint?.(),s.writeHint=!1;else switch(s.type){case ze:s.access(),await this.#i(s,"access",Ne),s.gate(),s.reserved?.(),s.hint?.();break;case Ue:await this.#i(s,"access",Ne),s.reserved(),s.hint?.();break}return s.type=r,C}async#c(s,r){return await this.#i(s,"reserved",ya)?(s.reserved(),r.setInt32(0,0,!0)):r.setInt32(0,1,!0),C}#i(s,r,f={}){return new Promise(m=>{if(!f.ifAvailable&&this.#r.lockTimeout<1/0){const b=new AbortController;f=Object.assign({},f,{signal:b.signal}),setTimeout(()=>{b.abort(),m?.(!1)},this.#r.lockTimeout)}const g=`lock##${s.baseName}##${r}`;navigator.locks.request(g,f,b=>{if(b)return new Promise(k=>{s[r]=()=>{k(),s[r]=null},m(!0),m=null});s[r]=null,m(!1),m=null}).catch(b=>{if(b.name!=="AbortError")throw b})})}};Be.WRITE_HINT_OP_CODE=-9999;var ga=(async function(o={}){var s,r=o,f,m,g=new Promise((e,t)=>{f=e,m=t}),b=typeof window=="object",k=typeof WorkerGlobalScope<"u";typeof process=="object"&&process.versions?.node&&process.type!="renderer";var F="./this.program",I=(e,t)=>{throw t},D=import.meta.url,U="";function z(e){return r.locateFile?r.locateFile(e,U):U+e}var $,ie;if(b||k){try{U=new URL(".",D).href}catch{}k&&(ie=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),$=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}var v=(()=>{}).bind(console),p=(()=>{}).bind(console),d,y,E=!1,L,R,Q,Y,J,S,W,ne,te;function De(){var e=y.buffer;R=new Int8Array(e),Y=new Int16Array(e),r.HEAPU8=Q=new Uint8Array(e),J=new Uint16Array(e),r.HEAP32=S=new Int32Array(e),W=new Uint32Array(e),ne=new Float32Array(e),te=new Float64Array(e)}function Le(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Rr(r.preRun.shift());ft(dt)}function br(){!r.noFSInit&&!a.initialized&&a.init(),c.qa(),a.ignorePermissions=!1}function Er(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Cr(r.postRun.shift());ft(_t)}var de=0,qe=null;function ct(e){de++,r.monitorRunDependencies?.(de)}function He(e){if(de--,r.monitorRunDependencies?.(de),de==0&&qe){var t=qe;qe=null,t()}}function ce(e){r.onAbort?.(e),e="Aborted("+e+")",p(e),E=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw m(t),t}var We;function kr(){return r.locateFile?z("wa-sqlite-async.wasm"):new URL("/gioibon/assets/wa-sqlite-async.CTFr_gWm.wasm",import.meta.url).href}function Sr(e){if(e==We&&d)return new Uint8Array(d);if(ie)return ie(e);throw"both async and sync fetching of the wasm failed"}async function qr(e){if(!d)try{var t=await $(e);return new Uint8Array(t)}catch{}return Sr(e)}async function Ar(e,t){try{var n=await qr(e),i=await WebAssembly.instantiate(n,t);return i}catch(l){p(`failed to asynchronously prepare wasm: ${l}`),ce(l)}}async function Tr(e,t,n){if(!e&&typeof WebAssembly.instantiateStreaming=="function")try{var i=fetch(t,{credentials:"same-origin"}),l=await WebAssembly.instantiateStreaming(i,n);return l}catch(u){p(`wasm streaming compile failed: ${u}`),p("falling back to ArrayBuffer instantiation")}return Ar(t,n)}function Fr(){return{a:mi}}async function Ir(){function e(u,_){return c=u.exports,c=A.instrumentWasmExports(c),y=c.pa,De(),be=c.jf,He(),c}ct();function t(u){return e(u.instance)}var n=Fr();if(r.instantiateWasm)return new Promise((u,_)=>{r.instantiateWasm(n,(h,w)=>{u(e(h))})});We??=kr();try{var i=await Tr(d,We,n),l=t(i);return l}catch(u){return m(u),Promise.reject(u)}}var x,X;class ut{name="ExitStatus";constructor(t){this.message=`Program terminated with exit(${t})`,this.status=t}}var ft=e=>{for(;e.length>0;)e.shift()(r)},_t=[],Cr=e=>_t.push(e),dt=[],Rr=e=>dt.push(e);function ht(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return R[e];case"i8":return R[e];case"i16":return Y[e>>1];case"i32":return S[e>>2];case"i64":ce("to do getValue(i64) use WASM_BIGINT");case"float":return ne[e>>2];case"double":return te[e>>3];case"*":return W[e>>2];default:ce(`invalid type for getValue: ${t}`)}}var Ve=!0;function we(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":R[e]=t;break;case"i8":R[e]=t;break;case"i16":Y[e>>1]=t;break;case"i32":S[e>>2]=t;break;case"i64":ce("to do setValue(i64) use WASM_BIGINT");case"float":ne[e>>2]=t;break;case"double":te[e>>3]=t;break;case"*":W[e>>2]=t;break;default:ce(`invalid type for setValue: ${n}`)}}var xr=e=>ki(e),Dr=()=>qi(),pt=new TextDecoder,he=(e,t)=>{if(!e)return"";for(var n=e+t,i=e;!(i>=n)&&Q[i];)++i;return pt.decode(Q.subarray(e,i))},Lr=(e,t,n,i)=>ce(`Assertion failed: ${he(e)}, at: `+[t?he(t):"unknown filename",n,i?he(i):"unknown function"]),K={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,i=e.length-1;i>=0;i--){var l=e[i];l==="."?e.splice(i,1):l===".."?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=K.isAbs(e),n=e.slice(-1)==="/";return e=K.normalizeArray(e.split("/").filter(i=>!!i),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=K.splitPath(e),n=t[0],i=t[1];return!n&&!i?".":(i&&(i=i.slice(0,-1)),n+i)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>K.normalize(e.join("/")),join2:(e,t)=>K.normalize(e+"/"+t)},Or=()=>e=>crypto.getRandomValues(e),mt=e=>{(mt=Or())(e)},ge={resolve:(...e)=>{for(var t="",n=!1,i=e.length-1;i>=-1&&!n;i--){var l=i>=0?e[i]:a.cwd();if(typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";t=l+"/"+t,n=K.isAbs(l)}return t=K.normalizeArray(t.split("/").filter(u=>!!u),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=ge.resolve(e).slice(1),t=ge.resolve(t).slice(1);function n(q){for(var O=0;O<q.length&&q[O]==="";O++);for(var H=q.length-1;H>=0&&q[H]==="";H--);return O>H?[]:q.slice(O,H-O+1)}for(var i=n(e.split("/")),l=n(t.split("/")),u=Math.min(i.length,l.length),_=u,h=0;h<u;h++)if(i[h]!==l[h]){_=h;break}for(var w=[],h=_;h<i.length;h++)w.push("..");return w=w.concat(l.slice(_)),w.join("/")}},Ae=(e,t=0,n=NaN)=>{for(var i=t+n,l=t;e[l]&&!(l>=i);)++l;return pt.decode(e.buffer?e.subarray(t,l):new Uint8Array(e.slice(t,l)))},Qe=[],pe=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++n):t+=3}return t},$e=(e,t,n,i)=>{if(!(i>0))return 0;for(var l=n,u=n+i-1,_=0;_<e.length;++_){var h=e.charCodeAt(_);if(h>=55296&&h<=57343){var w=e.charCodeAt(++_);h=65536+((h&1023)<<10)|w&1023}if(h<=127){if(n>=u)break;t[n++]=h}else if(h<=2047){if(n+1>=u)break;t[n++]=192|h>>6,t[n++]=128|h&63}else if(h<=65535){if(n+2>=u)break;t[n++]=224|h>>12,t[n++]=128|h>>6&63,t[n++]=128|h&63}else{if(n+3>=u)break;t[n++]=240|h>>18,t[n++]=128|h>>12&63,t[n++]=128|h>>6&63,t[n++]=128|h&63}}return t[n]=0,n-l},Ke=(e,t,n)=>{var i=n>0?n:pe(e)+1,l=new Array(i),u=$e(e,l,0,l.length);return t&&(l.length=u),l},jr=()=>{if(!Qe.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;Qe=Ke(e,!0)}return Qe.shift()},me={ttys:[],init(){},shutdown(){},register(e,t){me.ttys[e]={input:[],output:[],ops:t},a.registerDevice(e,me.stream_ops)},stream_ops:{open(e){var t=me.ttys[e.node.rdev];if(!t)throw new a.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,i,l){if(!e.tty||!e.tty.ops.get_char)throw new a.ErrnoError(60);for(var u=0,_=0;_<i;_++){var h;try{h=e.tty.ops.get_char(e.tty)}catch{throw new a.ErrnoError(29)}if(h===void 0&&u===0)throw new a.ErrnoError(6);if(h==null)break;u++,t[n+_]=h}return u&&(e.node.atime=Date.now()),u},write(e,t,n,i,l){if(!e.tty||!e.tty.ops.put_char)throw new a.ErrnoError(60);try{for(var u=0;u<i;u++)e.tty.ops.put_char(e.tty,t[n+u])}catch{throw new a.ErrnoError(29)}return i&&(e.node.mtime=e.node.ctime=Date.now()),u}},default_tty_ops:{get_char(e){return jr()},put_char(e,t){t===null||t===10?(v(Ae(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output?.length>0&&(v(Ae(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(p(Ae(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output?.length>0&&(p(Ae(e.output)),e.output=[])}}},Pr=(e,t)=>Q.fill(0,e,e+t),vt=(e,t)=>Math.ceil(e/t)*t,yt=e=>{e=vt(e,65536);var t=gi(65536,e);return t&&Pr(t,e),t},j={ops_table:null,mount(e){return j.createNode(null,"/",16895,0)},createNode(e,t,n,i){if(a.isBlkdev(n)||a.isFIFO(n))throw new a.ErrnoError(63);j.ops_table||={dir:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr,lookup:j.node_ops.lookup,mknod:j.node_ops.mknod,rename:j.node_ops.rename,unlink:j.node_ops.unlink,rmdir:j.node_ops.rmdir,readdir:j.node_ops.readdir,symlink:j.node_ops.symlink},stream:{llseek:j.stream_ops.llseek}},file:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr},stream:{llseek:j.stream_ops.llseek,read:j.stream_ops.read,write:j.stream_ops.write,mmap:j.stream_ops.mmap,msync:j.stream_ops.msync}},link:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr,readlink:j.node_ops.readlink},stream:{}},chrdev:{node:{getattr:j.node_ops.getattr,setattr:j.node_ops.setattr},stream:a.chrdev_stream_ops}};var l=a.createNode(e,t,n,i);return a.isDir(l.mode)?(l.node_ops=j.ops_table.dir.node,l.stream_ops=j.ops_table.dir.stream,l.contents={}):a.isFile(l.mode)?(l.node_ops=j.ops_table.file.node,l.stream_ops=j.ops_table.file.stream,l.usedBytes=0,l.contents=null):a.isLink(l.mode)?(l.node_ops=j.ops_table.link.node,l.stream_ops=j.ops_table.link.stream):a.isChrdev(l.mode)&&(l.node_ops=j.ops_table.chrdev.node,l.stream_ops=j.ops_table.chrdev.stream),l.atime=l.mtime=l.ctime=Date.now(),e&&(e.contents[t]=l,e.atime=e.mtime=e.ctime=l.atime),l},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var i=1024*1024;t=Math.max(t,n*(n<i?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var l=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(l.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=a.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,a.isDir(e.mode)?t.size=4096:a.isFile(e.mode)?t.size=e.usedBytes:a.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){for(const n of["mode","atime","mtime","ctime"])t[n]!=null&&(e[n]=t[n]);t.size!==void 0&&j.resizeFileStorage(e,t.size)},lookup(e,t){throw j.doesNotExistError},mknod(e,t,n,i){return j.createNode(e,t,n,i)},rename(e,t,n){var i;try{i=a.lookupNode(t,n)}catch{}if(i){if(a.isDir(e.mode))for(var l in i.contents)throw new a.ErrnoError(55);a.hashRemoveNode(i)}delete e.parent.contents[e.name],t.contents[n]=e,e.name=n,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var n=a.lookupNode(e,t);for(var i in n.contents)throw new a.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,t,n){var i=j.createNode(e,t,41471,0);return i.link=n,i},readlink(e){if(!a.isLink(e.mode))throw new a.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,i,l){var u=e.node.contents;if(l>=e.node.usedBytes)return 0;var _=Math.min(e.node.usedBytes-l,i);if(_>8&&u.subarray)t.set(u.subarray(l,l+_),n);else for(var h=0;h<_;h++)t[n+h]=u[l+h];return _},write(e,t,n,i,l,u){if(t.buffer===R.buffer&&(u=!1),!i)return 0;var _=e.node;if(_.mtime=_.ctime=Date.now(),t.subarray&&(!_.contents||_.contents.subarray)){if(u)return _.contents=t.subarray(n,n+i),_.usedBytes=i,i;if(_.usedBytes===0&&l===0)return _.contents=t.slice(n,n+i),_.usedBytes=i,i;if(l+i<=_.usedBytes)return _.contents.set(t.subarray(n,n+i),l),i}if(j.expandFileStorage(_,l+i),_.contents.subarray&&t.subarray)_.contents.set(t.subarray(n,n+i),l);else for(var h=0;h<i;h++)_.contents[l+h]=t[n+h];return _.usedBytes=Math.max(_.usedBytes,l+i),i},llseek(e,t,n){var i=t;if(n===1?i+=e.position:n===2&&a.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new a.ErrnoError(28);return i},mmap(e,t,n,i,l){if(!a.isFile(e.node.mode))throw new a.ErrnoError(43);var u,_,h=e.node.contents;if(!(l&2)&&h&&h.buffer===R.buffer)_=!1,u=h.byteOffset;else{if(_=!0,u=yt(t),!u)throw new a.ErrnoError(48);h&&((n>0||n+t<h.length)&&(h.subarray?h=h.subarray(n,n+t):h=Array.prototype.slice.call(h,n,n+t)),R.set(h,u))}return{ptr:u,allocated:_}},msync(e,t,n,i,l){return j.stream_ops.write(e,t,0,i,n,!1),0}}},wt=async e=>{var t=await $(e);return new Uint8Array(t)};wt.isAsync=!0;var Nr=(...e)=>a.createDataFile(...e),gt=[],Ur=(e,t,n,i)=>{typeof Browser<"u"&&Browser.init();var l=!1;return gt.forEach(u=>{l||u.canHandle(t)&&(u.handle(e,t,n,i),l=!0)}),l},zr=(e,t,n,i,l,u,_,h,w,q)=>{var O=t?ge.resolve(K.join2(e,t)):e;function H(B){function T(N){q?.(),h||Nr(e,t,N,i,l,w),u?.(),He()}Ur(B,O,T,()=>{_?.(),He()})||T(B)}ct(),typeof n=="string"?wt(n).then(H,_):H(n)},Br=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},Ge=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},a={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,t,n,i){e||(e=this),this.parent=e,this.mount=e.mount,this.id=a.nextInode++,this.name=t,this.mode=n,this.rdev=i,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return a.isDir(this.mode)}get isDevice(){return a.isChrdev(this.mode)}},lookupPath(e,t={}){if(!e)throw new a.ErrnoError(44);t.follow_mount??=!0,K.isAbs(e)||(e=a.cwd()+"/"+e);e:for(var n=0;n<40;n++){for(var i=e.split("/").filter(q=>!!q),l=a.root,u="/",_=0;_<i.length;_++){var h=_===i.length-1;if(h&&t.parent)break;if(i[_]!=="."){if(i[_]===".."){if(u=K.dirname(u),a.isRoot(l)){e=u+"/"+i.slice(_+1).join("/");continue e}else l=l.parent;continue}u=K.join2(u,i[_]);try{l=a.lookupNode(l,i[_])}catch(q){if(q?.errno===44&&h&&t.noent_okay)return{path:u};throw q}if(a.isMountpoint(l)&&(!h||t.follow_mount)&&(l=l.mounted.root),a.isLink(l.mode)&&(!h||t.follow)){if(!l.node_ops.readlink)throw new a.ErrnoError(52);var w=l.node_ops.readlink(l);K.isAbs(w)||(w=K.dirname(u)+"/"+w),e=w+"/"+i.slice(_+1).join("/");continue e}}}return{path:u,node:l}}throw new a.ErrnoError(32)},getPath(e){for(var t;;){if(a.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i)|0;return(e+n>>>0)%a.nameTable.length},hashAddNode(e){var t=a.hashName(e.parent.id,e.name);e.name_next=a.nameTable[t],a.nameTable[t]=e},hashRemoveNode(e){var t=a.hashName(e.parent.id,e.name);if(a.nameTable[t]===e)a.nameTable[t]=e.name_next;else for(var n=a.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=a.mayLookup(e);if(n)throw new a.ErrnoError(n);for(var i=a.hashName(e.id,t),l=a.nameTable[i];l;l=l.name_next){var u=l.name;if(l.parent.id===e.id&&u===t)return l}return a.lookup(e,t)},createNode(e,t,n,i){var l=new a.FSNode(e,t,n,i);return a.hashAddNode(l),l},destroyNode(e){a.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return a.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!a.isDir(e.mode))return 54;var t=a.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){if(!a.isDir(e.mode))return 54;try{var n=a.lookupNode(e,t);return 20}catch{}return a.nodePermissions(e,"wx")},mayDelete(e,t,n){var i;try{i=a.lookupNode(e,t)}catch(u){return u.errno}var l=a.nodePermissions(e,"wx");if(l)return l;if(n){if(!a.isDir(i.mode))return 54;if(a.isRoot(i)||a.getPath(i)===a.cwd())return 10}else if(a.isDir(i.mode))return 31;return 0},mayOpen(e,t){return e?a.isLink(e.mode)?32:a.isDir(e.mode)&&(a.flagsToPermissionString(t)!=="r"||t&576)?31:a.nodePermissions(e,a.flagsToPermissionString(t)):44},checkOpExists(e,t){if(!e)throw new a.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=a.MAX_OPEN_FDS;e++)if(!a.streams[e])return e;throw new a.ErrnoError(33)},getStreamChecked(e){var t=a.getStream(e);if(!t)throw new a.ErrnoError(8);return t},getStream:e=>a.streams[e],createStream(e,t=-1){return e=Object.assign(new a.FSStream,e),t==-1&&(t=a.nextfd()),e.fd=t,a.streams[t]=e,e},closeStream(e){a.streams[e]=null},dupStream(e,t=-1){var n=a.createStream(e,t);return n.stream_ops?.dup?.(n),n},doSetAttr(e,t,n){var i=e?.stream_ops.setattr,l=i?e:t;i??=t.node_ops.setattr,a.checkOpExists(i,63),i(l,n)},chrdev_stream_ops:{open(e){var t=a.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new a.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){a.devices[e]={stream_ops:t}},getDevice:e=>a.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var i=n.pop();t.push(i),n.push(...i.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),a.syncFSRequests++,a.syncFSRequests>1&&p(`warning: ${a.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=a.getMounts(a.root.mount),i=0;function l(_){return a.syncFSRequests--,t(_)}function u(_){if(_)return u.errored?void 0:(u.errored=!0,l(_));++i>=n.length&&l(null)}n.forEach(_=>{if(!_.type.syncfs)return u(null);_.type.syncfs(_,e,u)})},mount(e,t,n){var i=n==="/",l=!n,u;if(i&&a.root)throw new a.ErrnoError(10);if(!i&&!l){var _=a.lookupPath(n,{follow_mount:!1});if(n=_.path,u=_.node,a.isMountpoint(u))throw new a.ErrnoError(10);if(!a.isDir(u.mode))throw new a.ErrnoError(54)}var h={type:e,opts:t,mountpoint:n,mounts:[]},w=e.mount(h);return w.mount=h,h.root=w,i?a.root=w:u&&(u.mounted=h,u.mount&&u.mount.mounts.push(h)),w},unmount(e){var t=a.lookupPath(e,{follow_mount:!1});if(!a.isMountpoint(t.node))throw new a.ErrnoError(28);var n=t.node,i=n.mounted,l=a.getMounts(i);Object.keys(a.nameTable).forEach(_=>{for(var h=a.nameTable[_];h;){var w=h.name_next;l.includes(h.mount)&&a.destroyNode(h),h=w}}),n.mounted=null;var u=n.mount.mounts.indexOf(i);n.mount.mounts.splice(u,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var i=a.lookupPath(e,{parent:!0}),l=i.node,u=K.basename(e);if(!u)throw new a.ErrnoError(28);if(u==="."||u==="..")throw new a.ErrnoError(20);var _=a.mayCreate(l,u);if(_)throw new a.ErrnoError(_);if(!l.node_ops.mknod)throw new a.ErrnoError(63);return l.node_ops.mknod(l,u,t,n)},statfs(e){return a.statfsNode(a.lookupPath(e,{follow:!0}).node)},statfsStream(e){return a.statfsNode(e.node)},statfsNode(e){var t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:a.nextInode,ffree:a.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create(e,t=438){return t&=4095,t|=32768,a.mknod(e,t,0)},mkdir(e,t=511){return t&=1023,t|=16384,a.mknod(e,t,0)},mkdirTree(e,t){var n=e.split("/"),i="";for(var l of n)if(l){(i||K.isAbs(e))&&(i+="/"),i+=l;try{a.mkdir(i,t)}catch(u){if(u.errno!=20)throw u}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,a.mknod(e,t,n)},symlink(e,t){if(!ge.resolve(e))throw new a.ErrnoError(44);var n=a.lookupPath(t,{parent:!0}),i=n.node;if(!i)throw new a.ErrnoError(44);var l=K.basename(t),u=a.mayCreate(i,l);if(u)throw new a.ErrnoError(u);if(!i.node_ops.symlink)throw new a.ErrnoError(63);return i.node_ops.symlink(i,l,e)},rename(e,t){var n=K.dirname(e),i=K.dirname(t),l=K.basename(e),u=K.basename(t),_,h,w;if(_=a.lookupPath(e,{parent:!0}),h=_.node,_=a.lookupPath(t,{parent:!0}),w=_.node,!h||!w)throw new a.ErrnoError(44);if(h.mount!==w.mount)throw new a.ErrnoError(75);var q=a.lookupNode(h,l),O=ge.relative(e,i);if(O.charAt(0)!==".")throw new a.ErrnoError(28);if(O=ge.relative(t,n),O.charAt(0)!==".")throw new a.ErrnoError(55);var H;try{H=a.lookupNode(w,u)}catch{}if(q!==H){var B=a.isDir(q.mode),T=a.mayDelete(h,l,B);if(T)throw new a.ErrnoError(T);if(T=H?a.mayDelete(w,u,B):a.mayCreate(w,u),T)throw new a.ErrnoError(T);if(!h.node_ops.rename)throw new a.ErrnoError(63);if(a.isMountpoint(q)||H&&a.isMountpoint(H))throw new a.ErrnoError(10);if(w!==h&&(T=a.nodePermissions(h,"w"),T))throw new a.ErrnoError(T);a.hashRemoveNode(q);try{h.node_ops.rename(q,w,u),q.parent=w}catch(N){throw N}finally{a.hashAddNode(q)}}},rmdir(e){var t=a.lookupPath(e,{parent:!0}),n=t.node,i=K.basename(e),l=a.lookupNode(n,i),u=a.mayDelete(n,i,!0);if(u)throw new a.ErrnoError(u);if(!n.node_ops.rmdir)throw new a.ErrnoError(63);if(a.isMountpoint(l))throw new a.ErrnoError(10);n.node_ops.rmdir(n,i),a.destroyNode(l)},readdir(e){var t=a.lookupPath(e,{follow:!0}),n=t.node,i=a.checkOpExists(n.node_ops.readdir,54);return i(n)},unlink(e){var t=a.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new a.ErrnoError(44);var i=K.basename(e),l=a.lookupNode(n,i),u=a.mayDelete(n,i,!1);if(u)throw new a.ErrnoError(u);if(!n.node_ops.unlink)throw new a.ErrnoError(63);if(a.isMountpoint(l))throw new a.ErrnoError(10);n.node_ops.unlink(n,i),a.destroyNode(l)},readlink(e){var t=a.lookupPath(e),n=t.node;if(!n)throw new a.ErrnoError(44);if(!n.node_ops.readlink)throw new a.ErrnoError(28);return n.node_ops.readlink(n)},stat(e,t){var n=a.lookupPath(e,{follow:!t}),i=n.node,l=a.checkOpExists(i.node_ops.getattr,63);return l(i)},fstat(e){var t=a.getStreamChecked(e),n=t.node,i=t.stream_ops.getattr,l=i?t:n;return i??=n.node_ops.getattr,a.checkOpExists(i,63),i(l)},lstat(e){return a.stat(e,!0)},doChmod(e,t,n,i){a.doSetAttr(e,t,{mode:n&4095|t.mode&-4096,ctime:Date.now(),dontFollow:i})},chmod(e,t,n){var i;if(typeof e=="string"){var l=a.lookupPath(e,{follow:!n});i=l.node}else i=e;a.doChmod(null,i,t,n)},lchmod(e,t){a.chmod(e,t,!0)},fchmod(e,t){var n=a.getStreamChecked(e);a.doChmod(n,n.node,t,!1)},doChown(e,t,n){a.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:n})},chown(e,t,n,i){var l;if(typeof e=="string"){var u=a.lookupPath(e,{follow:!i});l=u.node}else l=e;a.doChown(null,l,i)},lchown(e,t,n){a.chown(e,t,n,!0)},fchown(e,t,n){var i=a.getStreamChecked(e);a.doChown(i,i.node,!1)},doTruncate(e,t,n){if(a.isDir(t.mode))throw new a.ErrnoError(31);if(!a.isFile(t.mode))throw new a.ErrnoError(28);var i=a.nodePermissions(t,"w");if(i)throw new a.ErrnoError(i);a.doSetAttr(e,t,{size:n,timestamp:Date.now()})},truncate(e,t){if(t<0)throw new a.ErrnoError(28);var n;if(typeof e=="string"){var i=a.lookupPath(e,{follow:!0});n=i.node}else n=e;a.doTruncate(null,n,t)},ftruncate(e,t){var n=a.getStreamChecked(e);if(t<0||(n.flags&2097155)===0)throw new a.ErrnoError(28);a.doTruncate(n,n.node,t)},utime(e,t,n){var i=a.lookupPath(e,{follow:!0}),l=i.node,u=a.checkOpExists(l.node_ops.setattr,63);u(l,{atime:t,mtime:n})},open(e,t,n=438){if(e==="")throw new a.ErrnoError(44);t=typeof t=="string"?Br(t):t,t&64?n=n&4095|32768:n=0;var i,l;if(typeof e=="object")i=e;else{l=e.endsWith("/");var u=a.lookupPath(e,{follow:!(t&131072),noent_okay:!0});i=u.node,e=u.path}var _=!1;if(t&64)if(i){if(t&128)throw new a.ErrnoError(20)}else{if(l)throw new a.ErrnoError(31);i=a.mknod(e,n|511,0),_=!0}if(!i)throw new a.ErrnoError(44);if(a.isChrdev(i.mode)&&(t&=-513),t&65536&&!a.isDir(i.mode))throw new a.ErrnoError(54);if(!_){var h=a.mayOpen(i,t);if(h)throw new a.ErrnoError(h)}t&512&&!_&&a.truncate(i,0),t&=-131713;var w=a.createStream({node:i,path:a.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return w.stream_ops.open&&w.stream_ops.open(w),_&&a.chmod(i,n&511),r.logReadFiles&&!(t&1)&&(e in a.readFiles||(a.readFiles[e]=1)),w},close(e){if(a.isClosed(e))throw new a.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{a.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(a.isClosed(e))throw new a.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new a.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new a.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,i,l){if(i<0||l<0)throw new a.ErrnoError(28);if(a.isClosed(e))throw new a.ErrnoError(8);if((e.flags&2097155)===1)throw new a.ErrnoError(8);if(a.isDir(e.node.mode))throw new a.ErrnoError(31);if(!e.stream_ops.read)throw new a.ErrnoError(28);var u=typeof l<"u";if(!u)l=e.position;else if(!e.seekable)throw new a.ErrnoError(70);var _=e.stream_ops.read(e,t,n,i,l);return u||(e.position+=_),_},write(e,t,n,i,l,u){if(i<0||l<0)throw new a.ErrnoError(28);if(a.isClosed(e))throw new a.ErrnoError(8);if((e.flags&2097155)===0)throw new a.ErrnoError(8);if(a.isDir(e.node.mode))throw new a.ErrnoError(31);if(!e.stream_ops.write)throw new a.ErrnoError(28);e.seekable&&e.flags&1024&&a.llseek(e,0,2);var _=typeof l<"u";if(!_)l=e.position;else if(!e.seekable)throw new a.ErrnoError(70);var h=e.stream_ops.write(e,t,n,i,l,u);return _||(e.position+=h),h},mmap(e,t,n,i,l){if((i&2)!==0&&(l&2)===0&&(e.flags&2097155)!==2)throw new a.ErrnoError(2);if((e.flags&2097155)===1)throw new a.ErrnoError(2);if(!e.stream_ops.mmap)throw new a.ErrnoError(43);if(!t)throw new a.ErrnoError(28);return e.stream_ops.mmap(e,t,n,i,l)},msync(e,t,n,i,l){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,i,l):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new a.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,i=a.open(e,t.flags),l=a.stat(e),u=l.size,_=new Uint8Array(u);return a.read(i,_,0,u,0),t.encoding==="utf8"?n=Ae(_):t.encoding==="binary"&&(n=_),a.close(i),n},writeFile(e,t,n={}){n.flags=n.flags||577;var i=a.open(e,n.flags,n.mode);if(typeof t=="string"){var l=new Uint8Array(pe(t)+1),u=$e(t,l,0,l.length);a.write(i,l,0,u,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))a.write(i,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");a.close(i)},cwd:()=>a.currentPath,chdir(e){var t=a.lookupPath(e,{follow:!0});if(t.node===null)throw new a.ErrnoError(44);if(!a.isDir(t.node.mode))throw new a.ErrnoError(54);var n=a.nodePermissions(t.node,"x");if(n)throw new a.ErrnoError(n);a.currentPath=t.path},createDefaultDirectories(){a.mkdir("/tmp"),a.mkdir("/home"),a.mkdir("/home/web_user")},createDefaultDevices(){a.mkdir("/dev"),a.registerDevice(a.makedev(1,3),{read:()=>0,write:(i,l,u,_,h)=>_,llseek:()=>0}),a.mkdev("/dev/null",a.makedev(1,3)),me.register(a.makedev(5,0),me.default_tty_ops),me.register(a.makedev(6,0),me.default_tty1_ops),a.mkdev("/dev/tty",a.makedev(5,0)),a.mkdev("/dev/tty1",a.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(mt(e),t=e.byteLength),e[--t]);a.createDevice("/dev","random",n),a.createDevice("/dev","urandom",n),a.mkdir("/dev/shm"),a.mkdir("/dev/shm/tmp")},createSpecialDirectories(){a.mkdir("/proc");var e=a.mkdir("/proc/self");a.mkdir("/proc/self/fd"),a.mount({mount(){var t=a.createNode(e,"fd",16895,73);return t.stream_ops={llseek:j.stream_ops.llseek},t.node_ops={lookup(n,i){var l=+i,u=a.getStreamChecked(l),_={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>u.path},id:l+1};return _.parent=_,_},readdir(){return Array.from(a.streams.entries()).filter(([n,i])=>i).map(([n,i])=>n.toString())}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?a.createDevice("/dev","stdin",e):a.symlink("/dev/tty","/dev/stdin"),t?a.createDevice("/dev","stdout",null,t):a.symlink("/dev/tty","/dev/stdout"),n?a.createDevice("/dev","stderr",null,n):a.symlink("/dev/tty1","/dev/stderr"),a.open("/dev/stdin",0),a.open("/dev/stdout",1),a.open("/dev/stderr",1)},staticInit(){a.nameTable=new Array(4096),a.mount(j,{},"/"),a.createDefaultDirectories(),a.createDefaultDevices(),a.createSpecialDirectories(),a.filesystems={MEMFS:j}},init(e,t,n){a.initialized=!0,e??=r.stdin,t??=r.stdout,n??=r.stderr,a.createStandardStreams(e,t,n)},quit(){a.initialized=!1;for(var e of a.streams)e&&a.close(e)},findObject(e,t){var n=a.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=a.lookupPath(e,{follow:!t});e=n.path}catch{}var i={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=a.lookupPath(e,{parent:!0});i.parentExists=!0,i.parentPath=n.path,i.parentObject=n.node,i.name=K.basename(e),n=a.lookupPath(e,{follow:!t}),i.exists=!0,i.path=n.path,i.object=n.node,i.name=n.node.name,i.isRoot=n.path==="/"}catch(l){i.error=l.errno}return i},createPath(e,t,n,i){e=typeof e=="string"?e:a.getPath(e);for(var l=t.split("/").reverse();l.length;){var u=l.pop();if(u){var _=K.join2(e,u);try{a.mkdir(_)}catch(h){if(h.errno!=20)throw h}e=_}}return _},createFile(e,t,n,i,l){var u=K.join2(typeof e=="string"?e:a.getPath(e),t),_=Ge(i,l);return a.create(u,_)},createDataFile(e,t,n,i,l,u){var _=t;e&&(e=typeof e=="string"?e:a.getPath(e),_=t?K.join2(e,t):e);var h=Ge(i,l),w=a.create(_,h);if(n){if(typeof n=="string"){for(var q=new Array(n.length),O=0,H=n.length;O<H;++O)q[O]=n.charCodeAt(O);n=q}a.chmod(w,h|146);var B=a.open(w,577);a.write(B,n,0,n.length,0,u),a.close(B),a.chmod(w,h)}},createDevice(e,t,n,i){var l=K.join2(typeof e=="string"?e:a.getPath(e),t),u=Ge(!!n,!!i);a.createDevice.major??=64;var _=a.makedev(a.createDevice.major++,0);return a.registerDevice(_,{open(h){h.seekable=!1},close(h){i?.buffer?.length&&i(10)},read(h,w,q,O,H){for(var B=0,T=0;T<O;T++){var N;try{N=n()}catch{throw new a.ErrnoError(29)}if(N===void 0&&B===0)throw new a.ErrnoError(6);if(N==null)break;B++,w[q+T]=N}return B&&(h.node.atime=Date.now()),B},write(h,w,q,O,H){for(var B=0;B<O;B++)try{i(w[q+B])}catch{throw new a.ErrnoError(29)}return O&&(h.node.mtime=h.node.ctime=Date.now()),B}}),a.mkdev(l,u,_)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=ie(e.url),e.usedBytes=e.contents.length}catch{throw new a.ErrnoError(29)}},createLazyFile(e,t,n,i,l){class u{lengthKnown=!1;chunks=[];get(T){if(!(T>this.length-1||T<0)){var N=T%this.chunkSize,Z=T/this.chunkSize|0;return this.getter(Z)[N]}}setDataGetter(T){this.getter=T}cacheLength(){var T=new XMLHttpRequest;if(T.open("HEAD",n,!1),T.send(null),!(T.status>=200&&T.status<300||T.status===304))throw new Error("Couldn't load "+n+". Status: "+T.status);var N=Number(T.getResponseHeader("Content-length")),Z,G=(Z=T.getResponseHeader("Accept-Ranges"))&&Z==="bytes",ee=(Z=T.getResponseHeader("Content-Encoding"))&&Z==="gzip",ae=1024*1024;G||(ae=N);var se=(oe,ke)=>{if(oe>ke)throw new Error("invalid range ("+oe+", "+ke+") or no bytes requested!");if(ke>N-1)throw new Error("only "+N+" bytes available! programmer error!");var re=new XMLHttpRequest;if(re.open("GET",n,!1),N!==ae&&re.setRequestHeader("Range","bytes="+oe+"-"+ke),re.responseType="arraybuffer",re.overrideMimeType&&re.overrideMimeType("text/plain; charset=x-user-defined"),re.send(null),!(re.status>=200&&re.status<300||re.status===304))throw new Error("Couldn't load "+n+". Status: "+re.status);return re.response!==void 0?new Uint8Array(re.response||[]):Ke(re.responseText||"",!0)},Ce=this;Ce.setDataGetter(oe=>{var ke=oe*ae,re=(oe+1)*ae-1;if(re=Math.min(re,N-1),typeof Ce.chunks[oe]>"u"&&(Ce.chunks[oe]=se(ke,re)),typeof Ce.chunks[oe]>"u")throw new Error("doXHR failed!");return Ce.chunks[oe]}),(ee||!N)&&(ae=N=1,N=this.getter(0).length,ae=N,v("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=N,this._chunkSize=ae,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!k)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var _=new u,h={isDevice:!1,contents:_}}else var h={isDevice:!1,url:n};var w=a.createFile(e,t,h,i,l);h.contents?w.contents=h.contents:h.url&&(w.contents=null,w.url=h.url),Object.defineProperties(w,{usedBytes:{get:function(){return this.contents.length}}});var q={},O=Object.keys(w.stream_ops);O.forEach(B=>{var T=w.stream_ops[B];q[B]=(...N)=>(a.forceLoadFile(w),T(...N))});function H(B,T,N,Z,G){var ee=B.node.contents;if(G>=ee.length)return 0;var ae=Math.min(ee.length-G,Z);if(ee.slice)for(var se=0;se<ae;se++)T[N+se]=ee[G+se];else for(var se=0;se<ae;se++)T[N+se]=ee.get(G+se);return ae}return q.read=(B,T,N,Z,G)=>(a.forceLoadFile(w),H(B,T,N,Z,G)),q.mmap=(B,T,N,Z,G)=>{a.forceLoadFile(w);var ee=yt(T);if(!ee)throw new a.ErrnoError(48);return H(B,R,ee,T,N),{ptr:ee,allocated:!0}},w.stream_ops=q,w}},M={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(K.isAbs(t))return t;var i;if(e===-100)i=a.cwd();else{var l=M.getStreamFromFD(e);i=l.path}if(t.length==0){if(!n)throw new a.ErrnoError(44);return i}return i+"/"+t},writeStat(e,t){S[e>>2]=t.dev,S[e+4>>2]=t.mode,W[e+8>>2]=t.nlink,S[e+12>>2]=t.uid,S[e+16>>2]=t.gid,S[e+20>>2]=t.rdev,X=[t.size>>>0,(x=t.size,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[e+24>>2]=X[0],S[e+28>>2]=X[1],S[e+32>>2]=4096,S[e+36>>2]=t.blocks;var n=t.atime.getTime(),i=t.mtime.getTime(),l=t.ctime.getTime();return X=[Math.floor(n/1e3)>>>0,(x=Math.floor(n/1e3),+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[e+40>>2]=X[0],S[e+44>>2]=X[1],W[e+48>>2]=n%1e3*1e3*1e3,X=[Math.floor(i/1e3)>>>0,(x=Math.floor(i/1e3),+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[e+56>>2]=X[0],S[e+60>>2]=X[1],W[e+64>>2]=i%1e3*1e3*1e3,X=[Math.floor(l/1e3)>>>0,(x=Math.floor(l/1e3),+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[e+72>>2]=X[0],S[e+76>>2]=X[1],W[e+80>>2]=l%1e3*1e3*1e3,X=[t.ino>>>0,(x=t.ino,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[e+88>>2]=X[0],S[e+92>>2]=X[1],0},writeStatFs(e,t){S[e+4>>2]=t.bsize,S[e+40>>2]=t.bsize,S[e+8>>2]=t.blocks,S[e+12>>2]=t.bfree,S[e+16>>2]=t.bavail,S[e+20>>2]=t.files,S[e+24>>2]=t.ffree,S[e+28>>2]=t.fsid,S[e+44>>2]=t.flags,S[e+36>>2]=t.namelen},doMsync(e,t,n,i,l){if(!a.isFile(t.node.mode))throw new a.ErrnoError(43);if(i&2)return 0;var u=Q.slice(e,e+n);a.msync(t,u,l,n,i)},getStreamFromFD(e){var t=a.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=he(e);return t}};function Mr(e,t){try{return e=M.getStr(e),a.chmod(e,t),0}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Hr(e,t,n,i){try{if(t=M.getStr(t),t=M.calculateAt(e,t),n&-8)return-28;var l=a.lookupPath(t,{follow:!0}),u=l.node;if(!u)return-44;var _="";return n&4&&(_+="r"),n&2&&(_+="w"),n&1&&(_+="x"),_&&a.nodePermissions(u,_)?-2:0}catch(h){if(typeof a>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function Wr(e,t){try{return a.fchmod(e,t),0}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Vr(e,t,n){try{return a.fchown(e,t,n),0}catch(i){if(typeof a>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var Oe=()=>{var e=S[+M.varargs>>2];return M.varargs+=4,e},Qr=Oe;function $r(e,t,n){M.varargs=n;try{var i=M.getStreamFromFD(e);switch(t){case 0:{var l=Oe();if(l<0)return-28;for(;a.streams[l];)l++;var u;return u=a.dupStream(i,l),u.fd}case 1:case 2:return 0;case 3:return i.flags;case 4:{var l=Oe();return i.flags|=l,0}case 12:{var l=Qr(),_=0;return Y[l+_>>1]=2,0}case 13:case 14:return 0}return-28}catch(h){if(typeof a>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function Kr(e,t){try{return M.writeStat(t,a.fstat(e))}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Te=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN;function Gr(e,t,n){var i=Te(t,n);try{return isNaN(i)?-61:(a.ftruncate(e,i),0)}catch(l){if(typeof a>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}var ue=(e,t,n)=>$e(e,Q,t,n);function Yr(e,t){try{if(t===0)return-28;var n=a.cwd(),i=pe(n)+1;return t<i?-68:(ue(n,e,t),i)}catch(l){if(typeof a>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function Xr(e,t){try{return e=M.getStr(e),M.writeStat(t,a.lstat(e))}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Jr(e,t,n){try{return t=M.getStr(t),t=M.calculateAt(e,t),a.mkdir(t,n,0),0}catch(i){if(typeof a>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Zr(e,t,n,i){try{t=M.getStr(t);var l=i&256,u=i&4096;return i=i&-6401,t=M.calculateAt(e,t,u),M.writeStat(n,l?a.lstat(t):a.stat(t))}catch(_){if(typeof a>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function en(e,t,n,i){M.varargs=i;try{t=M.getStr(t),t=M.calculateAt(e,t);var l=i?Oe():0;return a.open(t,n,l).fd}catch(u){if(typeof a>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function tn(e,t,n,i){try{if(t=M.getStr(t),t=M.calculateAt(e,t),i<=0)return-28;var l=a.readlink(t),u=Math.min(i,pe(l)),_=R[n+u];return ue(l,n,i+1),R[n+u]=_,u}catch(h){if(typeof a>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function rn(e){try{return e=M.getStr(e),a.rmdir(e),0}catch(t){if(typeof a>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function nn(e,t){try{return e=M.getStr(e),M.writeStat(t,a.stat(e))}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function an(e,t,n){try{if(t=M.getStr(t),t=M.calculateAt(e,t),!n)a.unlink(t);else if(n===512)a.rmdir(t);else return-28;return 0}catch(i){if(typeof a>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var bt=e=>W[e>>2]+S[e+4>>2]*4294967296;function sn(e,t,n,i){try{t=M.getStr(t),t=M.calculateAt(e,t,!0);var l=Date.now(),u,_;if(!n)u=l,_=l;else{var h=bt(n),w=S[n+8>>2];w==1073741823?u=l:w==1073741822?u=null:u=h*1e3+w/(1e3*1e3),n+=16,h=bt(n),w=S[n+8>>2],w==1073741823?_=l:w==1073741822?_=null:_=h*1e3+w/(1e3*1e3)}return(_??u)!==null&&a.utime(t,u,_),0}catch(q){if(typeof a>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}var on=()=>ce(""),je=0,ln=()=>{Ve=!1,je=0},cn=e=>e%4===0&&(e%100!==0||e%400===0),un=[0,31,60,91,121,152,182,213,244,274,305,335],fn=[0,31,59,90,120,151,181,212,243,273,304,334],_n=e=>{var t=cn(e.getFullYear()),n=t?un:fn,i=n[e.getMonth()]+e.getDate()-1;return i};function dn(e,t,n){var i=Te(e,t),l=new Date(i*1e3);S[n>>2]=l.getSeconds(),S[n+4>>2]=l.getMinutes(),S[n+8>>2]=l.getHours(),S[n+12>>2]=l.getDate(),S[n+16>>2]=l.getMonth(),S[n+20>>2]=l.getFullYear()-1900,S[n+24>>2]=l.getDay();var u=_n(l)|0;S[n+28>>2]=u,S[n+36>>2]=-(l.getTimezoneOffset()*60);var _=new Date(l.getFullYear(),0,1),h=new Date(l.getFullYear(),6,1).getTimezoneOffset(),w=_.getTimezoneOffset(),q=(h!=w&&l.getTimezoneOffset()==Math.min(w,h))|0;S[n+32>>2]=q}function hn(e,t,n,i,l,u,_,h){var w=Te(l,u);try{var q=M.getStreamFromFD(i),O=a.mmap(q,e,w,t,n),H=O.ptr;return S[_>>2]=O.allocated,W[h>>2]=H,0}catch(B){if(typeof a>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function pn(e,t,n,i,l,u,_){var h=Te(u,_);try{var w=M.getStreamFromFD(l);n&2&&M.doMsync(e,w,t,i,h)}catch(q){if(typeof a>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}var Fe={},Ye=e=>{if(e instanceof ut||e=="unwind")return L;I(1,e)},Et=()=>Ve||je>0,kt=e=>{L=e,Et()||(r.onExit?.(e),E=!0),I(e,new ut(e))},St=(e,t)=>{L=e,kt(e)},mn=St,vn=()=>{if(!Et())try{mn(L)}catch(e){Ye(e)}},qt=e=>{if(!E)try{e(),vn()}catch(t){Ye(t)}},At=()=>performance.now(),yn=(e,t)=>{if(Fe[e]&&(clearTimeout(Fe[e].id),delete Fe[e]),!t)return 0;var n=setTimeout(()=>{delete Fe[e],qt(()=>bi(e,At()))},t);return Fe[e]={id:n,timeout_ms:t},0},wn=(e,t,n,i)=>{var l=new Date().getFullYear(),u=new Date(l,0,1),_=new Date(l,6,1),h=u.getTimezoneOffset(),w=_.getTimezoneOffset(),q=Math.max(h,w);W[e>>2]=q*60,S[t>>2]=+(h!=w);var O=T=>{var N=T>=0?"-":"+",Z=Math.abs(T),G=String(Math.floor(Z/60)).padStart(2,"0"),ee=String(Z%60).padStart(2,"0");return`UTC${N}${G}${ee}`},H=O(h),B=O(w);w<h?(ue(H,n,17),ue(B,i,17)):(ue(H,i,17),ue(B,n,17))},gn=()=>Date.now(),bn=()=>2147483648,En=e=>{var t=y.buffer,n=(e-t.byteLength+65535)/65536|0;try{return y.grow(n),De(),1}catch{}},kn=e=>{var t=Q.length;e>>>=0;var n=bn();if(e>n)return!1;for(var i=1;i<=4;i*=2){var l=t*(1+.2/i);l=Math.min(l,e+100663296);var u=Math.min(n,vt(Math.max(e,l),65536)),_=En(u);if(_)return!0}return!1},Xe={},Sn=()=>F||"./this.program",Ie=()=>{if(!Ie.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Sn()};for(var n in Xe)Xe[n]===void 0?delete t[n]:t[n]=Xe[n];var i=[];for(var n in t)i.push(`${n}=${t[n]}`);Ie.strings=i}return Ie.strings},qn=(e,t)=>{var n=0,i=0;for(var l of Ie()){var u=t+n;W[e+i>>2]=u,n+=ue(l,u,1/0)+1,i+=4}return 0},An=(e,t)=>{var n=Ie();W[e>>2]=n.length;var i=0;for(var l of n)i+=pe(l)+1;return W[t>>2]=i,0};function Tn(e){try{var t=M.getStreamFromFD(e);return a.close(t),0}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function Fn(e,t){try{var n=0,i=0,l=0,u=M.getStreamFromFD(e),_=u.tty?2:a.isDir(u.mode)?3:a.isLink(u.mode)?7:4;return R[t]=_,Y[t+2>>1]=l,X=[n>>>0,(x=n,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[t+8>>2]=X[0],S[t+12>>2]=X[1],X=[i>>>0,(x=i,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[t+16>>2]=X[0],S[t+20>>2]=X[1],0}catch(h){if(typeof a>"u"||h.name!=="ErrnoError")throw h;return h.errno}}var In=(e,t,n,i)=>{for(var l=0,u=0;u<n;u++){var _=W[t>>2],h=W[t+4>>2];t+=8;var w=a.read(e,R,_,h,i);if(w<0)return-1;if(l+=w,w<h)break}return l};function Cn(e,t,n,i){try{var l=M.getStreamFromFD(e),u=In(l,t,n);return W[i>>2]=u,0}catch(_){if(typeof a>"u"||_.name!=="ErrnoError")throw _;return _.errno}}function Rn(e,t,n,i,l){var u=Te(t,n);try{if(isNaN(u))return 61;var _=M.getStreamFromFD(e);return a.llseek(_,u,i),X=[_.position>>>0,(x=_.position,+Math.abs(x)>=1?x>0?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],S[l>>2]=X[0],S[l+4>>2]=X[1],_.getdents&&u===0&&i===0&&(_.getdents=null),0}catch(h){if(typeof a>"u"||h.name!=="ErrnoError")throw h;return h.errno}}var Tt=function(e){try{var t=M.getStreamFromFD(e);return A.handleSleep(n=>{var i=t.node.mount;if(!i.type.syncfs){n(0);return}i.type.syncfs(i,!1,l=>{n(l?29:0)})})}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return n.errno}};Tt.isAsync=!0;var xn=(e,t,n,i)=>{for(var l=0,u=0;u<n;u++){var _=W[t>>2],h=W[t+4>>2];t+=8;var w=a.write(e,R,_,h,i);if(w<0)return-1;if(l+=w,w<h)break}return l};function Dn(e,t,n,i){try{var l=M.getStreamFromFD(e),u=xn(l,t,n);return W[i>>2]=u,0}catch(_){if(typeof a>"u"||_.name!=="ErrnoError")throw _;return _.errno}}var V=function(){const e=typeof A=="object"?A.handleAsync.bind(A):null;r.handleAsync=e;const t=new Map;r.setCallback=(n,i)=>t.set(n,i),r.getCallback=n=>t.get(n),r.deleteCallback=n=>t.delete(n),V=function(n,i,...l){const u=t.get(i);let _=null;const h=typeof u=="function"?u:u[_=he(l.shift())];if(n){if(e)return e(()=>h.apply(u,l));throw new Error("Synchronous WebAssembly cannot call async function")}const w=h.apply(u,l);if(typeof w?.then=="function")throw new Error(`${_} unexpectedly returned a Promise`);return w}};function Ln(...e){return V(!1,...e)}function Ft(...e){return V(!0,...e)}Ft.isAsync=!0;function On(...e){return V(!1,...e)}function It(...e){return V(!0,...e)}It.isAsync=!0;function jn(...e){return V(!1,...e)}function Ct(...e){return V(!0,...e)}Ct.isAsync=!0;function Pn(...e){return V(!1,...e)}function Rt(...e){return V(!0,...e)}Rt.isAsync=!0;function Nn(...e){return V(!1,...e)}function xt(...e){return V(!0,...e)}xt.isAsync=!0;function Un(...e){return V(!1,...e)}function Dt(...e){return V(!0,...e)}Dt.isAsync=!0;function zn(...e){return V(!1,...e)}function Lt(...e){return V(!0,...e)}Lt.isAsync=!0;function Bn(...e){return V(!1,...e)}function Ot(...e){return V(!0,...e)}Ot.isAsync=!0;function Mn(...e){return V(!1,...e)}function jt(...e){return V(!0,...e)}jt.isAsync=!0;function Hn(...e){return V(!1,...e)}function Pt(...e){return V(!0,...e)}Pt.isAsync=!0;function Wn(...e){return V(!1,...e)}function Nt(...e){return V(!0,...e)}Nt.isAsync=!0;function Vn(...e){return V(!1,...e)}function Ut(...e){return V(!0,...e)}Ut.isAsync=!0;function Qn(...e){return V(!1,...e)}function zt(...e){return V(!0,...e)}zt.isAsync=!0;function $n(...e){return V(!1,...e)}function Bt(...e){return V(!0,...e)}Bt.isAsync=!0;function Kn(...e){return V(!1,...e)}function Mt(...e){return V(!0,...e)}Mt.isAsync=!0;function Gn(...e){return V(!1,...e)}function Ht(...e){return V(!0,...e)}Ht.isAsync=!0;var Pe=e=>{try{return e()}catch(t){ce(t)}},Yn=e=>{for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},n={parameters:[],results:e[0]=="v"?[]:[t[e[0]]]},i=1;i<e.length;++i)n.parameters.push(t[e[i]]);return n},Xn=()=>{je+=1},Jn=()=>{je-=1},A={instrumentWasmImports(e){var t=/^(ipp|ipp_async|ippp|ippp_async|vppp|vppp_async|ipppj|ipppj_async|ipppi|ipppi_async|ipppp|ipppp_async|ipppip|ipppip_async|vpppip|vpppip_async|ippppi|ippppi_async|ippppij|ippppij_async|ipppiii|ipppiii_async|ippppip|ippppip_async|ippipppp|ippipppp_async|ipppppip|ipppppip_async|ipppiiip|ipppiiip_async|vppippii|vppippii_async|invoke_.*|__asyncjs__.*)$/;for(let[n,i]of Object.entries(e))typeof i=="function"&&(i.isAsync||t.test(n))},instrumentWasmExports(e){var t={};for(let[n,i]of Object.entries(e))typeof i=="function"?t[n]=(...l)=>{A.exportCallStack.push(n);try{return i(...l)}finally{E||(A.exportCallStack.pop(),A.maybeStopUnwind())}}:t[n]=i;return t},State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:16384,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId(e){var t=A.callStackNameToId[e];return t===void 0&&(t=A.callStackId++,A.callStackNameToId[e]=t,A.callStackIdToName[t]=e),t},maybeStopUnwind(){A.currData&&A.state===A.State.Unwinding&&A.exportCallStack.length===0&&(A.state=A.State.Normal,Pe(Ti),typeof Fibers<"u"&&Fibers.trampoline())},whenDone(){return new Promise((e,t)=>{A.asyncPromiseHandlers={resolve:e,reject:t}})},allocateData(){var e=vi(12+A.StackSize);return A.setDataHeader(e,e+12,A.StackSize),A.setDataRewindFunc(e),e},setDataHeader(e,t,n){W[e>>2]=t,W[e+4>>2]=t+n},setDataRewindFunc(e){var t=A.exportCallStack[0],n=A.getCallStackId(t);S[e+8>>2]=n},getDataRewindFuncName(e){var t=S[e+8>>2],n=A.callStackIdToName[t];return n},getDataRewindFunc(e){var t=c[e];return t},doRewind(e){var t=A.getDataRewindFuncName(e),n=A.getDataRewindFunc(t);return n()},handleSleep(e){if(!E){if(A.state===A.State.Normal){var t=!1,n=!1;e((i=0)=>{if(!E&&(A.handleSleepReturnValue=i,t=!0,!!n)){A.state=A.State.Rewinding,Pe(()=>Fi(A.currData)),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.resume();var l,u=!1;try{l=A.doRewind(A.currData)}catch(w){l=w,u=!0}var _=!1;if(!A.currData){var h=A.asyncPromiseHandlers;h&&(A.asyncPromiseHandlers=null,(u?h.reject:h.resolve)(l),_=!0)}if(u&&!_)throw l}}),n=!0,t||(A.state=A.State.Unwinding,A.currData=A.allocateData(),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.pause(),Pe(()=>Ai(A.currData)))}else A.state===A.State.Rewinding?(A.state=A.State.Normal,Pe(Ii),yi(A.currData),A.currData=null,A.sleepCallbacks.forEach(qt)):ce(`invalid state: ${A.state}`);return A.handleSleepReturnValue}},handleAsync:e=>A.handleSleep(t=>{e().then(t)})},Wt=(e,t)=>{e<128?t.push(e):t.push(e%128|128,e>>7)},Zn=(e,t)=>{var n=e.slice(0,1),i=e.slice(1),l={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),Wt(i.length,t);for(var u of i)t.push(l[u]);n=="v"?t.push(0):t.push(1,l[n])},ei=(e,t)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(Yn(t),e);var n=[1];Zn(t,n);var i=[0,97,115,109,1,0,0,0,1];Wt(n.length,i),i.push(...n),i.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var l=new WebAssembly.Module(new Uint8Array(i)),u=new WebAssembly.Instance(l,{e:{f:e}}),_=u.exports.f;return _},be,ti=e=>be.get(e),ri=(e,t)=>{if(Ee)for(var n=e;n<e+t;n++){var i=ti(n);i&&Ee.set(i,n)}},Ee,ni=e=>(Ee||(Ee=new WeakMap,ri(0,be.length)),Ee.get(e)||0),Vt=[],ii=()=>{if(Vt.length)return Vt.pop();try{be.grow(1)}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e}return be.length-1},Qt=(e,t)=>be.set(e,t),ai=(e,t)=>{var n=ni(e);if(n)return n;var i=ii();try{Qt(i,e)}catch(u){if(!(u instanceof TypeError))throw u;var l=ei(e,t);Qt(i,l)}return Ee.set(e,i),i},$t=e=>{var t=r["_"+e];return t},Kt=(e,t)=>{R.set(e,t)},Gt=e=>Si(e),si=e=>{var t=pe(e)+1,n=Gt(t);return ue(e,n,t),n},_e=(e,t,n,i,l)=>{var u={string:G=>{var ee=0;return G!=null&&G!==0&&(ee=si(G)),ee},array:G=>{var ee=Gt(G.length);return Kt(G,ee),ee}};function _(G){return t==="string"?he(G):t==="boolean"?!!G:G}var h=$t(e),w=[],q=0;if(i)for(var O=0;O<i.length;O++){var H=u[n[O]];H?(q===0&&(q=Dr()),w[O]=H(i[O])):w[O]=i[O]}var B=A.currData,T=h(...w);function N(G){return Jn(),q!==0&&xr(q),_(G)}var Z=l?.async;return Xn(),A.currData!=B?A.whenDone().then(N):(T=N(T),Z?Promise.resolve(T):T)},oi=(e,t,n,i)=>{var l=!n||n.every(_=>_==="number"||_==="boolean"),u=t!=="string";return u&&l&&!i?$t(e):(..._)=>_e(e,t,n,_,i)},li=e=>Ei(),ci=(e,t,n)=>{if(n??=2147483647,n<2)return 0;n-=2;for(var i=t,l=n<e.length*2?n/2:e.length,u=0;u<l;++u){var _=e.charCodeAt(u);Y[t>>1]=_,t+=2}return Y[t>>1]=0,t-i},ui=(e,t,n)=>{if(n??=2147483647,n<4)return 0;for(var i=t,l=i+n-4,u=0;u<e.length;++u){var _=e.charCodeAt(u);if(_>=55296&&_<=57343){var h=e.charCodeAt(++u);_=65536+((_&1023)<<10)|h&1023}if(S[t>>2]=_,t+=4,t+4>l)break}return S[t>>2]=0,t-i},fi=e=>{for(var t="";;){var n=Q[e++];if(!n)return t;t+=String.fromCharCode(n)}},_i=new TextDecoder("utf-16le"),di=(e,t)=>{for(var n=e>>1,i=n+t/2,l=n;!(l>=i)&&J[l];)++l;return _i.decode(J.subarray(n,l))},hi=(e,t)=>{for(var n=0,i="";!(n>=t/4);){var l=S[e+n*4>>2];if(l==0)break;if(++n,l>=65536){var u=l-65536;i+=String.fromCharCode(55296|u>>10,56320|u&1023)}else i+=String.fromCharCode(l)}return i},pi=e=>{for(var t=[],n=0;n<e.length;n++){var i=e[n];i>255&&(i&=255),t.push(String.fromCharCode(i))}return t.join("")};a.createPreloadedFile=zr,a.staticInit(),j.doesNotExistError=new a.ErrnoError(44),j.doesNotExistError.stack="<generic error, no stack>",V(),r.noExitRuntime&&(Ve=r.noExitRuntime),r.preloadPlugins&&(gt=r.preloadPlugins),r.print&&(v=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(d=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(F=r.thisProgram),r.getTempRet0=li,r.ccall=_e,r.cwrap=oi,r.addFunction=ai,r.setValue=we,r.getValue=ht,r.UTF8ToString=he,r.stringToUTF8=ue,r.lengthBytesUTF8=pe,r.intArrayFromString=Ke,r.intArrayToString=pi,r.AsciiToString=fi,r.UTF16ToString=di,r.stringToUTF16=ci,r.UTF32ToString=hi,r.stringToUTF32=ui,r.writeArrayToMemory=Kt;var mi={a:Lr,aa:Mr,da:Hr,ba:Wr,$:Vr,b:$r,_:Kr,y:Gr,U:Yr,Y:Xr,R:Jr,X:Zr,P:en,N:tn,M:rn,Z:nn,K:an,J:sn,F:on,E:ln,w:dn,u:hn,v:pn,G:yn,Q:wn,n:gn,g:At,H:kn,S:qn,T:An,o:Tn,I:Fn,O:Cn,x:Rn,V:Tt,L:Dn,s:Ln,t:Ft,ka:On,oa:It,j:jn,k:Ct,c:Pn,d:Rt,ga:Nn,ha:xt,ia:Un,ja:Dt,h:zn,i:Lt,z:Bn,A:Ot,e:Mn,f:jt,ea:Hn,fa:Pt,B:Wn,C:Nt,p:Vn,q:Ut,la:Qn,ma:zt,D:kt,na:$n,r:Bt,l:Kn,m:Mt,W:Gn,ca:Ht},c=await Ir();c.qa,r._sqlite3_status64=c.ra,r._sqlite3_status=c.sa,r._sqlite3_msize=c.ta,r._sqlite3_db_status=c.ua,r._sqlite3_vfs_find=c.va,r._sqlite3_vfs_register=c.wa,r._sqlite3_vfs_unregister=c.xa,r._sqlite3_release_memory=c.ya,r._sqlite3_soft_heap_limit64=c.za,r._sqlite3_memory_used=c.Aa,r._sqlite3_hard_heap_limit64=c.Ba,r._sqlite3_memory_highwater=c.Ca,r._sqlite3_malloc=c.Da,r._sqlite3_malloc64=c.Ea,r._sqlite3_free=c.Fa,r._sqlite3_realloc=c.Ga,r._sqlite3_realloc64=c.Ha,r._sqlite3_str_vappendf=c.Ia,r._sqlite3_str_append=c.Ja,r._sqlite3_str_appendchar=c.Ka,r._sqlite3_str_appendall=c.La,r._sqlite3_str_appendf=c.Ma,r._sqlite3_str_finish=c.Na,r._sqlite3_str_errcode=c.Oa,r._sqlite3_str_length=c.Pa,r._sqlite3_str_value=c.Qa,r._sqlite3_str_reset=c.Ra,r._sqlite3_str_new=c.Sa,r._sqlite3_vmprintf=c.Ta,r._sqlite3_mprintf=c.Ua,r._sqlite3_vsnprintf=c.Va,r._sqlite3_snprintf=c.Wa,r._sqlite3_log=c.Xa,r._sqlite3_randomness=c.Ya,r._sqlite3_stricmp=c.Za,r._sqlite3_strnicmp=c._a,r._sqlite3_os_init=c.$a,r._sqlite3_os_end=c.ab,r._sqlite3_serialize=c.bb,r._sqlite3_prepare_v2=c.cb,r._sqlite3_step=c.db,r._sqlite3_column_int64=c.eb,r._sqlite3_reset=c.fb,r._sqlite3_exec=c.gb,r._sqlite3_column_int=c.hb,r._sqlite3_finalize=c.ib,r._sqlite3_deserialize=c.jb,r._sqlite3_database_file_object=c.kb,r._sqlite3_backup_init=c.lb,r._sqlite3_backup_step=c.mb,r._sqlite3_backup_finish=c.nb,r._sqlite3_backup_remaining=c.ob,r._sqlite3_backup_pagecount=c.pb,r._sqlite3_clear_bindings=c.qb,r._sqlite3_value_blob=c.rb,r._sqlite3_value_text=c.sb,r._sqlite3_value_bytes=c.tb,r._sqlite3_value_bytes16=c.ub,r._sqlite3_value_double=c.vb,r._sqlite3_value_int=c.wb,r._sqlite3_value_int64=c.xb,r._sqlite3_value_subtype=c.yb,r._sqlite3_value_pointer=c.zb,r._sqlite3_value_text16=c.Ab,r._sqlite3_value_text16be=c.Bb,r._sqlite3_value_text16le=c.Cb,r._sqlite3_value_type=c.Db,r._sqlite3_value_encoding=c.Eb,r._sqlite3_value_nochange=c.Fb,r._sqlite3_value_frombind=c.Gb,r._sqlite3_value_dup=c.Hb,r._sqlite3_value_free=c.Ib,r._sqlite3_result_blob=c.Jb,r._sqlite3_result_blob64=c.Kb,r._sqlite3_result_double=c.Lb,r._sqlite3_result_error=c.Mb,r._sqlite3_result_error16=c.Nb,r._sqlite3_result_int=c.Ob,r._sqlite3_result_int64=c.Pb,r._sqlite3_result_null=c.Qb,r._sqlite3_result_pointer=c.Rb,r._sqlite3_result_subtype=c.Sb,r._sqlite3_result_text=c.Tb,r._sqlite3_result_text64=c.Ub,r._sqlite3_result_text16=c.Vb,r._sqlite3_result_text16be=c.Wb,r._sqlite3_result_text16le=c.Xb,r._sqlite3_result_value=c.Yb,r._sqlite3_result_error_toobig=c.Zb,r._sqlite3_result_zeroblob=c._b,r._sqlite3_result_zeroblob64=c.$b,r._sqlite3_result_error_code=c.ac,r._sqlite3_result_error_nomem=c.bc,r._sqlite3_user_data=c.cc,r._sqlite3_context_db_handle=c.dc,r._sqlite3_vtab_nochange=c.ec,r._sqlite3_vtab_in_first=c.fc,r._sqlite3_vtab_in_next=c.gc,r._sqlite3_aggregate_context=c.hc,r._sqlite3_get_auxdata=c.ic,r._sqlite3_set_auxdata=c.jc,r._sqlite3_column_count=c.kc,r._sqlite3_data_count=c.lc,r._sqlite3_column_blob=c.mc,r._sqlite3_column_bytes=c.nc,r._sqlite3_column_bytes16=c.oc,r._sqlite3_column_double=c.pc,r._sqlite3_column_text=c.qc,r._sqlite3_column_value=c.rc,r._sqlite3_column_text16=c.sc,r._sqlite3_column_type=c.tc,r._sqlite3_column_name=c.uc,r._sqlite3_column_name16=c.vc,r._sqlite3_bind_blob=c.wc,r._sqlite3_bind_blob64=c.xc,r._sqlite3_bind_double=c.yc,r._sqlite3_bind_int=c.zc,r._sqlite3_bind_int64=c.Ac,r._sqlite3_bind_null=c.Bc,r._sqlite3_bind_pointer=c.Cc,r._sqlite3_bind_text=c.Dc,r._sqlite3_bind_text64=c.Ec,r._sqlite3_bind_text16=c.Fc,r._sqlite3_bind_value=c.Gc,r._sqlite3_bind_zeroblob=c.Hc,r._sqlite3_bind_zeroblob64=c.Ic,r._sqlite3_bind_parameter_count=c.Jc,r._sqlite3_bind_parameter_name=c.Kc,r._sqlite3_bind_parameter_index=c.Lc,r._sqlite3_db_handle=c.Mc,r._sqlite3_stmt_readonly=c.Nc,r._sqlite3_stmt_isexplain=c.Oc,r._sqlite3_stmt_explain=c.Pc,r._sqlite3_stmt_busy=c.Qc,r._sqlite3_next_stmt=c.Rc,r._sqlite3_stmt_status=c.Sc,r._sqlite3_sql=c.Tc,r._sqlite3_expanded_sql=c.Uc,r._sqlite3_value_numeric_type=c.Vc,r._sqlite3_blob_open=c.Wc,r._sqlite3_blob_close=c.Xc,r._sqlite3_blob_read=c.Yc,r._sqlite3_blob_write=c.Zc,r._sqlite3_blob_bytes=c._c,r._sqlite3_blob_reopen=c.$c,r._sqlite3_set_authorizer=c.ad,r._sqlite3_strglob=c.bd,r._sqlite3_strlike=c.cd,r._sqlite3_errmsg=c.dd,r._sqlite3_auto_extension=c.ed,r._sqlite3_cancel_auto_extension=c.fd,r._sqlite3_reset_auto_extension=c.gd,r._sqlite3_prepare=c.hd,r._sqlite3_prepare_v3=c.id,r._sqlite3_prepare16=c.jd,r._sqlite3_prepare16_v2=c.kd,r._sqlite3_prepare16_v3=c.ld,r._sqlite3_get_table=c.md,r._sqlite3_free_table=c.nd,r._sqlite3_create_module=c.od,r._sqlite3_create_module_v2=c.pd,r._sqlite3_drop_modules=c.qd,r._sqlite3_declare_vtab=c.rd,r._sqlite3_vtab_on_conflict=c.sd,r._sqlite3_vtab_config=c.td,r._sqlite3_vtab_collation=c.ud,r._sqlite3_vtab_in=c.vd,r._sqlite3_vtab_rhs_value=c.wd,r._sqlite3_vtab_distinct=c.xd,r._sqlite3_keyword_name=c.yd,r._sqlite3_keyword_count=c.zd,r._sqlite3_keyword_check=c.Ad,r._sqlite3_complete=c.Bd,r._sqlite3_complete16=c.Cd,r._sqlite3_libversion=c.Dd,r._sqlite3_libversion_number=c.Ed,r._sqlite3_threadsafe=c.Fd,r._sqlite3_initialize=c.Gd,r._sqlite3_shutdown=c.Hd,r._sqlite3_config=c.Id,r._sqlite3_db_mutex=c.Jd,r._sqlite3_db_release_memory=c.Kd,r._sqlite3_db_cacheflush=c.Ld,r._sqlite3_db_config=c.Md,r._sqlite3_last_insert_rowid=c.Nd,r._sqlite3_set_last_insert_rowid=c.Od,r._sqlite3_changes64=c.Pd,r._sqlite3_changes=c.Qd,r._sqlite3_total_changes64=c.Rd,r._sqlite3_total_changes=c.Sd,r._sqlite3_txn_state=c.Td,r._sqlite3_close=c.Ud,r._sqlite3_close_v2=c.Vd,r._sqlite3_busy_handler=c.Wd,r._sqlite3_progress_handler=c.Xd,r._sqlite3_busy_timeout=c.Yd,r._sqlite3_interrupt=c.Zd,r._sqlite3_is_interrupted=c._d,r._sqlite3_create_function=c.$d,r._sqlite3_create_function_v2=c.ae,r._sqlite3_create_window_function=c.be,r._sqlite3_create_function16=c.ce,r._sqlite3_overload_function=c.de,r._sqlite3_trace_v2=c.ee,r._sqlite3_commit_hook=c.fe,r._sqlite3_update_hook=c.ge,r._sqlite3_rollback_hook=c.he,r._sqlite3_autovacuum_pages=c.ie,r._sqlite3_wal_autocheckpoint=c.je,r._sqlite3_wal_hook=c.ke,r._sqlite3_wal_checkpoint_v2=c.le,r._sqlite3_wal_checkpoint=c.me,r._sqlite3_error_offset=c.ne,r._sqlite3_errmsg16=c.oe,r._sqlite3_errcode=c.pe,r._sqlite3_extended_errcode=c.qe,r._sqlite3_system_errno=c.re,r._sqlite3_errstr=c.se,r._sqlite3_limit=c.te,r._sqlite3_open=c.ue,r._sqlite3_open_v2=c.ve,r._sqlite3_open16=c.we,r._sqlite3_create_collation=c.xe,r._sqlite3_create_collation_v2=c.ye,r._sqlite3_create_collation16=c.ze,r._sqlite3_collation_needed=c.Ae,r._sqlite3_collation_needed16=c.Be,r._sqlite3_get_clientdata=c.Ce,r._sqlite3_set_clientdata=c.De,r._sqlite3_get_autocommit=c.Ee,r._sqlite3_table_column_metadata=c.Fe,r._sqlite3_sleep=c.Ge,r._sqlite3_extended_result_codes=c.He,r._sqlite3_file_control=c.Ie,r._sqlite3_test_control=c.Je,r._sqlite3_create_filename=c.Ke,r._sqlite3_free_filename=c.Le,r._sqlite3_uri_parameter=c.Me,r._sqlite3_uri_key=c.Ne,r._sqlite3_uri_boolean=c.Oe,r._sqlite3_uri_int64=c.Pe,r._sqlite3_filename_database=c.Qe,r._sqlite3_filename_journal=c.Re,r._sqlite3_filename_wal=c.Se,r._sqlite3_db_name=c.Te,r._sqlite3_db_filename=c.Ue,r._sqlite3_db_readonly=c.Ve,r._sqlite3_compileoption_used=c.We,r._sqlite3_compileoption_get=c.Xe,r._sqlite3_sourceid=c.Ye;var vi=r._malloc=c.Ze,yi=r._free=c._e;r._RegisterExtensionFunctions=c.$e,r._getSqliteFree=c.af;var wi=r._main=c.bf;r._libauthorizer_set_authorizer=c.cf,r._libfunction_create_function=c.df,r._libhook_commit_hook=c.ef,r._libhook_update_hook=c.ff,r._libprogress_progress_handler=c.gf,r._libvfs_vfs_register=c.hf;var gi=c.kf,bi=c.lf,Ei=c.mf,ki=c.nf,Si=c.of,qi=c.pf;r.dynCall_vi=c.dynCall_vi,r.dynCall_iiiii=c.dynCall_iiiii,r.dynCall_viii=c.dynCall_viii,r.dynCall_iii=c.dynCall_iii,r.dynCall_iiii=c.dynCall_iiii,r.dynCall_iiiiiii=c.dynCall_iiiiiii,r.dynCall_ii=c.dynCall_ii,r.dynCall_vii=c.dynCall_vii,r.dynCall_iiiiii=c.dynCall_iiiiii,r.dynCall_viiii=c.dynCall_viiii,r.dynCall_iiiiiiiii=c.dynCall_iiiiiiiii,r.dynCall_vijii=c.dynCall_vijii,r.dynCall_viiiii=c.dynCall_viiiii,r.dynCall_iiiij=c.dynCall_iiiij,r.dynCall_viji=c.dynCall_viji,r.dynCall_viiiij=c.dynCall_viiiij,r.dynCall_iij=c.dynCall_iij,r.dynCall_v=c.dynCall_v,r.dynCall_iijii=c.dynCall_iijii,r.dynCall_iiji=c.dynCall_iiji,r.dynCall_i=c.dynCall_i,r.dynCall_iiiiiij=c.dynCall_iiiiiij,r.dynCall_ji=c.dynCall_ji,r.dynCall_iiiiiiii=c.dynCall_iiiiiiii;var Ai=c.qf,Ti=c.rf,Fi=c.sf,Ii=c.tf;r._sqlite3_version=5472;function Ci(){var e=wi,t=0,n=0;try{var i=e(t,n);return St(i,!0),i}catch(l){return Ye(l)}}function Je(){if(de>0){qe=Je;return}if(Le(),de>0){qe=Je;return}function e(){if(r.calledRun=!0,!E){br(),f(r),r.onRuntimeInitialized?.();var t=r.noInitialRun||!1;t||Ci(),Er()}}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),e()},1)):e()}function Ri(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return Ri(),Je(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let t=0;r.set_authorizer=function(n,i,l){t&&(r.deleteCallback(t),r._sqlite3_free(t),t=0),t=r._sqlite3_malloc(4),we(t,i instanceof e?1:0,"i32");const u=_e("libauthorizer_set_authorizer","number",["number","number","number"],[n,i?1:0,t]);return!u&&i&&r.setCallback(t,(_,h,w,q,O,H)=>i(l,h,w,q,O,H)),u}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor,t=["xFunc","xStep","xFinal"],n=new Map;r.create_function=function(i,l,u,_,h,w,q,O){const H=r._sqlite3_malloc(4),B={xFunc:w,xStep:q,xFinal:O};we(H,t.reduce((N,Z,G)=>B[Z]instanceof e?N|1<<G:N,0),"i32");const T=_e("libfunction_create_function","number",["number","string","number","number","number","number","number","number"],[i,l,u,_,H,w?1:0,q?1:0,O?1:0]);if(!T){if(n.has(l)){const N=n.get(l);r.deleteCallback(N)}n.set(l,H),r.setCallback(H,{xFunc:w,xStep:q,xFinal:O})}return T}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let t=0;r.update_hook=function(n,i){t&&(r.deleteCallback(t),r._sqlite3_free(t),t=0),t=r._sqlite3_malloc(4),we(t,i instanceof e?1:0,"i32"),_e("libhook_update_hook","void",["number","number","number"],[n,i?1:0,t]),i&&r.setCallback(t,(l,u,_,h,w,q)=>i(u,_,h,w,q))}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let t=0;r.commit_hook=function(n,i){t&&(r.deleteCallback(t),r._sqlite3_free(t),t=0),t=r._sqlite3_malloc(4),we(t,i instanceof e?1:0,"i32"),_e("libhook_commit_hook","void",["number","number","number"],[n,i?1:0,t]),i&&r.setCallback(t,l=>i())}})(),(function(){const e=Object.getPrototypeOf(async function(){}).constructor;let t=0;r.progress_handler=function(n,i,l,u){t&&(r.deleteCallback(t),r._sqlite3_free(t),t=0),t=r._sqlite3_malloc(4),we(t,l instanceof e?1:0,"i32"),_e("libprogress_progress_handler","number",["number","number","number","number"],[n,i,l?1:0,t]),l&&r.setCallback(t,_=>l(u))}})(),(function(){const e=["xOpen","xDelete","xAccess","xFullPathname","xRandomness","xSleep","xCurrentTime","xGetLastError","xCurrentTimeInt64","xClose","xRead","xWrite","xTruncate","xSync","xFileSize","xLock","xUnlock","xCheckReservedLock","xFileControl","xSectorSize","xDeviceCharacteristics","xShmMap","xShmLock","xShmBarrier","xShmUnmap"],t=new Map;r.vfs_register=function(n,i){let l=0,u=0;e.forEach((h,w)=>{n[h]&&(l|=1<<w,n.hasAsyncMethod(h)&&(u|=1<<w))});const _=r._sqlite3_malloc(4);try{const h=_e("libvfs_vfs_register","number",["string","number","number","number","number","number"],[n.name,n.mxPathname,l,u,i?1:0,_]);if(!h){if(t.has(n.name)){const q=t.get(n.name);r.deleteCallback(q)}const w=ht(_,"*");t.set(n.name,w),r.setCallback(w,n)}return h}finally{r._sqlite3_free(_)}}})(),s=g,s}),ba=ga,Ea=new Set(["TransactionInactiveError","InvalidStateError"]),ka=class{path;flags;metadata;fileSize=0;needsMetadataSync=!1;rollback=null;changedPages=new Set;synchronous="full";txOptions={durability:"strict"};constructor(o,s,r){this.path=o,this.flags=s,this.metadata=r}},Sa=class wr extends Be(ta){mapIdToFile=new Map;lastError=null;log=null;#r;#t;static async create(s,r,f){const m=new wr(s,r,f);return await m.isReady(),m}constructor(s,r,f={}){super(s,r,f),this.#r=this.#e(f.idbName??s)}async#e(s){this.#t=await qa.create(s)}close(){this.#t.close()}async isReady(){await super.isReady(),await this.#r}getFilename(s){const r=this.mapIdToFile.get(s).path;return`IDB(${this.name}):${r}`}async jOpen(s,r,f,m){try{const b=new URL(s||Math.random().toString(36).slice(2),"file://").pathname;let k=await this.#t.q(({metadata:I})=>I.get(b));if(!k&&f&Me&&(k={name:b,fileSize:0,version:0},await this.#t.q(({metadata:I})=>I.put(k),"rw")),!k)throw new Error(`File ${b} not found`);const F=new ka(b,f,k);return this.mapIdToFile.set(r,F),m.setInt32(0,f,!0),C}catch(g){return this.lastError=g,ot}}async jDelete(s,r){try{const m=new URL(s,"file://").pathname;return this.#t.q(({metadata:g,blocks:b})=>{const k=IDBKeyRange.bound([m,-1/0],[m,1/0]);b.delete(k),g.delete(m)},"rw"),r&&await this.#t.sync(!1),C}catch(f){return this.lastError=f,Pi}}async jAccess(s,r,f){try{const g=new URL(s,"file://").pathname,b=await this.#t.q(({metadata:k})=>k.get(g));return f.setInt32(0,b?1:0,!0),C}catch(m){return this.lastError=m,Li}}async jClose(s){try{const r=this.mapIdToFile.get(s);return this.mapIdToFile.delete(s),r.flags&Wi&&await this.#t.q(({metadata:f,blocks:m})=>{f.delete(r.path),m.delete(IDBKeyRange.bound([r.path,0],[r.path,1/0]))},"rw"),r.needsMetadataSync&&this.#t.q(({metadata:f})=>f.put(r.metadata),"rw"),await this.#t.sync(r.synchronous==="full"),C}catch(r){return this.lastError=r,ji}}async jRead(s,r,f){try{const m=this.mapIdToFile.get(s);let g=0;for(;g<r.byteLength;){const b=f+g,k=await this.#t.q(({blocks:U})=>{const z=IDBKeyRange.bound([m.path,-b],[m.path,1/0]);return U.get(z)});if(!k||k.data.byteLength-k.offset<=b)return r.fill(0,g),lr;const F=r.subarray(g),I=b+k.offset,D=Math.min(Math.max(k.data.byteLength-I,0),F.byteLength);F.set(k.data.subarray(I,I+D)),g+=D}return C}catch(m){return this.lastError=m,Bi}}jWrite(s,r,f){try{const m=this.mapIdToFile.get(s);if(m.flags&ve&&!m.rollback){const F=Object.assign({pendingVersion:m.metadata.version-1},m.metadata);this.#t.q(({metadata:I})=>I.put(F),"rw",m.txOptions),m.rollback=Object.assign({},m.metadata),m.metadata.version--}m.flags&ve&&m.changedPages.add(f);const g=r.slice(),b=m.metadata.version;if(!(f<m.metadata.fileSize)||m.flags&ve||m.flags&Qi){const F={path:m.path,offset:-f,version:b,data:r.slice()};this.#t.q(({blocks:I})=>{I.put(F),m.changedPages.add(f)},"rw",m.txOptions)}else this.#t.q(async({blocks:F})=>{const I=IDBKeyRange.bound([m.path,-f],[m.path,1/0]),D=await F.get(I);D.data.subarray(f+D.offset).set(g),F.put(D)},"rw",m.txOptions);return m.metadata.fileSize<f+r.length&&(m.metadata.fileSize=f+r.length,m.needsMetadataSync=!0),C}catch(m){return this.lastError=m,cr}}jTruncate(s,r){try{const f=this.mapIdToFile.get(s);return r<f.metadata.fileSize&&(this.#t.q(({blocks:m})=>{const g=IDBKeyRange.bound([f.path,-1/0],[f.path,-r,1/0]);m.delete(g)},"rw",f.txOptions),f.metadata.fileSize=r,f.needsMetadataSync=!0),C}catch(f){return this.lastError=f,Mi}}async jSync(s,r){try{const f=this.mapIdToFile.get(s);return f.needsMetadataSync&&(this.#t.q(({metadata:m})=>m.put(f.metadata),"rw",f.txOptions),f.needsMetadataSync=!1),f.flags&ve?f.synchronous==="full"&&await this.#t.sync(!0):await this.#t.sync(f.synchronous==="full"),C}catch(f){return this.lastError=f,Ui}}jFileSize(s,r){try{const f=this.mapIdToFile.get(s);return r.setBigInt64(0,BigInt(f.metadata.fileSize),!0),C}catch(f){return this.lastError=f,Ni}}async jLock(s,r){const f=this.mapIdToFile.get(s),m=await super.jLock(s,r);return r===Se&&(f.metadata=await this.#t.q(async({metadata:g,blocks:b})=>{const k=await g.get(f.path);return k.pendingVersion&&(await new Promise((F,I)=>{const D=IDBKeyRange.bound([k.name,-1/0],[k.name,1/0]),U=b.openCursor(D);U.onsuccess=()=>{const z=U.result;z?(z.value.version<k.version&&z.delete(),z.continue()):F()},U.onerror=()=>I(U.error)}),delete k.pendingVersion,g.put(k)),k},"rw",f.txOptions)),m}async jUnlock(s,r){if(r===ye){const f=this.mapIdToFile.get(s);await this.#t.sync(f.synchronous==="full")}return super.jUnlock(s,r)}jFileControl(s,r,f){try{const m=this.mapIdToFile.get(s);switch(r){case Gi:const g=or(f,4),b=or(f,8);this.log?.("xFileControl",m.path,"PRAGMA",g,b);const k=I=>{const D=new TextEncoder().encode(I),U=this._module._sqlite3_malloc(D.byteLength);return this._module.HEAPU8.subarray(U,U+D.byteLength).set(D),f.setUint32(0,U,!0),Yt};switch(g.toLowerCase()){case"page_size":if(m.flags&ve&&b&&m.metadata.fileSize)return Yt;break;case"synchronous":if(b)switch(b.toLowerCase()){case"0":case"off":m.synchronous="off",m.txOptions={durability:"relaxed"};break;case"1":case"normal":m.synchronous="normal",m.txOptions={durability:"relaxed"};break;case"2":case"3":case"full":case"extra":m.synchronous="full",m.txOptions={durability:"strict"};break}break;case"write_hint":return super.jFileControl(s,Be.WRITE_HINT_OP_CODE,null)}break;case fr:if(this.log?.("xFileControl",m.path,"SYNC"),m.rollback){const I=Object.assign({},m.metadata),D=m.rollback.fileSize;this.#t.q(({metadata:U,blocks:z})=>{U.put(I);for(const $ of m.changedPages)if($<D){const ie=IDBKeyRange.bound([m.path,-$,I.version],[m.path,-$,1/0],!0);z.delete(ie)}m.changedPages.clear()},"rw",m.txOptions),m.needsMetadataSync=!1,m.rollback=null}break;case _r:return this.log?.("xFileControl",m.path,"BEGIN_ATOMIC_WRITE"),C;case dr:return this.log?.("xFileControl",m.path,"COMMIT_ATOMIC_WRITE"),C;case Yi:this.log?.("xFileControl",m.path,"ROLLBACK_ATOMIC_WRITE"),m.metadata=m.rollback;const F=Object.assign({},m.metadata);return this.#t.q(({metadata:I,blocks:D})=>{I.put(F);for(const U of m.changedPages)D.delete([m.path,-U,F.version-1]);m.changedPages.clear()},"rw",m.txOptions),m.needsMetadataSync=!1,m.rollback=null,C}}catch(m){return this.lastError=m,rt}return super.jFileControl(s,r,f)}jDeviceCharacteristics(s){return 0|Ki|$i}jGetLastError(s){if(this.lastError){const r=s.subarray(0,s.byteLength-1),{written:f}=new TextEncoder().encodeInto(this.lastError.message,r);s[f]=0}return C}};function or(o,s){const r=o.getUint32(s,!0);if(r){const f=new Uint8Array(o.buffer,r);return new TextDecoder().decode(f.subarray(0,f.indexOf(0)))}return null}var qa=class gr{#r;#t=null;#e=Promise.resolve();#n=null;#a=new WeakSet;log=null;static async create(s){const r=await new Promise((f,m)=>{const g=indexedDB.open(s,6);g.onupgradeneeded=async b=>{const k=g.result;switch(b.oldVersion,b.oldVersion){case 0:k.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"]);case 5:const F=g.transaction;F.objectStore("blocks").deleteIndex("version");const D=k.createObjectStore("metadata",{keyPath:"name"});await new Promise((U,z)=>{let $={};const ie=F.objectStore("blocks").openCursor();ie.onsuccess=()=>{const v=ie.result;if(v){const p=v.value;typeof p.offset!="number"||p.path===$.path&&p.offset===$.offset?v.delete():p.offset===0&&(D.put({name:p.path,fileSize:p.fileSize,version:p.version}),delete p.fileSize,v.update(p)),$=p,v.continue()}else U()},ie.onerror=()=>z(ie.error)});break}},g.onsuccess=()=>f(g.result),g.onerror=()=>m(g.error)});return new gr(r)}constructor(s){this.#r=s}close(){this.#r.close()}q(s,r="ro",f={}){const m=r==="ro"?"readonly":"readwrite",g=Object.assign({durability:"default"},f);return this.#t=(this.#t||Promise.resolve()).then(()=>this.#s(s,m,g)),this.#t}async#s(s,r,f){let m;this.#n&&this.#a.has(this.#n.transaction)&&this.#n.transaction.mode>=r&&this.#n.transaction.durability===f.durability&&(m=this.#n.transaction,this.#n.readyState==="pending"&&await new Promise(g=>{this.#n.addEventListener("success",g,{once:!0}),this.#n.addEventListener("error",g,{once:!0})}));for(let g=0;g<2;++g){m||(await this.#e,m=this.#r.transaction(this.#r.objectStoreNames,r,f),this.log?.("IDBTransaction open",r),this.#a.add(m),this.#e=new Promise((b,k)=>{m.addEventListener("complete",()=>{this.log?.("IDBTransaction complete"),this.#a.delete(m),b()}),m.addEventListener("abort",()=>{this.#a.delete(m),k(new Error("transaction aborted"))})}));try{const b=[...m.objectStoreNames].map(k=>[k,this.proxyStoreOrIndex(m.objectStore(k))]);return await s(Object.fromEntries(b))}catch(b){if(!g&&Ea.has(b.name)){this.log?.(`${b.name}, retrying`),m=null;continue}throw b}}}proxyStoreOrIndex(s){return new Proxy(s,{get:(r,f,m)=>{const g=Reflect.get(r,f,m);return typeof g=="function"?(...b)=>{const k=Reflect.apply(g,r,b);return k instanceof IDBRequest&&!f.endsWith("Cursor")?(this.#n=k,k.addEventListener("error",()=>{k.transaction.abort()},{once:!0}),Aa(k)):k}:g}})}async sync(s){this.#t&&(await this.#t,s&&await this.#e,this.reset())}reset(){this.#t=null,this.#e=Promise.resolve(),this.#n=null}};function Aa(o){return new Promise((s,r)=>{o.onsuccess=()=>s(o.result),o.onerror=()=>r(o.error)})}async function Ia(o,s={}){const{url:r,lockPolicy:f="shared+hint",lockTimeout:m=1/0,...g}=s,b=await ba(r?{locateFile:()=>r}:void 0),k=o.endsWith(".db")?o:`${o}.db`,F={idbName:k,lockPolicy:f,lockTimeout:m};return{path:k,sqliteModule:b,vfsFn:Sa.create,vfsOptions:F,...g}}const Ca="/gioibon/assets/wa-sqlite-async.CTFr_gWm.wasm";export{Ta as a,Fa as i,Ia as u,Ca as w};
